import{P as w,r as C,f,$ as F,T as _,d$ as A,aq as k,n as z,p as B,v as V,I as b,z as t,E as y,F as D,x as d,y as l,D as v,A as m,L as R,K as S}from"./index-21964c78.js";import{E as I,a as N}from"./form-item-8d3c5b0e.js";/* empty css               *//* empty css              */import{a as M,E as P}from"./step-fc04c36a.js";import{h as T}from"./helper-0ec263a7.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./castArray-18b00898.js";import"./_baseClone-42b68cca.js";import"./_Uint8Array-4a48d71f.js";import"./_initCloneObject-dc96d043.js";import"./index-a7a3c269.js";import"./dayjs.min-8a7592b2.js";const q=w({setup(){C("");const e=C("default"),n=C();let r=f({new_phone:"",verify_code:"",step:1,user_intl:"+86",yzm:""}),c=f({bind_access_token:"",verify_code:""});const h=f({new_phone:[{validator:(a,u,o)=>{u===""?o(new Error(F("请输入手机号码"))):T.email(u)?o(new Error(F("手机号码错误"))):o()},trigger:"blur"}]}),s=f({}),i=()=>{if(r.step==1){if(!r.new_phone){_.error(F("请输入手机号"));return}var a={mobile:r.user_intl+r.new_phone};A(a).then(u=>{u.status==200?r.step=2:_.error(u.msg)})}else if(!r.yzm)_.error(F("请输入验证码"));else{let u={mobile:r.new_phone,password:"",auth_code:r.yzm,user_intl:"+86",mobile_id:"pc"};k(u).then(o=>{o.status==200?r.step=3:_.error(o.msg)})}};return{formSize:e,ruleForm1:r,ruleFormRef:n,ruleForm2:c,rules1:h,rules2:s,submitForm:async a=>{a&&await a.validate((u,o)=>{u?(console.log("submit!"),i()):console.log("error submit!",o)})}}}});const K={class:"page"},L={class:"page"},j={style:{"font-size":"20px",color:"#ff6700",margin:"20px","margin-left":"62px"}},G={class:"page"},H={style:{"font-size":"20px",color:"#ff6700",margin:"20px","margin-left":"62px"}};function J(e,n,r,c,g,h){const s=M,i=P,E=R,a=I,u=S,o=N,$=z("block");return B(),V(D,null,[e.ruleForm1.step==1?(B(),b($,{key:0},{default:t(()=>[d("div",K,[l(i,{active:1},{default:t(()=>[l(s,{title:e.$t("输入新手机")},null,8,["title"]),l(s,{title:e.$t("验证新手机")},null,8,["title"]),l(s,{title:e.$t("完成")},null,8,["title"])]),_:1}),l(o,{ref:"ruleFormRef",model:e.ruleForm1,rules:e.rules1,"label-width":"120px",class:"demo-ruleForm"},{default:t(()=>[l(a,{label:e.$t("手机号码"),prop:"new_phone"},{default:t(()=>[l(E,{modelValue:e.ruleForm1.new_phone,"onUpdate:modelValue":n[0]||(n[0]=p=>e.ruleForm1.new_phone=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(a,null,{default:t(()=>[l(u,{type:"primary",onClick:n[1]||(n[1]=p=>e.submitForm(e.ruleFormRef))},{default:t(()=>[v(m(e.$t("下一步")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1})):y("",!0),e.ruleForm1.step==2?(B(),b($,{key:1},{default:t(()=>[d("div",L,[l(i,{active:2},{default:t(()=>[l(s,{title:e.$t("输入新手机")},null,8,["title"]),l(s,{title:e.$t("验证新手机")},null,8,["title"]),l(s,{title:e.$t("完成")},null,8,["title"])]),_:1}),l(o,{ref:"ruleFormRef",model:e.ruleForm1,rules:e.rules1,"label-width":"120px",class:"demo-ruleForm"},{default:t(()=>[d("p",j,m(e.$t("我们向您的手机"))+" "+m(e.ruleForm1.new_phone)+" "+m(e.$t("发送了一条验证短信，请输入短信中的验证码！")),1),l(a,{label:e.$t("验证码"),prop:"yzm"},{default:t(()=>[l(E,{modelValue:e.ruleForm1.yzm,"onUpdate:modelValue":n[2]||(n[2]=p=>e.ruleForm1.yzm=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(a,null,{default:t(()=>[l(u,{type:"primary",onClick:n[3]||(n[3]=p=>e.submitForm(e.ruleFormRef))},{default:t(()=>[v(m(e.$t("下一步")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1})):y("",!0),e.ruleForm1.step==3?(B(),b($,{key:2},{default:t(()=>[d("div",G,[l(i,{active:3},{default:t(()=>[l(s,{title:e.$t("输入新手机")},null,8,["title"]),l(s,{title:e.$t("验证新手机")},null,8,["title"]),l(s,{title:e.$t("完成")},null,8,["title"])]),_:1}),l(o,{ref:"ruleFormRef",model:e.ruleForm1,rules:e.rules1,"label-width":"120px",class:"demo-ruleForm"},{default:t(()=>[d("p",H,m(e.$t("绑定成功！")),1)]),_:1},8,["model","rules"])])]),_:1})):y("",!0)],64)}const se=U(q,[["render",J],["__scopeId","data-v-550059ea"]]);export{se as default};
