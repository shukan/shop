import{P as V,f as k,i as F,t as w,T as C,$ as f,a6 as I,p as c,v as g,x as o,A as t,y as i,z as s,E as A,D as h,I as b,K as T}from"./index-21964c78.js";import{E as R}from"./overlay-b290a267.js";import{_ as z}from"./Manage-f169baad.js";import{a as M,E as N}from"./table-column-af2cc573.js";import"./checkbox-85319853.js";/* empty css                */import"./popper-251c4401.js";import"./scrollbar-c1d26490.js";import{E as S}from"./tag-b8b29d1f.js";/* empty css               */import{E as L}from"./row-d248ec80.js";import{a as O,E as U}from"./step-fc04c36a.js";import{g as j,h as K}from"./order-09ce62cc.js";import{i as P,g as q}from"./invoice-b9863122.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";const H=V({props:{order_id:{type:String,default:0}},setup(e,a){const $={...a};let r=k({invoiceRows:[],dialogVisible:!1,invoiceTips:"",order_row:{},disabled:!0,user_invoice_id:0}),l={page:1,size:500,total:0,order_id:""};const E=()=>{P(l).then(n=>{n.status==200&&(r.invoiceRows=n.data.items,l.total=n.data.records)})},d=()=>{q().then(n=>{n.status==200&&(r.invoiceTips=n.msg)})},y=()=>{j({order_id:l.order_id}).then(n=>{n.status==200?r.order_row=n.data:C.error(f("获取订单数据失败"))})},_=n=>{r.user_invoice_id=n.user_invoice_id},m=()=>{K({order_id:l.order_id,user_invoice_id:r.user_invoice_id}).then(n=>{n.status==200?I.alert(f("申请成功!"),f("成功"),{confirmButtonText:f("确定"),center:!0,callback:B=>{$.emit("update",{})}}):C.error(n.msg)})},v=()=>{r.dialogVisible=!0},p=()=>{r.dialogVisible=!1,E()};return F(()=>{l.order_id=e.order_id,E(),y(),d()}),{...w(r),...w(l),handleCurrentChange:_,handleEdit:v,updateInvoice:p,addOrderInvoice:m,getInvoiceTips:d}}});const J={style:{padding:"0 34px"}},Q={class:"invoice-top"},W={class:"invoice-top-title"},X={class:"invoice-top-content"},Y={style:{width:"700px",height:"150px",margin:"0 auto","margin-top":"50px"}},Z={style:{height:"300px",width:"851px",margin:"0 auto"}},x={class:"order-info-title"},ee={class:"order-info-title-text"},oe={class:"order-info-content"},te={class:"order-info-content-left"},ie={class:"order-info-content-right"},ne={key:0,class:"order-info-content"},se={class:"order-info-content-left"},re={class:"order-info-content-right"},ae={class:"order-info-content"},le={class:"order-info-content-left"},de={class:"order-info-content-right"},ue={class:"order-info-content"},ce={class:"order-info-content-left"},_e={class:"order-info-content-right"},pe={class:"table"},me={key:0},ve={key:1},fe={style:{display:"flex","justify-content":"center","margin-top":"20px"}};function ge(e,a,$,r,l,E){const d=O,y=U,_=L,m=T,v=S,p=M,n=N,B=z,D=R;return c(),g("div",J,[o("div",Q,[o("div",W,t(e.$t("温馨提示")),1),o("div",X,[o("span",null,t(e.invoiceTips),1)])]),o("div",Y,[i(y,{active:2,"align-center":"","finish-status":"success"},{default:s(()=>[i(d,{title:e.$t("订单下单")},null,8,["title"]),i(d,{title:e.$t("订单完成")},null,8,["title"]),i(d,{title:e.$t("申请开票")},null,8,["title"]),i(d,{title:e.$t("商家开票")},null,8,["title"])]),_:1})]),o("div",Z,[o("div",x,[o("span",ee,t(e.$t("订单信息")),1)]),o("div",oe,[i(_,null,{default:s(()=>[o("div",te,t(e.$t("订单号")),1),o("div",ie,t(e.order_row.order_id),1)]),_:1})]),e.order_row.consume_record?(c(),g("div",ne,[i(_,null,{default:s(()=>[o("div",se,t(e.$t("支付流水号")),1),o("div",re,t(e.order_row.consume_record[0].consume_record_id),1)]),_:1})])):A("",!0),o("div",ae,[i(_,null,{default:s(()=>[o("div",le,t(e.$t("商品名称")),1),o("div",de,t(e.order_row.order_title),1)]),_:1})]),o("div",ue,[i(_,null,{default:s(()=>[o("div",ce,t(e.$t("开票金额")),1),o("div",_e,t(e.order_row.currency_symbol_left)+" "+t(e.order_row.order_payment_amount),1)]),_:1})])]),i(m,{class:"addr-tag",style:{"margin-bottom":"18px"},size:"small",onClick:a[0]||(a[0]=u=>e.handleEdit(0))},{default:s(()=>[h(t(e.$t("+新增抬头")),1)]),_:1}),o("div",pe,[i(n,{data:e.invoiceRows,height:"350","highlight-current-row":"",onCurrentChange:e.handleCurrentChange},{default:s(()=>[i(p,{property:"invoice_type",label:e.$t("发票类型"),width:"150"},{default:s(u=>[u.row.invoice_type==1?(c(),b(v,{key:0,type:"success","disable-transitions":""},{default:s(()=>[h(t(e.$t("普通发票")),1)]),_:1})):(c(),b(v,{key:1,type:"warning","disable-transitions":""},{default:s(()=>[h(t(e.$t("增值税专用发票")),1)]),_:1}))]),_:1},8,["label"]),i(p,{property:"invoice_title",label:e.$t("发票抬头"),width:"250"},null,8,["label"]),i(p,{property:"invoice_is_company",label:e.$t("个人/企业"),width:"100"},{default:s(u=>[u.row.invoice_is_company?(c(),g("span",me,t(e.$t("企业")),1)):(c(),g("span",ve,t(e.$t("个人")),1))]),_:1},8,["label"]),i(p,{property:"invoice_company_code",label:e.$t("纳税人识别号"),width:"350"},null,8,["label"])]),_:1},8,["data","onCurrentChange"])]),o("div",fe,[i(m,{size:"large",type:"primary",disabled:e.user_invoice_id==0,onClick:e.addOrderInvoice},{default:s(()=>[h(t(e.$t("确定")),1)]),_:1},8,["disabled","onClick"])]),i(D,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=u=>e.dialogVisible=u),width:"700px",draggable:""},{default:s(()=>[e.dialogVisible?(c(),b(B,{key:0,onUpdate:e.updateInvoice,invoiceId:e.user_invoice_id,onCancel:a[1]||(a[1]=u=>e.dialogVisible=!1)},null,8,["onUpdate","invoiceId"])):A("",!0)]),_:1},8,["modelValue"])])}const Re=G(H,[["render",ge],["__scopeId","data-v-49cb3b64"]]);export{Re as _};
