import{az as ce,aG as Me,bL as Le,r as y,a7 as O,aR as e,aP as j,b3 as $e,i as fe,bX as Ae,bd as He,bM as Pe,aF as Be,bY as Oe,ck as ze,aZ as ve,P as x,aL as me,p as A,v as R,x as q,I as ne,z as Q,O as J,G as H,aT as G,y as K,J as le,bp as Ve,Y as Z,al as re,E as X,b as Re,b6 as de,H as he,F as De,C as Fe,A as Ue,aU as pe,bC as We,f as Ye,a3 as je,cx as Ge,a_ as Ke,c1 as Xe}from"./index-21964c78.js";import{u as Je}from"./index-a7a3c269.js";import{t as ie}from"./image-viewer-dd6920ac.js";const Ze=ce({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),qe={change:(a,P)=>[a,P].every(Me)},ge=Symbol("carouselContextKey"),ue=300,Qe=(a,P,i)=>{const{children:o,addChild:k,removeChild:C}=Je(ve(),"ElCarouselItem"),M=Le(),s=y(-1),d=y(null),w=y(!1),h=y(),_=y(0),b=y(!0),E=O(()=>a.arrow!=="never"&&!e(p)),S=O(()=>o.value.some(t=>t.props.label.toString().length>0)),L=O(()=>a.type==="card"),p=O(()=>a.direction==="vertical"),$=O(()=>a.height!=="auto"?{height:a.height}:{height:`${_.value}px`,overflow:"hidden"}),D=ie(t=>{f(t)},ue,{trailing:!0}),F=ie(t=>{ee(t)},ue),n=t=>b.value?s.value<=1?t<=1:t>1:!0;function l(){d.value&&(clearInterval(d.value),d.value=null)}function c(){a.interval<=0||!a.autoplay||d.value||(d.value=setInterval(()=>m(),a.interval))}const m=()=>{s.value<o.value.length-1?s.value=s.value+1:a.loop&&(s.value=0)};function f(t){if(Be(t)){const V=o.value.filter(B=>B.props.name===t);V.length>0&&(t=o.value.indexOf(V[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const u=o.value.length,T=s.value;t<0?s.value=a.loop?u-1:0:t>=u?s.value=a.loop?0:u-1:s.value=t,T===s.value&&r(T),ae()}function r(t){o.value.forEach((u,T)=>{u.translateItem(T,s.value,t)})}function N(t,u){var T,V,B,W;const Y=e(o),se=Y.length;if(se===0||!t.states.inStage)return!1;const Se=u+1,ke=u-1,oe=se-1,_e=Y[oe].states.active,Ee=Y[0].states.active,Ne=(V=(T=Y[Se])==null?void 0:T.states)==null?void 0:V.active,Te=(W=(B=Y[ke])==null?void 0:B.states)==null?void 0:W.active;return u===oe&&Ee||Ne?"left":u===0&&_e||Te?"right":!1}function U(){w.value=!0,a.pauseOnHover&&l()}function g(){w.value=!1,c()}function v(t){e(p)||o.value.forEach((u,T)=>{t===N(u,T)&&(u.states.hover=!0)})}function I(){e(p)||o.value.forEach(t=>{t.states.hover=!1})}function z(t){s.value=t}function ee(t){a.trigger==="hover"&&t!==s.value&&(s.value=t)}function ye(){f(s.value-1)}function Ce(){f(s.value+1)}function ae(){l(),a.pauseOnHover||c()}function be(t){a.height==="auto"&&(_.value=t)}function we(){var t;const u=(t=M.default)==null?void 0:t.call(M);if(!u)return null;const T=Oe(u),V="ElCarouselItem",B=T.filter(W=>ze(W)&&W.type.name===V);return(B==null?void 0:B.length)===2&&a.loop&&!L.value?(b.value=!0,B):(b.value=!1,null)}j(()=>s.value,(t,u)=>{r(u),b.value&&(t=t%2,u=u%2),u>-1&&P("change",t,u)}),j(()=>a.autoplay,t=>{t?c():l()}),j(()=>a.loop,()=>{f(s.value)}),j(()=>a.interval,()=>{ae()});const te=$e();return fe(()=>{j(()=>o.value,()=>{o.value.length>0&&f(a.initialIndex)},{immediate:!0}),te.value=Ae(h.value,()=>{r()}),c()}),He(()=>{l(),h.value&&te.value&&te.value.stop()}),Pe(ge,{root:h,isCardType:L,isVertical:p,items:o,loop:a.loop,addItem:k,removeItem:C,setActiveItem:f,setContainerHeight:be}),{root:h,activeIndex:s,arrowDisplay:E,hasLabel:S,hover:w,isCardType:L,items:o,isVertical:p,containerStyle:$,isItemsTwoLength:b,handleButtonEnter:v,handleButtonLeave:I,handleIndicatorClick:z,handleMouseEnter:U,handleMouseLeave:g,setActiveItem:f,prev:ye,next:Ce,PlaceholderItem:we,isTwoLengthShow:n,throttledArrowClick:D,throttledIndicatorHover:F}},xe=["onMouseenter","onClick"],et={key:0},tt="ElCarousel",at=x({name:tt}),st=x({...at,props:Ze,emits:qe,setup(a,{expose:P,emit:i}){const o=a,{root:k,activeIndex:C,arrowDisplay:M,hasLabel:s,hover:d,isCardType:w,items:h,isVertical:_,containerStyle:b,handleButtonEnter:E,handleButtonLeave:S,handleIndicatorClick:L,handleMouseEnter:p,handleMouseLeave:$,setActiveItem:D,prev:F,next:n,PlaceholderItem:l,isTwoLengthShow:c,throttledArrowClick:m,throttledIndicatorHover:f}=Qe(o,i),r=me("carousel"),N=O(()=>{const g=[r.b(),r.m(o.direction)];return e(w)&&g.push(r.m("card")),g}),U=O(()=>{const g=[r.e("indicators"),r.em("indicators",o.direction)];return e(s)&&g.push(r.em("indicators","labels")),o.indicatorPosition==="outside"&&g.push(r.em("indicators","outside")),e(_)&&g.push(r.em("indicators","right")),g});return P({setActiveItem:D,prev:F,next:n}),(g,v)=>(A(),R("div",{ref_key:"root",ref:k,class:H(e(N)),onMouseenter:v[6]||(v[6]=G((...I)=>e(p)&&e(p)(...I),["stop"])),onMouseleave:v[7]||(v[7]=G((...I)=>e($)&&e($)(...I),["stop"]))},[q("div",{class:H(e(r).e("container")),style:he(e(b))},[e(M)?(A(),ne(re,{key:0,name:"carousel-arrow-left",persisted:""},{default:Q(()=>[J(q("button",{type:"button",class:H([e(r).e("arrow"),e(r).em("arrow","left")]),onMouseenter:v[0]||(v[0]=I=>e(E)("left")),onMouseleave:v[1]||(v[1]=(...I)=>e(S)&&e(S)(...I)),onClick:v[2]||(v[2]=G(I=>e(m)(e(C)-1),["stop"]))},[K(e(le),null,{default:Q(()=>[K(e(Ve))]),_:1})],34),[[Z,(g.arrow==="always"||e(d))&&(o.loop||e(C)>0)]])]),_:1})):X("v-if",!0),e(M)?(A(),ne(re,{key:1,name:"carousel-arrow-right",persisted:""},{default:Q(()=>[J(q("button",{type:"button",class:H([e(r).e("arrow"),e(r).em("arrow","right")]),onMouseenter:v[3]||(v[3]=I=>e(E)("right")),onMouseleave:v[4]||(v[4]=(...I)=>e(S)&&e(S)(...I)),onClick:v[5]||(v[5]=G(I=>e(m)(e(C)+1),["stop"]))},[K(e(le),null,{default:Q(()=>[K(e(Re))]),_:1})],34),[[Z,(g.arrow==="always"||e(d))&&(o.loop||e(C)<e(h).length-1)]])]),_:1})):X("v-if",!0),K(e(l)),de(g.$slots,"default")],6),g.indicatorPosition!=="none"?(A(),R("ul",{key:0,class:H(e(U))},[(A(!0),R(De,null,Fe(e(h),(I,z)=>J((A(),R("li",{key:z,class:H([e(r).e("indicator"),e(r).em("indicator",g.direction),e(r).is("active",z===e(C))]),onMouseenter:ee=>e(f)(z),onClick:G(ee=>e(L)(z),["stop"])},[q("button",{class:H(e(r).e("button"))},[e(s)?(A(),R("span",et,Ue(I.props.label),1)):X("v-if",!0)],2)],42,xe)),[[Z,e(c)(z)]])),128))],2)):X("v-if",!0)],34))}});var ot=pe(st,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const nt=ce({name:{type:String,default:""},label:{type:[String,Number],default:""}}),lt=(a,P)=>{const i=We(ge),o=ve(),k=.83,C=y(),M=y(!1),s=y(0),d=y(1),w=y(!1),h=y(!1),_=y(!1),b=y(!1),{isCardType:E,isVertical:S}=i;function L(n,l,c){const m=c-1,f=l-1,r=l+1,N=c/2;return l===0&&n===m?-1:l===m&&n===0?c:n<f&&l-n>=N?c+1:n>r&&n-l>=N?-2:n}function p(n,l){var c,m;const f=e(S)?((c=i.root.value)==null?void 0:c.offsetHeight)||0:((m=i.root.value)==null?void 0:m.offsetWidth)||0;return _.value?f*((2-k)*(n-l)+1)/4:n<l?-(1+k)*f/4:(3+k)*f/4}function $(n,l,c){const m=i.root.value;return m?((c?m.offsetHeight:m.offsetWidth)||0)*(n-l):0}const D=(n,l,c)=>{var m;const f=e(E),r=(m=i.items.value.length)!=null?m:Number.NaN,N=n===l;!f&&!Ge(c)&&(b.value=N||n===c),!N&&r>2&&i.loop&&(n=L(n,l,r));const U=e(S);w.value=N,f?(_.value=Math.round(Math.abs(n-l))<=1,s.value=p(n,l),d.value=e(w)?1:k):s.value=$(n,l,U),h.value=!0,N&&C.value&&i.setContainerHeight(C.value.offsetHeight)};function F(){if(i&&e(E)){const n=i.items.value.findIndex(({uid:l})=>l===o.uid);i.setActiveItem(n)}}return fe(()=>{i.addItem({props:a,states:Ye({hover:M,translate:s,scale:d,active:w,ready:h,inStage:_,animating:b}),uid:o.uid,translateItem:D})}),je(()=>{i.removeItem(o.uid)}),{carouselItemRef:C,active:w,animating:b,hover:M,inStage:_,isVertical:S,translate:s,isCardType:E,scale:d,ready:h,handleItemClick:F}},rt=x({name:"ElCarouselItem"}),it=x({...rt,props:nt,setup(a){const P=a,i=me("carousel"),{carouselItemRef:o,active:k,animating:C,hover:M,inStage:s,isVertical:d,translate:w,isCardType:h,scale:_,ready:b,handleItemClick:E}=lt(P),S=O(()=>{const p=`${`translate${e(d)?"Y":"X"}`}(${e(w)}px)`,$=`scale(${e(_)})`;return{transform:[p,$].join(" ")}});return(L,p)=>J((A(),R("div",{ref_key:"carouselItemRef",ref:o,class:H([e(i).e("item"),e(i).is("active",e(k)),e(i).is("in-stage",e(s)),e(i).is("hover",e(M)),e(i).is("animating",e(C)),{[e(i).em("item","card")]:e(h),[e(i).em("item","card-vertical")]:e(h)&&e(d)}]),style:he(e(S)),onClick:p[0]||(p[0]=(...$)=>e(E)&&e(E)(...$))},[e(h)?J((A(),R("div",{key:0,class:H(e(i).e("mask"))},null,2)),[[Z,!e(k)]]):X("v-if",!0),de(L.$slots,"default")],6)),[[Z,e(b)]])}});var Ie=pe(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const vt=Ke(ot,{CarouselItem:Ie}),mt=Xe(Ie);export{mt as E,vt as a};
