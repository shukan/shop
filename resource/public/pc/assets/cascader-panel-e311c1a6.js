import{P as pe,aL as ue,bW as Ea,aU as $e,J as fe,cD as Ye,aS as Qe,b as wa,bC as ea,a7 as g,n as W,p as f,v as x,E as j,I as H,aT as ve,z as _,y as J,G as T,F as ce,x as re,bl as aa,r as S,C as me,D as $a,A as se,aZ as Sa,cE as _e,c3 as Oe,cx as Ta,az as ta,aC as ge,c8 as Pa,cF as La,aD as Ee,aH as we,bM as Va,f as qe,aP as ee,cG as Da,i as na,aW as ne,bf as sa,cH as Ma,bv as O,cI as ye,cJ as la,cA as Ia,aE as _a,bx as xa,aJ as Fa,aK as za,aQ as Ha,aX as Ba,bX as Aa,O as ke,aR as d,H as Ka,L as Oa,cK as qa,a as Ra,B as Ua,U as Wa,cs as Za,Y as Re,b6 as ja,cL as Ja,cM as Xa}from"./index-21964c78.js";import{E as oa}from"./scrollbar-c1d26490.js";import{E as Ga}from"./checkbox-85319853.js";import{E as Ya}from"./radio-30ecb740.js";import{g as Qa}from"./rand-14326ce1.js";import{c as Ue}from"./strings-b80b2625.js";import{i as be}from"./isEqual-3f4e7b62.js";import{u as We,c as Ze}from"./arrays-e667dc24.js";import{b as et}from"./flatten-3a6a3668.js";import{c as ia}from"./cloneDeep-9c8ed640.js";import{u as at,E as je}from"./popper-251c4401.js";import{t as tt,E as Je}from"./tag-b8b29d1f.js";import{C as nt}from"./index-a2bc563c.js";import{d as st}from"./debounce-6ea0a711.js";var lt=1/0;function ot(e){var t=e==null?0:e.length;return t?et(e,lt):[]}var it=pe({name:"NodeContent",setup(){return{ns:ue("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:s}=this.$parent,{data:n,label:o}=t,{renderLabelFn:p}=s;return Ea("span",{class:e.e("label")},p?p({node:t,data:n}):o)}});const Fe=Symbol(),rt=pe({name:"ElCascaderNode",components:{ElCheckbox:Ga,ElRadio:Ya,NodeContent:it,ElIcon:fe,Check:Ye,Loading:Qe,ArrowRight:wa},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const s=ea(Fe),n=ue("cascader-node"),o=g(()=>s.isHoverMenu),p=g(()=>s.config.multiple),c=g(()=>s.config.checkStrictly),v=g(()=>{var k;return(k=s.checkedNodes[0])==null?void 0:k.uid}),u=g(()=>e.node.isDisabled),b=g(()=>e.node.isLeaf),N=g(()=>c.value&&!b.value||!u.value),L=g(()=>F(s.expandingNode)),I=g(()=>c.value&&s.checkedNodes.some(F)),F=k=>{var P;const{level:z,uid:ae}=e.node;return((P=k==null?void 0:k.pathNodes[z-1])==null?void 0:P.uid)===ae},B=()=>{L.value||s.expandNode(e.node)},X=k=>{const{node:P}=e;k!==P.checked&&s.handleCheckChange(P,k)},$=()=>{s.lazyLoad(e.node,()=>{b.value||B()})},q=k=>{o.value&&(V(),!b.value&&t("expand",k))},V=()=>{const{node:k}=e;!N.value||k.loading||(k.loaded?B():$())},Z=()=>{o.value&&!b.value||(b.value&&!u.value&&!c.value&&!p.value?R(!0):V())},A=k=>{c.value?(X(k),e.node.loaded&&B()):R(k)},R=k=>{e.node.loaded?(X(k),!c.value&&B()):$()};return{panel:s,isHoverMenu:o,multiple:p,checkStrictly:c,checkedNodeId:v,isDisabled:u,isLeaf:b,expandable:N,inExpandingPath:L,inCheckedPath:I,ns:n,handleHoverExpand:q,handleExpand:V,handleClick:Z,handleCheck:R,handleSelectCheck:A}}}),ct=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ut=re("span",null,null,-1);function dt(e,t,s,n,o,p){const c=W("el-checkbox"),v=W("el-radio"),u=W("check"),b=W("el-icon"),N=W("node-content"),L=W("loading"),I=W("arrow-right");return f(),x("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...F)=>e.handleHoverExpand&&e.handleHoverExpand(...F)),onFocus:t[3]||(t[3]=(...F)=>e.handleHoverExpand&&e.handleHoverExpand(...F)),onClick:t[4]||(t[4]=(...F)=>e.handleClick&&e.handleClick(...F))},[j(" prefix "),e.multiple?(f(),H(c,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ve(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(f(),H(v,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ve(()=>{},["stop"]))},{default:_(()=>[j(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ut]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(f(),H(b,{key:2,class:T(e.ns.e("prefix"))},{default:_(()=>[J(u)]),_:1},8,["class"])):j("v-if",!0),j(" content "),J(N),j(" postfix "),e.isLeaf?j("v-if",!0):(f(),x(ce,{key:3},[e.node.loading?(f(),H(b,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:_(()=>[J(L)]),_:1},8,["class"])):(f(),H(b,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:_(()=>[J(I)]),_:1},8,["class"]))],64))],42,ct)}var pt=$e(rt,[["render",dt],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const ht=pe({name:"ElCascaderMenu",components:{Loading:Qe,ElIcon:fe,ElScrollbar:oa,ElCascaderNode:pt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Sa(),s=ue("cascader-menu"),{t:n}=aa(),o=Qa();let p=null,c=null;const v=ea(Fe),u=S(null),b=g(()=>!e.nodes.length),N=g(()=>!v.initialLoaded),L=g(()=>`cascader-menu-${o}-${e.index}`),I=$=>{p=$.target},F=$=>{if(!(!v.isHoverMenu||!p||!u.value))if(p.contains($.target)){B();const q=t.vnode.el,{left:V}=q.getBoundingClientRect(),{offsetWidth:Z,offsetHeight:A}=q,R=$.clientX-V,k=p.offsetTop,P=k+p.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${k} L${Z} 0 V${k} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${P} L${Z} ${A} V${P} Z" />
        `}else c||(c=window.setTimeout(X,v.config.hoverThreshold))},B=()=>{c&&(clearTimeout(c),c=null)},X=()=>{u.value&&(u.value.innerHTML="",B())};return{ns:s,panel:v,hoverZone:u,isEmpty:b,isLoading:N,menuId:L,t:n,handleExpand:I,handleMouseMove:F,clearHoverZone:X}}});function ft(e,t,s,n,o,p){const c=W("el-cascader-node"),v=W("loading"),u=W("el-icon"),b=W("el-scrollbar");return f(),H(b,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:_(()=>{var N;return[(f(!0),x(ce,null,me(e.nodes,L=>(f(),H(c,{key:L.uid,node:L,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(f(),x("div",{key:0,class:T(e.ns.e("empty-text"))},[J(u,{size:"14",class:T(e.ns.is("loading"))},{default:_(()=>[J(v)]),_:1},8,["class"]),$a(" "+se(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(f(),x("div",{key:1,class:T(e.ns.e("empty-text"))},se(e.t("el.cascader.noData")),3)):(N=e.panel)!=null&&N.isHoverMenu?(f(),x("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):j("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var vt=$e(ht,[["render",ft],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let mt=0;const gt=e=>{const t=[e];let{parent:s}=e;for(;s;)t.unshift(s),s=s.parent;return t};class de{constructor(t,s,n,o=!1){this.data=t,this.config=s,this.parent=n,this.root=o,this.uid=mt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:c,children:v}=s,u=t[v],b=gt(this);this.level=o?0:n?n.level+1:1,this.value=t[p],this.label=t[c],this.pathNodes=b,this.pathValues=b.map(N=>N.value),this.pathLabels=b.map(N=>N.label),this.childrenData=u,this.children=(u||[]).map(N=>new de(N,s,this)),this.loaded=!s.lazy||this.isLeaf||!_e(u)}get isDisabled(){const{data:t,parent:s,config:n}=this,{disabled:o,checkStrictly:p}=n;return(Oe(o)?o(t,this):!!t[o])||!p&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:t,config:s,childrenData:n,loaded:o}=this,{lazy:p,leaf:c}=s,v=Oe(c)?c(t,this):t[c];return Ta(v)?p&&!o?!1:!(Array.isArray(n)&&n.length):!!v}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:s,children:n}=this,o=new de(t,this.config,this);return Array.isArray(s)?s.push(t):this.childrenData=[t],n.push(o),o}calcText(t,s){const n=t?this.pathLabels.join(s):this.label;return this.text=n,n}broadcast(t,...s){const n=`onParent${Ue(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...s),o[n]&&o[n](...s))})}emit(t,...s){const{parent:n}=this,o=`onChild${Ue(t)}`;n&&(n[o]&&n[o](...s),n.emit(t,...s))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,s=t.filter(o=>!o.isDisabled),n=s.length?s.every(o=>o.checked):!1;this.setCheckState(n)}setCheckState(t){const s=this.children.length,n=this.children.reduce((o,p)=>{const c=p.checked?1:p.indeterminate?.5:0;return o+c},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&n!==s&&n>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:s,multiple:n}=this.config;s||!n?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const xe=(e,t)=>e.reduce((s,n)=>(n.isLeaf?s.push(n):(!t&&s.push(n),s=s.concat(xe(n.children,t))),s),[]);class Xe{constructor(t,s){this.config=s;const n=(t||[]).map(o=>new de(o,this.config));this.nodes=n,this.allNodes=xe(n,!1),this.leafNodes=xe(n,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,s){const n=s?s.appendChild(t):new de(t,this.config);s||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(t,s){t.forEach(n=>this.appendNode(n,s))}getNodeByValue(t,s=!1){return!t&&t!==0?null:this.getFlattedNodes(s).find(o=>be(o.value,t)||be(o.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:o})=>be(t.value,n)&&t.level===o)||null}}const ra=ta({modelValue:{type:ge([Number,String,Array])},options:{type:ge(Array),default:()=>[]},props:{type:ge(Object),default:()=>({})}}),bt={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Pa,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},kt=e=>g(()=>({...bt,...e.props})),Ge=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},yt=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():La(e)&&e.click()},Ct=(e,t)=>{const s=t.slice(0),n=s.map(p=>p.uid),o=e.reduce((p,c)=>{const v=n.indexOf(c.uid);return v>-1&&(p.push(c),s.splice(v,1),n.splice(v,1)),p},[]);return o.push(...s),o},Nt=pe({name:"ElCascaderPanel",components:{ElCascaderMenu:vt},props:{...ra,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,we,"close","expand-change"],setup(e,{emit:t,slots:s}){let n=!1;const o=ue("cascader"),p=kt(e);let c=null;const v=S(!0),u=S([]),b=S(null),N=S([]),L=S(null),I=S([]),F=g(()=>p.value.expandTrigger==="hover"),B=g(()=>e.renderLabel||s.default),X=()=>{const{options:r}=e,h=p.value;n=!1,c=new Xe(r,h),N.value=[c.getNodes()],h.lazy&&_e(e.options)?(v.value=!1,$(void 0,m=>{m&&(c=new Xe(m,h),N.value=[c.getNodes()]),v.value=!0,z(!1,!0)})):z(!1,!0)},$=(r,h)=>{const m=p.value;r=r||new de({},m,void 0,!0),r.loading=!0;const E=y=>{const w=r,D=w.root?null:w;y&&(c==null||c.appendNodes(y,D)),w.loading=!1,w.loaded=!0,w.childrenData=w.childrenData||[],h&&h(y)};m.lazyLoad(r,E)},q=(r,h)=>{var m;const{level:E}=r,y=N.value.slice(0,E);let w;r.isLeaf?w=r.pathNodes[E-2]:(w=r,y.push(r.children)),((m=L.value)==null?void 0:m.uid)!==(w==null?void 0:w.uid)&&(L.value=r,N.value=y,!h&&t("expand-change",(r==null?void 0:r.pathValues)||[]))},V=(r,h,m=!0)=>{const{checkStrictly:E,multiple:y}=p.value,w=I.value[0];n=!0,!y&&(w==null||w.doCheck(!1)),r.doCheck(h),P(),m&&!y&&!E&&t("close"),!m&&!y&&!E&&Z(r)},Z=r=>{r&&(r=r.parent,Z(r),r&&q(r))},A=r=>c==null?void 0:c.getFlattedNodes(r),R=r=>{var h;return(h=A(r))==null?void 0:h.filter(m=>m.checked!==!1)},k=()=>{I.value.forEach(r=>r.doCheck(!1)),P(),N.value=N.value.slice(0,1),L.value=null,t("expand-change",[])},P=()=>{var r;const{checkStrictly:h,multiple:m}=p.value,E=I.value,y=R(!h),w=Ct(E,y),D=w.map(M=>M.valueByOption);I.value=w,b.value=m?D:(r=D[0])!=null?r:null},z=(r=!1,h=!1)=>{const{modelValue:m}=e,{lazy:E,multiple:y,checkStrictly:w}=p.value,D=!w;if(!(!v.value||n||!h&&be(m,b.value)))if(E&&!r){const te=We(ot(Ze(m))).map(K=>c==null?void 0:c.getNodeByValue(K)).filter(K=>!!K&&!K.loaded&&!K.loading);te.length?te.forEach(K=>{$(K,()=>z(!1,h))}):z(!0,h)}else{const M=y?Ze(m):[m],te=We(M.map(K=>c==null?void 0:c.getNodeByValue(K,D)));ae(te,h),b.value=ia(m)}},ae=(r,h=!0)=>{const{checkStrictly:m}=p.value,E=I.value,y=r.filter(M=>!!M&&(m||M.isLeaf)),w=c==null?void 0:c.getSameNode(L.value),D=h&&w||y[0];D?D.pathNodes.forEach(M=>q(M,!0)):L.value=null,E.forEach(M=>M.doCheck(!1)),e.props.multiple?qe(y).forEach(M=>M.doCheck(!0)):y.forEach(M=>M.doCheck(!0)),I.value=y,ne(le)},le=()=>{sa&&u.value.forEach(r=>{const h=r==null?void 0:r.$el;if(h){const m=h.querySelector(`.${o.namespace.value}-scrollbar__wrap`),E=h.querySelector(`.${o.b("node")}.${o.is("active")}`)||h.querySelector(`.${o.b("node")}.in-active-path`);Ma(m,E)}})},oe=r=>{const h=r.target,{code:m}=r;switch(m){case O.up:case O.down:{r.preventDefault();const E=m===O.up?-1:1;ye(la(h,E,`.${o.b("node")}[tabindex="-1"]`));break}case O.left:{r.preventDefault();const E=u.value[Ge(h)-1],y=E==null?void 0:E.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);ye(y);break}case O.right:{r.preventDefault();const E=u.value[Ge(h)+1],y=E==null?void 0:E.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);ye(y);break}case O.enter:yt(h);break}};return Va(Fe,qe({config:p,expandingNode:L,checkedNodes:I,isHoverMenu:F,initialLoaded:v,renderLabelFn:B,lazyLoad:$,expandNode:q,handleCheckChange:V})),ee([p,()=>e.options],X,{deep:!0,immediate:!0}),ee(()=>e.modelValue,()=>{n=!1,z()},{deep:!0}),ee(()=>b.value,r=>{be(r,e.modelValue)||(t(Ee,r),t(we,r))}),Da(()=>u.value=[]),na(()=>!_e(e.modelValue)&&z()),{ns:o,menuList:u,menus:N,checkedNodes:I,handleKeyDown:oe,handleCheckChange:V,getFlattedNodes:A,getCheckedNodes:R,clearCheckedNodes:k,calculateCheckedValue:P,scrollToExpandingNode:le}}});function Et(e,t,s,n,o,p){const c=W("el-cascader-menu");return f(),x("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...v)=>e.handleKeyDown&&e.handleKeyDown(...v))},[(f(!0),x(ce,null,me(e.menus,(v,u)=>(f(),H(c,{key:u,ref_for:!0,ref:b=>e.menuList[u]=b,index:u,nodes:[...v]},null,8,["index","nodes"]))),128))],34)}var Ce=$e(Nt,[["render",Et],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);Ce.install=e=>{e.component(Ce.name,Ce)};const wt=Ce,$t=ta({...ra,size:Ia,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ge(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ge(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:at.teleported,tagType:{...tt.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),St={[Ee]:e=>!!e||e===null,[we]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>_a(e),expandChange:e=>!!e,removeTag:e=>!!e},Tt={key:0},Pt=["placeholder","onKeydown"],Lt=["onClick"],Vt="ElCascader",Dt=pe({name:Vt}),Mt=pe({...Dt,props:$t,emits:St,setup(e,{expose:t,emit:s}){const n=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:l,placement:i}=a;["right","left","bottom","top"].includes(i)||(l.arrow.x=35)},requires:["arrow"]}]},p=xa();let c=0,v=0;const u=ue("cascader"),b=ue("input"),{t:N}=aa(),{form:L,formItem:I}=Fa(),F=S(null),B=S(null),X=S(null),$=S(null),q=S(null),V=S(!1),Z=S(!1),A=S(!1),R=S(!1),k=S(""),P=S(""),z=S([]),ae=S([]),le=S([]),oe=S(!1),r=g(()=>p.style),h=g(()=>n.disabled||(L==null?void 0:L.disabled)),m=g(()=>n.placeholder||N("el.cascader.placeholder")),E=g(()=>P.value||z.value.length>0||oe.value?"":m.value),y=za(),w=g(()=>["small"].includes(y.value)?"small":"default"),D=g(()=>!!n.props.multiple),M=g(()=>!n.filterable||D.value),te=g(()=>D.value?P.value:k.value),K=g(()=>{var a;return((a=$.value)==null?void 0:a.checkedNodes)||[]}),ca=g(()=>!n.clearable||h.value||A.value||!Z.value?!1:!!K.value.length),Se=g(()=>{const{showAllLevels:a,separator:l}=n,i=K.value;return i.length?D.value?"":i[0].calcText(a,l):""}),Te=g({get(){return ia(n.modelValue)},set(a){s(Ee,a),s(we,a),n.validateEvent&&(I==null||I.validate("change").catch(l=>Ha()))}}),ua=g(()=>[u.b(),u.m(y.value),u.is("disabled",h.value),p.class]),da=g(()=>[b.e("icon"),"icon-arrow-down",u.is("reverse",V.value)]),pa=g(()=>u.is("focus",V.value||R.value)),ze=g(()=>{var a,l;return(l=(a=F.value)==null?void 0:a.popperRef)==null?void 0:l.contentRef}),U=a=>{var l,i,C;h.value||(a=a??!V.value,a!==V.value&&(V.value=a,(i=(l=B.value)==null?void 0:l.input)==null||i.setAttribute("aria-expanded",`${a}`),a?(he(),ne((C=$.value)==null?void 0:C.scrollToExpandingNode)):n.filterable&&Me(),s("visibleChange",a)))},he=()=>{ne(()=>{var a;(a=F.value)==null||a.updatePopper()})},Pe=()=>{A.value=!1},Le=a=>{const{showAllLevels:l,separator:i}=n;return{node:a,key:a.uid,text:a.calcText(l,i),hitState:!1,closable:!h.value&&!a.isDisabled,isCollapseTag:!1}},Ve=a=>{var l;const i=a.node;i.doCheck(!1),(l=$.value)==null||l.calculateCheckedValue(),s("removeTag",i.valueByOption)},ha=()=>{if(!D.value)return;const a=K.value,l=[],i=[];if(a.forEach(C=>i.push(Le(C))),ae.value=i,a.length){a.slice(0,n.maxCollapseTags).forEach(G=>l.push(Le(G)));const C=a.slice(n.maxCollapseTags),Y=C.length;Y&&(n.collapseTags?l.push({key:-1,text:`+ ${Y}`,closable:!1,isCollapseTag:!0}):C.forEach(G=>l.push(Le(G))))}z.value=l},He=()=>{var a,l;const{filterMethod:i,showAllLevels:C,separator:Y}=n,G=(l=(a=$.value)==null?void 0:a.getFlattedNodes(!n.props.checkStrictly))==null?void 0:l.filter(Q=>Q.isDisabled?!1:(Q.calcText(C,Y),i(Q,te.value)));D.value&&(z.value.forEach(Q=>{Q.hitState=!1}),ae.value.forEach(Q=>{Q.hitState=!1})),A.value=!0,le.value=G,he()},fa=()=>{var a;let l;A.value&&q.value?l=q.value.$el.querySelector(`.${u.e("suggestion-item")}`):l=(a=$.value)==null?void 0:a.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`),l&&(l.focus(),!A.value&&l.click())},De=()=>{var a,l;const i=(a=B.value)==null?void 0:a.input,C=X.value,Y=(l=q.value)==null?void 0:l.$el;if(!(!sa||!i)){if(Y){const G=Y.querySelector(`.${u.e("suggestion-list")}`);G.style.minWidth=`${i.offsetWidth}px`}if(C){const{offsetHeight:G}=C,Q=z.value.length>0?`${Math.max(G+6,c)}px`:`${c}px`;i.style.height=Q,he()}}},va=a=>{var l;return(l=$.value)==null?void 0:l.getCheckedNodes(a)},ma=a=>{he(),s("expandChange",a)},ie=a=>{var l;const i=(l=a.target)==null?void 0:l.value;if(a.type==="compositionend")oe.value=!1,ne(()=>Ie(i));else{const C=i[i.length-1]||"";oe.value=!Ja(C)}},ga=a=>{if(!oe.value)switch(a.code){case O.enter:U();break;case O.down:U(!0),ne(fa),a.preventDefault();break;case O.esc:V.value===!0&&(a.preventDefault(),a.stopPropagation(),U(!1));break;case O.tab:U(!1);break}},ba=()=>{var a;(a=$.value)==null||a.clearCheckedNodes(),!V.value&&n.filterable&&Me(),U(!1)},Me=()=>{const{value:a}=Se;k.value=a,P.value=a},ka=a=>{var l,i;const{checked:C}=a;D.value?(l=$.value)==null||l.handleCheckChange(a,!C,!1):(!C&&((i=$.value)==null||i.handleCheckChange(a,!0,!1)),U(!1))},ya=a=>{const l=a.target,{code:i}=a;switch(i){case O.up:case O.down:{const C=i===O.up?-1:1;ye(la(l,C,`.${u.e("suggestion-item")}[tabindex="-1"]`));break}case O.enter:l.click();break}},Ca=()=>{const a=z.value,l=a[a.length-1];v=P.value?0:v+1,!(!l||!v||n.collapseTags&&a.length>1)&&(l.hitState?Ve(l):l.hitState=!0)},Be=a=>{const l=a.target,i=u.e("search-input");l.className===i&&(R.value=!0),s("focus",a)},Ae=a=>{R.value=!1,s("blur",a)},Na=st(()=>{const{value:a}=te;if(!a)return;const l=n.beforeFilter(a);Ba(l)?l.then(He).catch(()=>{}):l!==!1?He():Pe()},n.debounce),Ie=(a,l)=>{!V.value&&U(!0),!(l!=null&&l.isComposing)&&(a?Na():Pe())},Ke=a=>Number.parseFloat(Xa(b.cssVarName("input-height"),a).value)-2;return ee(A,he),ee([K,h],ha),ee(z,()=>{ne(()=>De())}),ee(y,async()=>{await ne();const a=B.value.input;c=Ke(a)||c,De()}),ee(Se,Me,{immediate:!0}),na(()=>{const a=B.value.input,l=Ke(a);c=a.offsetHeight||l,Aa(a,De)}),t({getCheckedNodes:va,cascaderPanelRef:$,togglePopperVisible:U,contentRef:ze}),(a,l)=>(f(),H(d(je),{ref_key:"tooltipRef",ref:F,visible:V.value,teleported:a.teleported,"popper-class":[d(u).e("dropdown"),a.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${d(u).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Pe},{default:_(()=>[ke((f(),x("div",{class:T(d(ua)),style:Ka(d(r)),onClick:l[5]||(l[5]=()=>U(d(M)?void 0:!0)),onKeydown:ga,onMouseenter:l[6]||(l[6]=i=>Z.value=!0),onMouseleave:l[7]||(l[7]=i=>Z.value=!1)},[J(d(Oa),{ref_key:"input",ref:B,modelValue:k.value,"onUpdate:modelValue":l[1]||(l[1]=i=>k.value=i),placeholder:d(E),readonly:d(M),disabled:d(h),"validate-event":!1,size:d(y),class:T(d(pa)),tabindex:d(D)&&a.filterable&&!d(h)?-1:void 0,onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:Be,onBlur:Ae,onInput:Ie},{suffix:_(()=>[d(ca)?(f(),H(d(fe),{key:"clear",class:T([d(b).e("icon"),"icon-circle-close"]),onClick:ve(ba,["stop"])},{default:_(()=>[J(d(qa))]),_:1},8,["class","onClick"])):(f(),H(d(fe),{key:"arrow-down",class:T(d(da)),onClick:l[0]||(l[0]=ve(i=>U(),["stop"]))},{default:_(()=>[J(d(Ra))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),d(D)?(f(),x("div",{key:0,ref_key:"tagWrapper",ref:X,class:T(d(u).e("tags"))},[(f(!0),x(ce,null,me(z.value,i=>(f(),H(d(Je),{key:i.key,type:a.tagType,size:d(w),hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:C=>Ve(i)},{default:_(()=>[i.isCollapseTag===!1?(f(),x("span",Tt,se(i.text),1)):(f(),H(d(je),{key:1,disabled:V.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:_(()=>[re("span",null,se(i.text),1)]),content:_(()=>[re("div",{class:T(d(u).e("collapse-tags"))},[(f(!0),x(ce,null,me(ae.value.slice(a.maxCollapseTags),(C,Y)=>(f(),x("div",{key:Y,class:T(d(u).e("collapse-tag"))},[(f(),H(d(Je),{key:C.key,class:"in-tooltip",type:a.tagType,size:d(w),hit:C.hitState,closable:C.closable,"disable-transitions":"",onClose:G=>Ve(C)},{default:_(()=>[re("span",null,se(C.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),a.filterable&&!d(h)?ke((f(),x("input",{key:0,"onUpdate:modelValue":l[2]||(l[2]=i=>P.value=i),type:"text",class:T(d(u).e("search-input")),placeholder:d(Se)?"":d(m),onInput:l[3]||(l[3]=i=>Ie(P.value,i)),onClick:l[4]||(l[4]=ve(i=>U(!0),["stop"])),onKeydown:Ua(Ca,["delete"]),onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:Be,onBlur:Ae},null,42,Pt)),[[Wa,P.value]]):j("v-if",!0)],2)):j("v-if",!0)],38)),[[d(nt),()=>U(!1),d(ze)]])]),content:_(()=>[ke(J(d(wt),{ref_key:"cascaderPanelRef",ref:$,modelValue:d(Te),"onUpdate:modelValue":l[8]||(l[8]=i=>Za(Te)?Te.value=i:null),options:a.options,props:n.props,border:!1,"render-label":a.$slots.default,onExpandChange:ma,onClose:l[9]||(l[9]=i=>a.$nextTick(()=>U(!1)))},null,8,["modelValue","options","props","render-label"]),[[Re,!A.value]]),a.filterable?ke((f(),H(d(oa),{key:0,ref_key:"suggestionPanel",ref:q,tag:"ul",class:T(d(u).e("suggestion-panel")),"view-class":d(u).e("suggestion-list"),onKeydown:ya},{default:_(()=>[le.value.length?(f(!0),x(ce,{key:0},me(le.value,i=>(f(),x("li",{key:i.uid,class:T([d(u).e("suggestion-item"),d(u).is("checked",i.checked)]),tabindex:-1,onClick:C=>ka(i)},[re("span",null,se(i.text),1),i.checked?(f(),H(d(fe),{key:0},{default:_(()=>[J(d(Ye))]),_:1})):j("v-if",!0)],10,Lt))),128)):ja(a.$slots,"empty",{key:1},()=>[re("li",{class:T(d(u).e("empty-text"))},se(d(N)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Re,A.value]]):j("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Ne=$e(Mt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);Ne.install=e=>{e.component(Ne.name,Ne)};const It=Ne,jt=It;export{jt as E};
