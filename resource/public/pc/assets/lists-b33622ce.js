import{b as Q,Q as H,R as K,S as X,g as N,e as Y,u as Z,f as J,o as x,i as tt,w as st,t as W,T as D,$ as L,n as M,p as d,v as c,x as s,y as l,z as u,F as E,C as F,I as B,A as n,E as b,G as h,O as G,U as O,D as m,J as et,V as it,W as at}from"./index-21964c78.js";import{v as ot}from"./loading-9a2abf10.js";import{_ as rt}from"./index-540d85c2.js";import{E as lt}from"./empty-dc50944b.js";import{E as nt}from"./pagination-85e496af.js";/* empty css              */import"./tag-b8b29d1f.js";import"./select-ed2293fb.js";import"./scrollbar-c1d26490.js";import"./popper-251c4401.js";import{_ as dt}from"./MsActivityTag-20637b5a.js";import{E as ut}from"./image-viewer-dd6920ac.js";import{E as pt}from"./link-8dfac441.js";/* empty css             */import{p as ct,a as _t,b as mt}from"./product-4d2f9c7a.js";import{w as ft}from"./favorites-30bee934.js";import{S as gt}from"./index-f12e260f.js";import{o as yt}from"./index-7c4df64c.js";import vt from"./detail-98fe8fc9.js";import{_ as ht}from"./_plugin-vue_export-helper-c27b6911.js";import"./isEqual-3f4e7b62.js";import"./_Uint8Array-4a48d71f.js";import"./strings-b80b2625.js";import"./debounce-6ea0a711.js";import"./_baseIteratee-8f2ec951.js";import"./hasIn-54cf4aec.js";import"./index-a2bc563c.js";import"./isUndefined-aa0326a0.js";import"./index-958427bc.js";import"./overlay-b290a267.js";import"./refs-1278d799.js";import"./rate-c2c79aa7.js";/* empty css               */import"./input-number-2592ba06.js";import"./index-a2686495.js";import"./cascader-panel-e311c1a6.js";import"./checkbox-85319853.js";import"./flatten-3a6a3668.js";import"./radio-30ecb740.js";import"./rand-14326ce1.js";import"./arrays-e667dc24.js";import"./cloneDeep-9c8ed640.js";import"./_baseClone-42b68cca.js";import"./_initCloneObject-dc96d043.js";import"./Index-c0d55bc5.js";import"./carousel-item-05a08577.js";import"./index-a7a3c269.js";import"./col-d6038888.js";import"./constants-2604e35b.js";import"./store-b45313f8.js";import"./vue-qr-74c08ca5.js";import"./index-f8857e0c.js";const Ct={name:"product",components:{Detail:vt,ArrowRight:Q,Menu:H,SetUp:K,LocationFilled:X},setup(){const t=N(),e=Y(),U=Z(),{addCart:g}=N();let i=J({cat:{},cat_child:[],contract:[],storeInfo:{},userInfo:{},user_row:[],brands:[],isMore:0,loading:!1,isdata:!0,produstItems:[],key:0,item_id:0,dialogVisible:!1,is_selfsupport:!1,stock_status:!1,is_type:!1,total:0,isShow:!0,assistLists:[],brand_rows:[],viewtype:"L",childrenCat:[],isMorecat:!1,isMorebrand:!1,isMoreassist:!1,parentCat:[],catInfo:[],meta:{title:"商品列表",keywords:"",description:""}}),v=J({page:parseInt(e.query.page)||1,size:parseInt(e.query.size)||20,sidx:e.query.sidx||"product_add_time",sort:e.query.sort||"DESC",product_unit_price_min:e.query.product_unit_price_min||"",product_unit_price_max:e.query.product_unit_price_max||"",category_id:e.query.category_id||0,keywords:e.query.keywords||"",activity_type_ids:e.query.activity_type_id||"",product_tags:e.query.tag_id||"",brand_id:e.query.brand_id||"",product_assist_data:""});i.viewtype=e.query.viewtype||"G";let w=()=>{i.loading=!0;let o=v;if(o.store_is_selfsupport||delete o.store_is_selfsupport,v.category_id){var p=v.category_id;ct({category_id:p}).then(r=>{if(r.status==200){if(i.assistLists.length==0){for(var _=0;_<r.data.assists.length;_++)for(var V=0;V<r.data.assists[_].items.length;V++)r.data.assists[_].items[V].assist_is_unselected=!0;i.assistLists=r.data.assists}i.brand_rows=r.data.brands,i.childrenCat=r.data.children,i.parentCat=r.data.parent.reverse(),i.catInfo=r.data.info}})}else i.assistLists=[],i.brand_rows=[],i.childrenCat=[],i.parentCat=[],i.catInfo=[];o.assist={};let S={},C=[];for(var T=0,a=i.assistLists.length;T<a;++T){var f=i.assistLists[T].items;let r=[];for(var k=0,$=f.length;k<$;++k)f[k].assist_is_unselected||(r.push(f[k].assist_item_id),C.push(f[k].assist_item_id));r.length>0&&(S[i.assistLists[T].assist_id]=r)}o.assist=JSON.stringify(S),o.product_assist_data=C.join(","),_t(o).then(r=>{if(r.status==200){i.cat=r.data.cat||[],i.cat_child=r.data.cat_child;for(var _=0;_<r.data.items.length;_++)r.data.items[_].id=r.data.items[_].item_id,r.data.items[_].product_unit_price_min!=r.data.items[_].product_unit_price_max&&r.data.items[_].product_unit_price_min<r.data.items[_].product_unit_price_max?r.data.items[_].product_unit_price_range=r.data.items[_].product_unit_price_min+"~"+r.data.items[_].product_unit_price_max:r.data.items[_].product_unit_price_range=r.data.items[_].product_unit_price_min,r.data.items[_].user_cart_quantity=1;i.produstItems=r.data.items,i.total=r.data.records,r.data.items.length>0?i.isdata=!0:i.isdata=!1}else i.isdata=!1;i.loading=!1})};x((o,p)=>{i.assistLists=[],v.category_id=o.query.category_id||0,v.product_tags=o.query.tag_id||"",v.activity_type_ids=o.query.activity_type_id||"",v.brand_id=o.query.brand_id||"",v.viewtype=o.query.viewtype||"G",v.keywords=o.query.keywords||"",v.page=parseInt(o.query.page)||1,v.size=parseInt(o.query.size)||20,w()});let I=()=>{w()},q=(o,p)=>{i.assistLists[o].items[p].assist_is_unselected=!i.assistLists[o].items[p].assist_is_unselected,w()},A=o=>{i.assistLists[o].items.forEach(p=>{p.assist_is_unselected=!0}),w()};const y=o=>{g({item_id:o,cart_quantity:1,SKU_Id:o},U)},P=o=>{i.item_id=o,i.dialogVisible=!0},R=(o,p)=>{let S={item_id:o};i.produstItems[p].is_favorite?ft({action:"item",item_id:o}).then(C=>{C.status==200?(D({type:"success",message:L("已取消收藏")}),i.produstItems[p].is_favorite=0):D.error(C.msg)}):mt(S).then(C=>{C.status==200?(D({type:"success",message:L("收藏成功")}),i.produstItems[p].is_favorite=1):D.error(C.msg)})};return tt(()=>{w()}),st(()=>{var o="商品列表";if(e.query.category_id)for(var p=0;p<i.cat.length;p++)e.query.category_id==i.cat[p].category_id&&(o==""?o+=L(i.cat[p].category_name):o=o+"-"+L(i.cat[p].category_name));document.title=o}),{getProductLists:w,goTo:I,imChat:()=>{if(!t.hasLogin){ElMessageBox.confirm(L("请先登录"),{confirmButtonText:L("确定"),cancelButtonText:L("取消"),dangerouslyUseHTMLString:!0,center:!0}).then(()=>{U.push({path:"/login/login"})});return}yt(i.storeInfo.store_id,i.storeInfo.user_id)},addCartItem:y,showQuick:P,addWish:R,StateCode:gt,goAssistToPage:q,restAssistToPage:A,...W(i),...W(v)}}};const z=t=>(it("data-v-ac425c68"),t=t(),at(),t),wt={id:"page-container"},kt={class:"container columns"},Et={class:"breadcrumb clearfix"},bt={class:"space-icon"},It={class:"space-icon"},Lt={class:"container filter-container"},qt={key:0,class:"filter-box"},St={class:"filter-list-wrap filter-list-wrap-toggled"},Tt={class:"filter-list clearfix filter-list-row"},Ft={style:{float:"left",width:"850px"}},Mt={key:1,class:"filter-box"},Bt={class:"filter-list-wrap filter-list-wrap-toggled"},At={class:"filter-list clearfix filter-list-row"},$t={style:{float:"left",width:"850px"}},Dt={key:0,class:"filter-box"},zt={class:"filter-list-wrap filter-list-wrap-toggled"},Ut={class:"filter-list clearfix filter-list-row"},Pt={style:{float:"left",width:"850px"}},Rt=z(()=>s("i",{class:"fa fa fa-chevron-down"},null,-1)),Vt=z(()=>s("i",{class:"fa fa fa-chevron-up"},null,-1)),Gt={class:"container clearfix"},jt={class:"sort-wrapper clearfix"},Nt={class:"sort-box"},Jt=z(()=>s("i",{class:"iconfont fa fa-long-arrow-down"},null,-1)),Wt=z(()=>s("i",{class:"iconfont fa fa-long-arrow-down"},null,-1)),Ot={class:"price-filter"},Qt=["placeholder"],Ht=["placeholder"],Kt={class:"view-type-box"},Xt={class:"total-box"},Yt={class:"num"},Zt={key:0,class:"container"},xt={class:"p-img"},ts={class:"p-name"},ss={class:"p-price-box"},es={class:"p-price"},is={class:"p-sales"},as={class:"sortPagiBar",style:{"margin-top":"30px"}},os={class:"bottom-pagination"},rs={key:1};function ls(t,e,U,g,i,v){const w=M("LocationFilled"),I=et,q=M("router-link"),A=M("ArrowRight"),y=pt,P=M("Menu"),R=M("SetUp"),j=ut,o=dt,p=nt,S=lt,C=rt,T=ot;return d(),c(E,null,[s("div",wt,[s("div",kt,[s("div",Et,[l(I,{class:"location"},{default:u(()=>[l(w)]),_:1}),l(q,{class:"home",to:"/",title:t.$t("返回首页")},{default:u(()=>[m(n(t.$t("首页")),1)]),_:1},8,["title"]),s("span",bt,[l(I,null,{default:u(()=>[l(A)]),_:1})]),t.catInfo!=""?(d(!0),c(E,{key:0},F(t.parentCat,(a,f)=>(d(),B(y,{onClick:()=>{t.category_id=a.category_id,g.goTo()},class:h(["home",t.catInfo.category_id==a.category_id?"cur":""]),key:f,title:a.category_name},{default:u(()=>[m(n(a.category_name)+" ",1),s("span",It,[l(I,null,{default:u(()=>[t.catInfo.category_id!=a.category_id?(d(),B(A,{key:0})):b("",!0)]),_:2},1024)])]),_:2},1032,["onClick","class","title"]))),128)):(d(),B(q,{key:1,class:"home cur",to:"/",title:t.$t("全部商品")},{default:u(()=>[m(n(t.$t("全部商品")),1)]),_:1},8,["title"]))])]),s("div",Lt,[t.childrenCat.length>0?(d(),c("div",qt,[s("div",St,[s("dl",Tt,[s("dt",null,n(t.$t("分类")),1),l(y,{onClick:e[0]||(e[0]=()=>{t.category_id="",g.goTo()}),class:"default-all"},{default:u(()=>[m(n(t.$t("全部")),1)]),_:1}),s("div",Ft,[(d(!0),c(E,null,F(t.childrenCat,(a,f)=>(d(),c("dd",{key:f},[l(y,{onClick:()=>{t.category_id=a.category_id,g.goTo()},class:h(t.category_id==a.category_id?"ass-link-active":"")},{default:u(()=>[m(n(a.category_name),1)]),_:2},1032,["onClick","class"])]))),128))])])])])):b("",!0),t.brand_rows.length>0?(d(),c("div",Mt,[s("div",Bt,[s("dl",At,[s("dt",null,n(t.$t("品牌")),1),l(y,{onClick:e[1]||(e[1]=()=>{t.brand_id="",g.goTo()}),class:"default-all"},{default:u(()=>[m(n(t.$t("全部")),1)]),_:1}),s("div",$t,[(d(!0),c(E,null,F(t.brand_rows,(a,f)=>(d(),c("dd",{key:f},[l(y,{onClick:()=>{t.brand_id=a.brand_id,g.goTo()},class:h(t.brand_id==a.brand_id?"ass-link-active":"")},{default:u(()=>[m(n(a.brand_name),1)]),_:2},1032,["onClick","class"])]))),128))])])])])):b("",!0),(d(!0),c(E,null,F(t.assistLists,(a,f)=>(d(),c("div",{key:a.assist_id},[t.isMoreassist||f<3?(d(),c("div",Dt,[s("div",zt,[s("dl",Ut,[s("dt",null,n(a.assist_name),1),l(y,{onClick:()=>{g.restAssistToPage(f)},class:"default-all"},{default:u(()=>[m(n(t.$t("全部")),1)]),_:2},1032,["onClick"]),s("div",Pt,[(d(!0),c(E,null,F(a.items,(k,$)=>(d(),c("dd",{key:$},[l(y,{class:h(k.assist_is_unselected?"":"ass-link-active"),onClick:r=>g.goAssistToPage(f,$)},{default:u(()=>[m(n(k.assist_item_name),1)]),_:2},1032,["class","onClick"])]))),128))])]),t.assistLists.length>3&&f==2&&!t.isMoreassist?(d(),c("a",{key:0,class:"more J_filterToggle",href:"javascript: void(0);",onClick:e[2]||(e[2]=()=>{t.isMoreassist=!t.isMoreassist})},[m(n(t.$t("更多"))+" ",1),Rt])):b("",!0),t.assistLists.length==f+1&&t.isMoreassist?(d(),c("a",{key:1,class:"more J_filterToggle",href:"javascript: void(0);",onClick:e[3]||(e[3]=()=>{t.isMoreassist=!t.isMoreassist})},[m(n(t.$t("收起"))+" ",1),Vt])):b("",!0)])])):b("",!0)]))),128))]),s("div",Gt,[s("div",jt,[s("ul",Nt,[s("li",{class:h(["no-right-border",t.sidx=="product_add_time"?"active":""]),onClick:e[4]||(e[4]=()=>{t.sidx="product_add_time",t.sort="DESC",g.goTo()})},[l(y,{underline:!1,href:"javascript: void(0);"},{default:u(()=>[m(n(t.$t("新品")),1),Jt]),_:1})],2),s("li",{class:h(["no-right-border",t.sidx=="product_sale_num"?"active":""]),onClick:e[5]||(e[5]=()=>{t.sidx="product_sale_num",t.sort="DESC",g.goTo()})},[l(y,{underline:!1,href:"javascript: void(0);"},{default:u(()=>[m(n(t.$t("销量")),1),Wt]),_:1})],2),s("li",{class:h(["up",t.sidx=="product_unit_price_min"?"active":""]),onClick:e[6]||(e[6]=()=>{t.sidx="product_unit_price_min",t.sort=="DESC"?t.sort="ASC":t.sort="DESC",g.goTo()})},[l(y,{underline:!1,href:"javascript: void(0);"},{default:u(()=>[m(n(t.$t("价格"))+" ",1),s("i",{class:h(["iconfont fa",t.sidx=="product_unit_price_min"&&t.sort!="DESC"?"fa-long-arrow-up":"fa-long-arrow-down"])},null,2)]),_:1})],2),s("li",Ot,[G(s("input",{type:"text",id:"product_unit_price_min",class:"price-input","onUpdate:modelValue":e[7]||(e[7]=a=>t.product_unit_price_min=a),placeholder:t.$t("最低价")},null,8,Qt),[[O,t.product_unit_price_min]]),m(" - "),G(s("input",{type:"text",id:"product_unit_price_max",class:"price-input","onUpdate:modelValue":e[8]||(e[8]=a=>t.product_unit_price_max=a),placeholder:t.$t("最高价")},null,8,Ht),[[O,t.product_unit_price_max]]),s("button",{class:"btn-price",onClick:e[9]||(e[9]=()=>{g.goTo()})},n(t.$t("确认")),1)])]),s("ul",Kt,[s("li",Xt,[s("span",null,[m(n(t.$t("共"))+" ",1),s("span",Yt,n(t.total),1),m(" "+n(t.$t("件商品")),1)])]),s("li",null,[l(y,{onClick:e[10]||(e[10]=()=>{t.viewtype="G"})},{default:u(()=>[l(I,{class:h(t.viewtype=="G"?"view-type active":"view-type")},{default:u(()=>[l(P)]),_:1},8,["class"])]),_:1}),l(y,{style:{"margin-right":"15px","margin-left":"8px"},onClick:e[11]||(e[11]=()=>{t.viewtype="L"})},{default:u(()=>[l(I,{class:h(t.viewtype=="L"?"view-type active":"view-type")},{default:u(()=>[l(R)]),_:1},8,["class"])]),_:1})])])])]),t.produstItems?(d(),c(E,{key:0},[t.isdata?G((d(),c("div",Zt,[s("ul",{class:h(t.viewtype=="G"?"product-view-grid":"product-view-list")},[(d(!0),c(E,null,F(t.produstItems,(a,f)=>(d(),c("li",{key:f,class:"item"},[s("div",xt,[l(q,{to:{path:"/product/detail",query:{item_id:a.item_id}},class:"item_link"},{default:u(()=>[l(j,{class:"img-responsive","data-original":a.product_image,src:a.product_image,fit:"contain",lazy:""},null,8,["data-original","src"])]),_:2},1032,["to"])]),s("div",null,[s("div",ts,[l(q,{to:"/product/detail?item_id="+a.item_id},{default:u(()=>[a.activity_type_ids?(d(),B(o,{key:0,typeId:a.activity_type_ids},null,8,["typeId"])):b("",!0),m(n(a.product_name),1)]),_:2},1032,["to"])]),s("div",ss,[s("div",es,[s("span",null,n(t.$t("￥")),1),m(n(a.product_unit_price_range),1)]),s("div",is,n(t.$t("销量"))+" "+n(a.product_sale_num),1)])])]))),128))],2),s("div",as,[s("div",os,[s("nav",null,[(d(),B(p,{currentPage:t.page,"onUpdate:currentPage":e[12]||(e[12]=a=>t.page=a),"page-size":t.size,"onUpdate:pageSize":e[13]||(e[13]=a=>t.size=a),"page-sizes":[36,72,108,144],small:!1,disabled:!1,background:!0,layout:"prev,pager,next,total,jumper",total:t.total,key:t.page,onSizeChange:e[14]||(e[14]=a=>{t.size=a,g.goTo()}),onCurrentChange:e[15]||(e[15]=a=>{t.page=a,g.goTo()})},null,8,["currentPage","page-size","total"]))])])])])),[[T,t.loading]]):(d(),c("div",rs,[l(S,{description:t.$t("对不起，对应商品分类或筛选组合下没有商品")},null,8,["description"])]))],64)):b("",!0)]),l(C,{keywords:t.meta.keywords,description:t.meta.description,title:t.meta.title},null,8,["keywords","description","title"])],64)}const re=ht(Ct,[["render",ls],["__scopeId","data-v-ac425c68"]]);export{re as default};
