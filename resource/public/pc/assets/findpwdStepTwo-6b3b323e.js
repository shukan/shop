import{P as z,u as D,e as O,f as b,r as m,$ as s,a9 as j,n as A,p as u,v as w,x as o,y as r,z as n,A as a,aR as e,F as V,I as T,D as p,E as K,L as P,K as W,V as G,W as H,T as f,ap as J,at as Q}from"./index-21964c78.js";import{E as X,a as Y}from"./form-item-8d3c5b0e.js";/* empty css               *//* empty css              */import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import"./castArray-18b00898.js";import"./_baseClone-42b68cca.js";import"./_Uint8Array-4a48d71f.js";import"./_initCloneObject-dc96d043.js";const h=v=>(G("data-v-5946bd6e"),v=v(),H(),v),ee={class:"login-container"},oe={class:"row"},te=h(()=>o("div",{class:"col-sm-2"},null,-1)),se={class:"col-sm-8"},le=h(()=>o("div",{class:"errors-container"},null,-1)),ne={class:"login-header"},ae={href:"https://test.shopsuite.cn/account.php",class:"logo"},re=h(()=>o("img",{src:"https://shopsuite.oss-accelerate.aliyuncs.com/media/user/10472/image/20210422/1619057326407633.png",class:"hide",alt:"",width:"80"},null,-1)),ie={style:{padding:"20px 0px"}},ce={class:"form-group"},_e={class:"login-footer text-right"},de=h(()=>o("div",{class:"info-links"},null,-1)),ue=h(()=>o("div",{class:"col-sm-2"},null,-1)),pe=z({__name:"findpwdStepTwo",setup(v){const q=D(),x=O();let y=b({stepInfo:{}}),c=b({step:2,user_account:"",verify_code:0,rand_key:"",channel:"mobile"});const E=m(),I=m(!0),g=m(),F=m(60),_=m(),l=b({channel_verify_key:"",channel_verify_code:""}),M=b({channel_verify_key:[{required:!0,message:s("账号错误"),trigger:"blur"}],channel_verify_code:[{required:!0,message:s("请输入验证码"),trigger:"change"}]}),N=()=>{q.back(-1)},R=async i=>{i&&await i.validate((t,d)=>{t?(U(),console.log(t)):console.log("error submit!",d)})};let L=()=>{let i={};if(c.channel=="mobile"){if(!l.channel_verify_key){f.error(s("请输入手机号"));return}i.mobile=l.channel_verify_key,J(i).then(t=>{t.status==200?f.success("验证码已经发生成功，请尽快输入验证码!"):f.error(t.msg)})}else if(c.channel=="email"){if(!l.user_account){f.error(s("请输入邮箱号"));return}i.rand_key=l.user_account,Q(i).then(t=>{t.status==200?f.success("验证码已经发生成功，请尽快输入验证码!"):f.error(t.msg)})}g.value||(_.value=F.value,I.value=!1,g.value=setInterval(()=>{_.value>0&&_.value<=F.value?(_.value--,console.log("count----",_)):(I.value=!0,clearInterval(g.value),g.value=null)},1e3))};const U=()=>{y.stepInfo.user_id,l.channel_verify_key,l.channel_verify_code,c.channel};return j(()=>{c.step=x.query.step,c.user_account=x.query.user_account,c.verify_code=x.query.verify_code}),(i,t)=>{const d=X,B=P,C=W,S=A("router-link"),$=Y;return u(),w("div",ee,[o("div",oe,[te,o("div",se,[le,r($,{class:"login-form",ref_key:"ruleFormRef",ref:E,model:e(l),rules:e(M),"label-width":"120px"},{default:n(()=>[r(d,{label:"","label-width":"4px"},{default:n(()=>[o("div",ne,[o("a",ae,[re,o("span",null,a(e(s)("找回密码")),1)]),o("p",null,a(e(s)("找回 随商电商系统 密码")),1)])]),_:1}),o("h4",ie,a(e(s)("第二步:")),1),e(y).stepInfo.error?(u(),w(V,{key:1},[o("h4",null,a(e(y).stepInfo.error),1),o("div",ce,[o("a",{href:"javascript:void(0);",onClick:N},a(e(s)("返回")),1)])],64)):(u(),w(V,{key:0},[e(y).stepInfo.channel=="mobile"?(u(),w(V,{key:0},[r(d,{label:"","label-width":"px",prop:"channel_verify_key"},{default:n(()=>[r(B,{modelValue:e(l).channel_verify_key,"onUpdate:modelValue":t[0]||(t[0]=k=>e(l).channel_verify_key=k),disabled:""},null,8,["modelValue"])]),_:1}),r(d,{label:"","label-width":"0px",prop:"channel_verify_code"},{default:n(()=>[r(B,{modelValue:e(l).channel_verify_code,"onUpdate:modelValue":t[1]||(t[1]=k=>e(l).channel_verify_code=k)},{append:n(()=>[e(I)?(u(),T(C,{key:0,style:{padding:"0",width:"102px"},onClick:e(L)},{default:n(()=>[p(a(e(s)("获取验证码")),1)]),_:1},8,["onClick"])):(u(),T(C,{key:1,style:{padding:"0",width:"102px"}},{default:n(()=>[p(a(e(_))+" s "+a(e(s)("后获取")),1)]),_:1}))]),_:1},8,["modelValue"])]),_:1}),r(d,{"label-width":"0px"},{default:n(()=>[r(C,{type:"primary",color:"#e65d00",size:"large",style:{width:"100%"},onClick:t[2]||(t[2]=k=>R(e(E)))},{default:n(()=>[p(a(e(s)("下一步")),1)]),_:1})]),_:1})],64)):K("",!0)],64)),o("div",_e,[r(S,{to:{path:"/Login/login"}},{default:n(()=>[p(a(e(s)("我已注册，现在登录")),1)]),_:1}),p(" | "),r(S,{to:{path:"/Login/register"}},{default:n(()=>[p(a(e(s)("立即注册")),1)]),_:1}),de])]),_:1},8,["model","rules"])]),ue])])}}});const xe=Z(pe,[["__scopeId","data-v-5946bd6e"]]);export{xe as default};
