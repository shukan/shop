import{s as N,g as M,u as H,e as Y,f as P,o as j,i as K,t as q,T as C,$ as E,a6 as L,n as W,p as m,v,x as l,A as o,y as r,z as i,F as V,C as U,I as b,K as G,D as d,E as k}from"./index-21964c78.js";import{E as J}from"./overlay-b290a267.js";import{_ as Q}from"./Lists-8e8de612.js";import{E as X}from"./pagination-85e496af.js";/* empty css              */import"./tag-b8b29d1f.js";import"./select-ed2293fb.js";import"./scrollbar-c1d26490.js";import"./popper-251c4401.js";import{E as Z}from"./empty-dc50944b.js";import{d as I,a as x,b as ee}from"./main-34db54b3.js";import{_ as te}from"./MsActivityTag-20637b5a.js";import{E as oe}from"./image-viewer-dd6920ac.js";import{E as ie}from"./row-d248ec80.js";import{E as ae}from"./col-d6038888.js";/* empty css               */import{d as se,e as re,f as ne}from"./order-09ce62cc.js";import{S as le}from"./index-f12e260f.js";import{h as de}from"./helper-0ec263a7.js";import{_ as ue}from"./_plugin-vue_export-helper-c27b6911.js";import"./refs-1278d799.js";import"./isUndefined-aa0326a0.js";import"./Manage-f169baad.js";import"./form-item-8d3c5b0e.js";import"./castArray-18b00898.js";import"./_baseClone-42b68cca.js";import"./_Uint8Array-4a48d71f.js";import"./_initCloneObject-dc96d043.js";/* empty css                    */import"./radio-30ecb740.js";import"./invoice-b9863122.js";import"./table-column-af2cc573.js";import"./hasIn-54cf4aec.js";import"./checkbox-85319853.js";import"./isEqual-3f4e7b62.js";import"./flatten-3a6a3668.js";import"./_baseIteratee-8f2ec951.js";import"./debounce-6ea0a711.js";import"./index-a2bc563c.js";/* empty css                */import"./step-fc04c36a.js";import"./index-a7a3c269.js";import"./strings-b80b2625.js";import"./constants-2604e35b.js";import"./dayjs.min-8a7592b2.js";const pe={components:{Search:N},setup(){const e=M(),s=H(),B=Y(),a="small";let y=P({listsOrder:[],loading:!1,isdata:!0,all:0,pay:0,confirm:0,close:0,order_id:"",dialogTableVisible:!1}),u=P({payment_type_id:0,order_state_id:0,kind_id:0,page:parseInt(B.query.page)||1,size:parseInt(B.query.size)||10,total:1,order_key:""}),_=()=>{y.loading=!0;let n={page:u.page,size:u.size,order_key:u.order_key,order_application_id:u.order_application_id,order_rent_shippend_type:u.order_rent_shippend_type};u.payment_type_id&&(n.payment_type_id=u.payment_type_id),u.kind_id&&(n.kind_id=u.kind_id),u.order_state_id&&(n.order_state_id=u.order_state_id),se(n).then(t=>{if(t.status==200){let c=t.data;y.listsOrder=c.items,y.pay=c.pay,y.confirm=c.confirm,y.close=c.close,u.total=c.records,c.items.length>0?y.isdata=!0:y.isdata=!1}else C.error(E("获取数据失败"));y.loading=!1})},p=()=>{let n={page:u.page,size:u.size};s.push({path:"/user/order/index",query:n})},f=n=>{u.payment_type_id=n,_()},z=()=>{_()},S=n=>{u.order_state_id=n,_()},A=n=>{u.kind_id=n,_()},F=n=>de.format(n);const T=n=>{y.order_id=n,y.dialogTableVisible=!0},D=()=>{y.dialogTableVisible=!1,_()},O=n=>{L.confirm(E("确定取消订单吗?"),{confirmButtonText:E("确定"),cancelButtonText:E("取消"),center:!0}).then(()=>{re({order_id:n}).then(c=>{c.status==200?(C.success(E("订单已成功取消!")),_()):C.error(c.msg)})})};j((n,t)=>{_()});let $=n=>{L.confirm(E("确定移除订单吗?"),{confirmButtonText:E("确定"),cancelButtonText:E("取消"),center:!0}).then(()=>{ne({order_id:n}).then(c=>{c.status==200?_():C.error(c.msg)})})};const R=n=>{const t=e.info.order_state_list.find(c=>c.value===n);return t?t.label:""};return K(()=>{_()}),{getLists:_,goTo:p,dateFormat:F,remove:$,buttonSize:a,checkPaymentType:f,checkOrderStatus:S,checkApplicationId:z,checkOrderType:A,applyInvoice:T,cancelUnpayOrder:O,updateInvoiceLists:D,getLabelByValue:R,StateCode:le,...q(y),...q(u)}}};const _e={class:"right-title-box"},me={class:"first-title"},ce={class:"btn-box"},ye={class:"btn btn-invoice"},fe={class:"order-container"},be={class:"select-box"},ge={class:"title-btn-box"},ke={class:"select-title"},Ee={class:"title-btn-box"},ve={class:"select-title"},ze={class:"title-btn-box"},he={class:"select-title"},Ce={key:0},Be={class:"order-number"},Se={class:"time"},Ae={class:"p-name"},Fe={class:"sku-name"},Te={class:"quantity-price"},De={class:"order-text"},Oe={class:"order-text"},$e={key:1},Re={class:"sortPagiBar"},Ve={class:"bottom-pagination"};function Pe(e,s,B,a,y,u){const _=W("router-link"),p=G,f=ae,z=ie,S=I,A=oe,F=te,T=x,D=ee,O=Z,$=X,R=Q,n=J;return m(),v(V,null,[l("div",_e,[l("div",me,o(e.$t("我的订单")),1),l("div",ce,[r(_,{to:{path:"/user/invoice/lists"}},{default:i(()=>[l("div",ye,o(e.$t("我的发票")),1)]),_:1})])]),l("div",fe,[l("div",be,[l("div",ge,[l("span",ke,o(e.$t("订单类型")),1),r(p,{class:"select-btn",type:e.kind_id==0?"primary":"",size:a.buttonSize,onClick:s[0]||(s[0]=t=>a.checkOrderType(0))},{default:i(()=>[d(o(e.$t("全部")),1)]),_:1},8,["type","size"]),r(p,{class:"select-btn",size:a.buttonSize,onClick:s[1]||(s[1]=t=>a.checkOrderType(1201)),type:e.kind_id=="1201"?"primary":""},{default:i(()=>[d(o(e.$t("实物订单")),1)]),_:1},8,["size","type"]),r(p,{class:"select-btn",size:a.buttonSize,onClick:s[2]||(s[2]=t=>a.checkOrderType(1202)),type:e.kind_id=="1202"?"primary":""},{default:i(()=>[d(o(e.$t("虚拟订单")),1)]),_:1},8,["size","type"])]),l("div",Ee,[l("span",ve,o(e.$t("交易方式")),1),r(p,{class:"select-btn",type:e.payment_type_id==0?"primary":"",size:a.buttonSize,onClick:s[3]||(s[3]=t=>a.checkPaymentType(0))},{default:i(()=>[d(o(e.$t("全部")),1)]),_:1},8,["type","size"]),r(p,{class:"select-btn",size:a.buttonSize,onClick:s[4]||(s[4]=t=>a.checkPaymentType(1302)),type:e.payment_type_id=="1302"?"primary":""},{default:i(()=>[d(o(e.$t("线上交易")),1)]),_:1},8,["size","type"]),r(p,{class:"select-btn",size:a.buttonSize,onClick:s[5]||(s[5]=t=>a.checkPaymentType(1305)),type:e.payment_type_id=="1305"?"primary":""},{default:i(()=>[d(o(e.$t("线下交易")),1)]),_:1},8,["size","type"])]),l("div",ze,[l("span",he,o(e.$t("订单状态")),1),r(p,{class:"select-btn",type:e.order_state_id==0?"primary":"",size:a.buttonSize,onClick:s[6]||(s[6]=t=>a.checkOrderStatus(0))},{default:i(()=>[d(o(e.$t("全部订单")),1)]),_:1},8,["type","size"]),r(p,{class:"select-btn",size:a.buttonSize,onClick:s[7]||(s[7]=t=>a.checkOrderStatus(2020)),type:e.order_state_id==2020?"primary":""},{default:i(()=>[d(o(e.$t("待发货")),1)]),_:1},8,["size","type"]),r(p,{class:"select-btn",size:a.buttonSize,onClick:s[8]||(s[8]=t=>a.checkOrderStatus(2010)),type:e.order_state_id==2010?"primary":""},{default:i(()=>[d(o(e.$t("待付款")),1)]),_:1},8,["size","type"]),r(p,{class:"select-btn",size:a.buttonSize,onClick:s[9]||(s[9]=t=>a.checkOrderStatus(2060)),type:e.order_state_id==2060?"primary":""},{default:i(()=>[d(o(e.$t("交易成功")),1)]),_:1},8,["size","type"]),r(p,{class:"select-btn",size:a.buttonSize,onClick:s[10]||(s[10]=t=>a.checkOrderStatus(2070)),type:e.order_state_id==2070?"primary":""},{default:i(()=>[d(o(e.$t("已取消")),1)]),_:1},8,["size","type"])])]),r(z,{class:"table-header"},{default:i(()=>[r(f,{span:11,class:"table-head-text"},{default:i(()=>[d(o(e.$t("商品信息")),1)]),_:1}),r(f,{span:3,class:"table-head-text"},{default:i(()=>[d(o(e.$t("金额")),1)]),_:1}),r(f,{span:6,class:"table-head-text"},{default:i(()=>[d(o(e.$t("交易状态")),1)]),_:1}),r(f,{span:4,class:"table-head-text"},{default:i(()=>[d(o(e.$t("操作")),1)]),_:1})]),_:1}),e.isdata?(m(),v("div",Ce,[(m(!0),v(V,null,U(e.listsOrder,(t,c)=>(m(),v("div",{key:c,class:"order-table-box"},[r(D,null,{default:i(()=>[r(S,{class:"order-header-info"},{default:i(()=>[l("span",Be,o(e.$t("订单号："))+" "+o(t.order_id),1),l("span",Se,o(e.$t("下单时间："))+" "+o(t.order_time),1)]),_:2},1024),r(T,{class:"order-list-info"},{default:i(()=>[(m(!0),v(V,null,U(t.items,(g,h)=>(m(),v("ul",{key:h},[r(z,null,{default:i(()=>[r(f,{span:4,class:"img-box"},{default:i(()=>[r(_,{to:{path:"/product/detail",query:{item_id:g.item_id}}},{default:i(()=>[r(A,{src:g.order_item_image,"object-fit":"cover",style:{width:"120px",height:"120px"},alt:g.item_name},null,8,["src","alt"])]),_:2},1032,["to"])]),_:2},1024),r(f,{span:7},{default:i(()=>[r(_,{to:{path:"/product/detail",query:{item_id:g.item_id}}},{default:i(()=>[l("div",Ae,[g.activity_type_id?(m(),b(F,{key:0,typeId:g.activity_type_id},null,8,["typeId"])):k("",!0),d(" "+o(g.product_name),1)]),l("div",Fe,o(e.$t("规格"))+"："+o(g.item_name),1)]),_:2},1032,["to"]),l("div",Te,o(e.$t("￥"))+o(g.item_unit_price)+" x "+o(g.order_item_quantity),1)]),_:2},1024),h==0?(m(),b(f,{key:0,span:3},{default:i(()=>[l("div",De,o(e.$t("￥"))+o(t.order_payment_amount),1)]),_:2},1024)):k("",!0),h==0?(m(),b(f,{key:1,span:6},{default:i(()=>[l("div",Oe,o(a.getLabelByValue(t.order_state_id)),1)]),_:2},1024)):k("",!0),h==0?(m(),b(f,{key:2,span:4,class:"order-actions"},{default:i(()=>[r(_,{to:{path:"/user/order/detail",query:{order_id:t.order_id}}},{default:i(()=>[r(p,{size:"small",style:{color:"#000","margin-bottom":"10px"}},{default:i(()=>[d(o(e.$t("订单详情")),1)]),_:1})]),_:2},1032,["to"]),t.order_state_id==a.StateCode.ORDER_STATE_FINISH&&!t.order_buyer_evaluation_status?(m(),b(_,{key:0,to:{path:"/user/comment/manage",query:{order_id:t.order_id,item_id:t.item_id}}},{default:i(()=>[r(p,{size:"small",style:{color:"#000","margin-bottom":"10px"}},{default:i(()=>[d(o(e.$t("订单评价")),1)]),_:1})]),_:2},1032,["to"])):k("",!0),t.order_state_id==a.StateCode.ORDER_STATE_FINISH&&t.order_buyer_evaluation_status?(m(),b(_,{key:1,to:{path:"/user/comment/manage",query:{order_id:t.order_id,item_id:t.item_id}}},{default:i(()=>[r(p,{size:"small",style:{color:"#000","margin-bottom":"10px"}},{default:i(()=>[d(o(e.$t("查看评价")),1)]),_:1})]),_:2},1032,["to"])):k("",!0),t.order_state_id==a.StateCode.ORDER_STATE_WAIT_PAY?(m(),b(p,{key:2,size:"small",style:{color:"#000","margin-bottom":"10px"},onClick:w=>a.cancelUnpayOrder(t.order_id)},{default:i(()=>[d(o(e.$t("取消订单")),1)]),_:2},1032,["onClick"])):k("",!0),t.order_is_paid==a.StateCode.ORDER_PAID_STATE_YES&&!t.invoice_is_apply?(m(),b(p,{key:3,type:"danger",size:"small",style:{color:"white"},onClick:w=>a.applyInvoice(t.order_id)},{default:i(()=>[d(o(e.$t("申请开票")),1)]),_:2},1032,["onClick"])):k("",!0),t.order_is_paid!=a.StateCode.ORDER_PAID_STATE_YES&&t.order_state_id!=a.StateCode.ORDER_STATE_CANCEL?(m(),b(_,{key:4,to:{path:"/user/order/confirmPay",query:{order_id:t.order_id}}},{default:i(()=>[r(p,{type:"success",size:"small",style:{color:"white"}},{default:i(()=>[d(o(e.$t("立即支付")),1)]),_:1})]),_:2},1032,["to"])):k("",!0)]),_:2},1024)):k("",!0)]),_:2},1024)]))),128))]),_:2},1024)]),_:2},1024)]))),128))])):(m(),v("div",$e,[r(O,{description:e.$t("对不起，没有找到你需要的订单")},null,8,["description"])])),l("div",Re,[l("div",Ve,[l("nav",null,[(m(),b($,{currentPage:e.page,"onUpdate:currentPage":s[11]||(s[11]=t=>e.page=t),"page-size":e.size,"onUpdate:pageSize":s[12]||(s[12]=t=>e.size=t),"page-sizes":[10,20,30,40],small:!1,disabled:!1,background:!0,layout:"prev,pager,next,total,jumper",total:e.total,key:e.page,onSizeChange:s[13]||(s[13]=t=>{e.size=t,a.goTo()}),onCurrentChange:s[14]||(s[14]=t=>{e.page=t,a.goTo()})},null,8,["currentPage","page-size","total"]))])])]),r(n,{modelValue:e.dialogTableVisible,"onUpdate:modelValue":s[15]||(s[15]=t=>e.dialogTableVisible=t),title:e.$t("选择发票"),width:"959px"},{default:i(()=>[e.dialogTableVisible?(m(),b(R,{key:0,order_id:e.order_id,onUpdate:a.updateInvoiceLists},null,8,["order_id","onUpdate"])):k("",!0)]),_:1},8,["modelValue","title"])])],64)}const At=ue(pe,[["render",Pe],["__scopeId","data-v-12166982"]]);export{At as default};
