import{_ as ee,a as oe,b as te}from"./TopHeader-817fa56c.js";import{_ as se}from"./index-540d85c2.js";import{a as ae,l as ne,s as re,c as le,q as ie,b as ce,d as _e,u as ue,r as E,e as de,f as K,o as pe,g as R,h as ge,w as me,i as he,j as fe,k as ye,t as ve,m as we,n as k,p as l,v as c,x as a,y as n,z as i,A as g,B as ke,F as m,C as w,D as B,E as v,G as P,H as be,I as Se,J as Ce,K as Ie,L as Ve}from"./index-21964c78.js";import{E as Ne}from"./image-viewer-dd6920ac.js";import{E as Ee}from"./overlay-b290a267.js";import{E as Be}from"./link-8dfac441.js";/* empty css              *//* empty css               *//* empty css             */import{V as Le}from"./vue-qr-74c08ca5.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-7c4df64c.js";import"./index-958427bc.js";import"./sub-menu-77e2fda5.js";import"./index-10507120.js";import"./popper-251c4401.js";import"./isUndefined-aa0326a0.js";/* empty css                */import"./debounce-6ea0a711.js";import"./refs-1278d799.js";const xe={name:"header",components:{ArrowDown:ae,Location:ne,Search:re,VueQr:Le,CaretBottom:le,QuestionFilled:ie,ArrowRight:ce,ShoppingTrolley:_e},setup(){const o=ue(),r=E("1"),u=de();K({});let e=K({dialogVisiblePop:!1,hasLogin:!1,loading:!1,isTopImg:!0,userRow:{},cart_count:0,label:"",searchIndex:0,keywords:"",key_type:u.query.key_type||1,path:"/product/lists",isShow:!1,headerNav:[],productCategoryNav:[],isHome:!1,default_site_row:"",dialogVisible:!1,subsite_hot_rows:[],subsite_current_row:{},citys:[],isSubsite:!1,search_hot_words:[],search_history_words:[],suggest_search_words:{},current_label:"zh-CN",current_img:"https://static.shopsuite.cn/shopsuite/flags/square/5322affbc4d56.png",routeUrl:"",customSite:[],currentSite:[],isSite:!1,current_language:"中文",language_code:"zh-CN",more_nav:0,up_nav:0}),b=E(""),S=E(""),_=E("");_.value=u.name,pe((s,p)=>{e.routeUrl=s.fullPath,console.log(s),_.value=s.name,_.value!="index"&&(e.isHome=!1)});const{getUserInfo:L,resetAll:f,setCustomSite:x,logout:H,setCartNum:z,goUrl:C}=R();ge(async()=>{console.log("*******onBeforeMount******");try{await L().then(()=>{})}catch(s){console.error("错误拦截:",s),await f()}});const d=R();let U=()=>{H()};const I=()=>{e.more_nav=0,e.up_nav=1},V=()=>{e.more_nav=1,e.up_nav=0};let q=()=>{const s=d.getIndexLayout;s.page_pc_nav.length>0&&(e.headerNav=s.page_pc_nav),s.category_nav.length>0&&(e.productCategoryNav=s.category_nav),we({}).then(p=>{p.status==200&&(e.search_hot_words=p.data.search_hot_words,e.search_history_words=p.data.search_history_words,e.suggest_search_words=p.data.suggest_search_words,e.keywords||(e.keywords=p.data.suggest_search_words.default_search_words))})},t=s=>{e.cart_count=s},h=s=>{localStorage.setItem("nid",s.nav_id),C(s.nav_url,o),V()};const y=()=>{let s={key_type:e.key_type,keywords:e.keywords};o.push({path:"/product/lists",query:s})},A=s=>{b.value=s};let N=()=>{let s={key_type:e.key_type||1,keywords:e.keywords};o.push({path:"/product/lists",query:s})};me(()=>{e.routeUrl=u.fullPath;const s=d.getIndexLayout;console.info("watchEffect : getIndexLayout"),s.page_pc_nav.length>0&&(e.headerNav=s.page_pc_nav),s.category_nav.length>0&&(e.productCategoryNav=s.category_nav),document.title=="undefined"&&(document.title=d.info.site_name),e.keywords=u.query.keywords,e.key_type=u.query.key_type||1,e.current_language=localStorage.getItem("current_language")||"中文"});let D=()=>{e.isShow=!0},M=()=>{e.isShow=!1};const J=()=>{e.isSubsite=!0},j=()=>{e.isSubsite=!1},Q=()=>{localStorage.setItem("pop_pc_enable","1")},G=(s,p,Y,T,Z,$)=>{console.log(T),T?window.location.href="//"+T:(x(s,p,Y,Z,$),location.reload())},O=()=>{e.isTopImg=!1,localStorage.setItem("isTopImg","1")},W=()=>{e.isSite=!0},X=()=>{e.isSite=!1};return he(()=>{e.routeUrl=u.fullPath,q(),d.info.index_pop_pc_enable&&d.info.index_pop_pc_img&&!localStorage.getItem("pop_pc_enable")&&(e.dialogVisiblePop=!0),localStorage.getItem("isTopImg")&&(e.isTopImg=!1)}),{activeIndex:r,counter:d,logouts:U,closePop:Q,search:N,handleEnterKey:y,enter:D,leave:M,getHeader:fe,cartCount:t,showSubsite:J,hideSubsite:j,setSiteId:G,hideTopImg:O,showSite:W,hideSite:X,getCustomSite:ye,setNid:h,inputKeywords:A,navLists:S,openNav:I,closeNav:V,...ve(e)}}};const He={id:"header",class:"header"},Ue={class:"container main-header clearfix"},qe={style:{float:"left"}},Te={class:"site-logo"},Pe=["src"],ze={class:"slogan"},Ae={class:"search-wrapper"},De={class:"form-inline",method:"get"},Ke={class:"mt-4"},Re={key:0,class:"search-hot-list-box hidden-xs"},Fe={class:"search-hot-list"},Me={class:"container",style:{position:"relative"}},Je={class:"nav-list",ref:"navLists"},je={class:"category-menu"},Qe={key:0},Ge=a("div",{class:"menu-bar"},null,-1),Oe={key:0,class:"menu-icon"},We=["src"],Xe={class:"menu-name"},Ye={class:"name"},Ze={class:"right-icon"},$e={key:1,class:"category-sub-box"},eo={class:"sub-box"},oo={class:"left-box"},to={class:"right-box"},so={class:"pop-pc"};function ao(o,r,u,e,b,S){const _=k("router-link"),L=k("Search"),f=Ce,x=Ie,H=Ve,z=k("ShoppingTrolley"),C=Be,d=k("ArrowRight"),U=ee,I=Ee,V=Ne,q=se;return l(),c(m,null,[a("div",He,[a("div",Ue,[a("div",qe,[n(_,{to:"/index"},{default:i(()=>[a("div",Te,[a("img",{src:e.counter.info.site_pc_logo,width:"192"},null,8,Pe)]),a("div",ze,g(e.counter.info.site_name),1)]),_:1})]),a("div",Ae,[a("div",De,[a("div",Ke,[n(H,{modelValue:o.keywords,"onUpdate:modelValue":r[0]||(r[0]=t=>o.keywords=t),size:"large",placeholder:o.$t("请输入搜索关键词"),class:"input-with-select",onInput:e.inputKeywords,onKeyup:ke(e.handleEnterKey,["enter"])},{append:i(()=>[n(x,{size:"small",onClick:e.search},{default:i(()=>[n(f,{style:{"font-size":"20px"}},{default:i(()=>[n(L,{color:"#fff"})]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","placeholder","onInput","onKeyup"])])]),o.search_hot_words?(l(),c("div",Re,[a("ul",Fe,[(l(!0),c(m,null,w(o.search_hot_words,(t,h)=>(l(),c("li",{key:h},[n(_,{to:{path:"/product/lists",query:{keywords:t}}},{default:i(()=>[B(g(t),1)]),_:2},1032,["to"])]))),128))])])):v("",!0)]),a("div",{class:"topbar-cart",id:"J_miniCartTrigger",onMouseenter:r[1]||(r[1]=(...t)=>e.enter&&e.enter(...t)),onMouseleave:r[2]||(r[2]=(...t)=>e.leave&&e.leave(...t))},[n(_,{rel:"nofollow",class:"cart-mini",id:"J_miniCartBtn",to:"/cart/order"},{default:i(()=>[n(f,{class:"cart-img"},{default:i(()=>[n(z)]),_:1}),B(" "+g(o.$t("我的购物车"))+"   ",1)]),_:1})],32)])]),a("div",Me,[a("div",{class:P(o.up_nav?"header-menu":"header-menu overflow")},[a("ul",Je,[a("li",{class:P(o.$route.path=="/index"||o.isHome?"active":"no-active"),onClick:r[3]||(r[3]=()=>{o.isHome=!o.isHome})},g(o.$t("全部分类")),3),(l(!0),c(m,null,w(o.headerNav,(t,h)=>(l(),c(m,{key:h},[t.nav_position==1?(l(),c("li",{key:0,class:P({selected:o.routeUrl!="/index"&&t.nav_url==o.routeUrl})},[n(C,{href:"javascript:void(0)",onClick:y=>e.setNid(t),underline:!1},{default:i(()=>[a("span",null,g(t.nav_title),1)]),_:2},1032,["onClick"])],2)):v("",!0)],64))),128))],512)],2),a("div",{class:"container category-box",style:be({display:o.isHome?"block":"none"})},[a("div",je,[o.productCategoryNav.length>0?(l(),c("ul",Qe,[(l(!0),c(m,null,w(o.productCategoryNav,(t,h)=>(l(),c("li",{key:h},[Ge,t.category_nav_image?(l(),c("div",Oe,[a("img",{src:t.category_nav_image},null,8,We)])):v("",!0),a("div",Xe,[n(_,{to:{path:"/product/lists",query:{category_id:t.category_ids}}},{default:i(()=>[a("span",Ye,g(t.category_nav_name),1)]),_:2},1032,["to"])]),a("div",Ze,[n(f,null,{default:i(()=>[n(d)]),_:1})]),t.category_nav_type==1?(l(),c("div",$e,[t.product_category_tree!=null?(l(!0),c(m,{key:0},w(t.product_category_tree.children,(y,A)=>(l(),c("div",eo,[a("div",oo,[n(_,{to:{path:"/product/lists",query:{category_id:y.category_id}},class:"name"},{default:i(()=>[B(g(y.category_name)+" ",1),n(f,null,{default:i(()=>[n(d)]),_:1})]),_:2},1032,["to"])]),a("div",to,[(l(!0),c(m,null,w(y.children,(N,D)=>(l(),Se(_,{to:{path:"/product/lists",query:{category_id:N.category_id}},class:"name"},{default:i(()=>[B(g(N.category_name),1)]),_:2},1032,["to"]))),256))])]))),256)):v("",!0)])):v("",!0)]))),128))])):v("",!0)])],4)]),n(I,{modelValue:o.dialogVisible,"onUpdate:modelValue":r[5]||(r[5]=t=>o.dialogVisible=t),width:"840px",draggable:""},{default:i(()=>[n(U,{onCancel:r[4]||(r[4]=t=>o.dialogVisible=!1)})]),_:1},8,["modelValue"]),n(I,{modelValue:o.dialogVisiblePop,"onUpdate:modelValue":r[6]||(r[6]=t=>o.dialogVisiblePop=t),draggable:"",onClose:e.closePop},{default:i(()=>[a("div",so,[n(C,{href:e.counter.info.index_pop_pc_url},{default:i(()=>[n(V,{src:e.counter.info.index_pop_pc_img},null,8,["src"])]),_:1},8,["href"])])]),_:1},8,["modelValue","onClose"]),n(q)],64)}const no=F(xe,[["render",ao]]);const ro={};function lo(o,r){const u=oe,e=no,b=k("router-view"),S=te;return l(),c(m,null,[n(u),n(e),n(b),n(S)],64)}const Bo=F(ro,[["render",lo],["__scopeId","data-v-50860f0f"]]);export{Bo as default};
