import{a0 as X,dL as Y,b as Z,S as ee,g as te,u as oe,f as se,$ as H,r as T,i as ae,t as le,dM as ne,T as x,dN as ie,dO as ce,a5 as re,dP as de,n as U,p as u,v as m,x as o,y as e,z as t,A as a,O as Q,F as I,I as V,E as A,J as ue,D as g,C as P,K as _e,V as pe,W as me}from"./index-21964c78.js";import{v as he}from"./loading-9a2abf10.js";import{E as fe}from"./drawer-d290d7dd.js";import{E as ge}from"./overlay-b290a267.js";import{E as ve}from"./image-viewer-dd6920ac.js";import{b as ye,d as Ce,a as ke,c as Fe}from"./main-34db54b3.js";import{E as Ee}from"./input-number-2592ba06.js";/* empty css              */import{_ as be}from"./MsActivityTag-20637b5a.js";import{E as Ie}from"./tag-b8b29d1f.js";import{E as De}from"./row-d248ec80.js";import{E as Ve}from"./col-d6038888.js";import{E as $e}from"./checkbox-85319853.js";import{E as we}from"./empty-dc50944b.js";/* empty css               *//* empty css             */import{_ as xe}from"./_plugin-vue_export-helper-c27b6911.js";import"./refs-1278d799.js";import"./isUndefined-aa0326a0.js";import"./debounce-6ea0a711.js";import"./index-a2686495.js";import"./constants-2604e35b.js";import"./isEqual-3f4e7b62.js";import"./_Uint8Array-4a48d71f.js";import"./hasIn-54cf4aec.js";import"./flatten-3a6a3668.js";const Ae={name:"order",components:{CirclePlusFilled:X,Finished:Y,ArrowRight:Z,LocationFilled:ee},setup(){const{setCartNum:s}=te(),h=oe();let i=se({value:3,storeItems:[{items:[{cart_select:0}]}],cartInfo:{},goodsTotal:0,cart_id:[],centerDialogVisible:!1,item_id:0,loading:!0,selecInfo:[],actId:0,action:"",msg:H("确定删除商品？"),activeName:T(1601),selectedItemJson:[]}),d=T(!1),B=T(!0),z=T(!1),y=()=>{ne({}).then(r=>{if(r.status==200){let v=r.data;if(v.items&&v.items.length>0){i.storeItems=v.items,i.cartInfo=v,d.value=!0,console.log(i.cartInfo);var p=[];for(var E in v.items){var C=v.items[E].items;C.length;var N=0;v.items[E].cart_select=!0;for(var b in C)C[b].cart_select&&(N=N+C[b].cart_quantity,p.push(C[b].item_id+"|"+C[b].cart_quantity+"|"+C[b].cart_id))}i.selectedItemJson=p}else d.value=!1}else d.value=!1;s(),B.value=!1,i.loading=!1,console.log(B)})},q=c=>{F(c?{cart_select:1,action:"all"}:{cart_select:0,action:"all"})},k=()=>{i.selectedItemJson.length>0?h.push({path:"/cart/checkout",query:{cart_id:i.selectedItemJson.join(",")}}):x.error(H("请选择需要结算商品！"))},L=c=>{let r=i.storeItems[c].cart_select==1?0:1,p=i.storeItems[c].store_id;F({cart_select:r,store_id:p})},D=(c,r)=>{F({cart_select:c,cart_id:r})},F=c=>{ie(c).then(r=>{r.status==200?y():x.error(r.msg)})},$=(c,r)=>{ce({cart_id:c,cart_quantity:r}).then(E=>{E.status==200?y():x.error(E.msg)})};const l=c=>{let r={item_id:c,cart_quantity:1,cart_type:1,activity_id:i.actId};re(r).then(p=>{p.status==200?y():x.error(p.msg),z.value=!1})};let w=c=>{i.item_id=c,i.centerDialogVisible=!0},R=c=>{c==1?i.action="all":(i.action="fav",i.msg=H("确认移入收藏夹？")),i.centerDialogVisible=!0},S=c=>{let r={};i.action!=""?r.action=i.action:r.cart_id=i.item_id,console.log(i.item_id),i.centerDialogVisible=!1,de(r).then(p=>{p.status==200?y():x.error(p.msg)})};const M=(c,r)=>{i.selecInfo=c,i.actId=r,console.log(c),z.value=!0},J=c=>{y()};return ae(()=>{y()}),{getCart:y,handleCheckAllChange:q,CartSel:F,handleCheckStoreChange:L,handleCheckItemChange:D,editQuantity:$,remove:S,centerDialog:w,addCartItem:l,drawerShow:M,isData:d,isPage:B,removeAll:R,gopay:k,drawer:z,handleClick:J,...le(i)}}},Be=""+new URL("xiajia-fe2dff02.png",import.meta.url).href;const G=s=>(pe("data-v-ece2e64b"),s=s(),me(),s),ze={style:{background:"#F6F6F6"}},qe={class:"container"},Se={class:"breadcrumb clearfix"},Je={class:"space-icon"},Ne=["title"],Te={class:"page-main"},Ue={class:""},Pe={key:1,id:"J_cartBox"},Le={class:"top-text-center"},Re=G(()=>o("div",{class:""},null,-1)),Me={class:"top-text-center"},je={class:"top-text-center"},He={class:"top-text-center"},Qe={class:"top-text-center"},Ge={class:"top-text-center"},Oe={key:1,alt:"",src:Be,width:"80",height:"80"},Ke=["src"],We={class:"product-name-box"},Xe={class:"product-name"},Ye={class:"product-item-name-text"},Ze={class:"product-number-text"},et={class:""},tt={class:"col col-price"},ot={class:""},st={class:"clearfix J_changeGoodsNum"},at={class:""},lt={class:"col col-price"},nt=["onClick"],it={class:""},ct=["src"],rt={class:"",style:{width:"100%"}},dt={class:"product-name"},ut={class:""},_t={class:"col col-price"},pt={class:""},mt={class:"clearfix J_changeGoodsNum"},ht={class:""},ft={class:"top-text-center",style:{"font-size":"18px"}},gt={class:"xz-cart-total",style:{"font-size":"18px"}},vt={class:"zj-total-price",style:{position:"relative",left:"134px"}},yt={id:"J_cartTotalPrice",style:{position:"relative",top:"4px","font-family":"Helvetica-Bold, Helvetica"}},Ct={id:"J_cartTotalPointBox",style:{float:"right",display:"none"}},kt=G(()=>o("em",{id:"J_cartTotalPoint"},"0",-1)),Ft={class:"remove-product-text"},Et={class:"dialog-footer"},bt={key:0,class:"site-topbar"},It={class:"cart-list"},Dt=["onClick"],Vt={class:"thumb"},$t={class:"name"};function wt(s,h,i,d,B,z){const y=U("LocationFilled"),q=ue,k=U("router-link"),L=U("ArrowRight"),D=_e,F=we,$=$e,l=Ve,w=De,R=Ce,S=Ie,M=be,J=Ee,c=U("Finished"),r=ke,p=Fe,E=ye,C=ge,N=ve,b=fe,v=he;return u(),m("div",ze,[o("div",qe,[o("div",Se,[e(q,{class:"location"},{default:t(()=>[e(y)]),_:1}),e(k,{to:"/index",class:"home",title:s.$t("首页")},{default:t(()=>[g(a(s.$t("首页")),1)]),_:1},8,["title"]),o("span",Je,[e(q,null,{default:t(()=>[e(L)]),_:1})]),o("span",{class:"home cur",title:s.$t("购物车")},a(s.$t("购物车")),9,Ne)])]),o("div",Te,[Q((u(),m("div",Ue,[d.isPage?A("",!0):(u(),m(I,{key:0},[d.isData?(u(),m("div",Pe,[Q((u(),V(E,null,{default:t(()=>[e(R,{id:"head",style:{"margin-bottom":"27px"}},{default:t(()=>[e(w,{id:"noborder"},{default:t(()=>[e(l,{span:1,class:"all-checkbox"},{default:t(()=>[e($,{size:"large",onChange:d.handleCheckAllChange},null,8,["onChange"])]),_:1}),e(l,{style:{height:"10px"},span:1},{default:t(()=>[o("div",Le,a(s.$t("全选")),1)]),_:1}),e(l,{style:{height:"10px"},span:4},{default:t(()=>[Re]),_:1}),e(l,{span:6},{default:t(()=>[o("div",Me,a(s.$t("商品信息")),1)]),_:1}),e(l,{span:5},{default:t(()=>[o("div",je,a(s.$t("规格型号")),1)]),_:1}),e(l,{span:3},{default:t(()=>[o("div",He,a(s.$t("数量")),1)]),_:1}),e(l,{span:3},{default:t(()=>[o("div",Qe,a(s.$t("单价")),1)]),_:1}),e(l,{span:1},{default:t(()=>[o("div",Ge,a(s.$t("操作")),1)]),_:1})]),_:1})]),_:1}),e(r,null,{default:t(()=>[(u(!0),m(I,null,P(s.storeItems,(f,j)=>(u(),V(w,{key:j,style:{"margin-bottom":"40px"}},{default:t(()=>[(u(!0),m(I,null,P(f.items,(n,O)=>(u(),m(I,{key:O},[e(l,{span:1,class:"col-cent"},{default:t(()=>[n.is_on_sale?(u(),V($,{key:0,modelValue:n.cart_select,"onUpdate:modelValue":_=>n.cart_select=_,size:"large",onChange:_=>d.handleCheckItemChange(n.cart_select,n.cart_id)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(u(),m("img",Oe))]),_:2},1024),e(l,{span:3,class:"col-cent"},{default:t(()=>[o("div",null,[e(k,{to:{path:"/product/detail",query:{item_id:n.item_id}},class:"item_link"},{default:t(()=>[o("img",{alt:"",src:n.product_image,width:"140",height:"117"},null,8,Ke)]),_:2},1032,["to"])])]),_:2},1024),e(l,{span:7,class:"col-cent col-product-name"},{default:t(()=>[o("div",We,[o("h3",Xe,[e(k,{to:{path:"/product/detail",query:{item_id:n.item_id}},class:"item_link"},{default:t(()=>[n.show_typename?(u(),V(S,{key:0,class:"mx-1",effect:"dark",type:"danger",size:"small",style:{height:"20px","line-height":"17px"}},{default:t(()=>[g(a(n.show_typename),1)]),_:2},1024)):A("",!0),o("div",Ye,[n.activity_info!=null?(u(),V(M,{key:0,typeId:n.activity_info.activity_type_id},null,8,["typeId"])):A("",!0),g(" "+a(n.product_item_name),1)])]),_:2},1032,["to"])]),o("div",Ze,a(s.$t("商品编号："))+a(n.product_id),1)])]),_:2},1024),e(l,{span:5,class:"col-cent notchange"},{default:t(()=>[o("div",et,[o("div",tt,a(n.item_number),1)])]),_:2},1024),e(l,{span:3,class:"col-cent"},{default:t(()=>[o("div",ot,[o("div",st,[e(J,{min:1,step:1,max:n.item_quantity,size:"small",modelValue:n.cart_quantity,"onUpdate:modelValue":_=>n.cart_quantity=_,onChange:_=>d.editQuantity(n.cart_id,n.cart_quantity)},null,8,["max","modelValue","onUpdate:modelValue","onChange"])])])]),_:2},1024),e(l,{span:3,class:"col-cent"},{default:t(()=>[o("div",at,[o("div",lt,a(s.$t("￥"))+a(n.item_sale_price.toFixed(2)),1)])]),_:2},1024),e(l,{span:2,class:"col-cent"},{default:t(()=>[o("div",{class:"col-item-remove",onClick:_=>d.centerDialog(n.cart_id)},a(s.$t("删除")),9,nt)]),_:2},1024),n.pulse_gift_cart?(u(!0),m(I,{key:0},P(n.pulse_gift_cart,(_,K)=>(u(),m(I,{key:K},[e(l,{span:1,class:"col-cent"},{default:t(()=>[e(c,{style:{width:"2em",height:"2em",color:"#ff6700"}})]),_:1}),e(l,{span:3,class:"col-cent"},{default:t(()=>[o("div",it,[e(k,{to:{path:"/product/detail",query:{item_id:_.item_id}},class:"item_link"},{default:t(()=>[o("img",{alt:"",src:_.product_image,width:"80",height:"80"},null,8,ct)]),_:2},1032,["to"])])]),_:2},1024),e(l,{span:6,class:"col-cent col-product-name"},{default:t(()=>[o("div",rt,[o("h3",dt,[e(k,{to:{path:"/product/detail",query:{item_id:_.item_id}},class:"item_link"},{default:t(()=>[e(S,{class:"mx-1",effect:"dark",type:"danger",size:"small",style:{height:"20px","line-height":"17px"}},{default:t(()=>[g(a(s.$t("赠品")),1)]),_:1}),g(" "+a(_.product_item_name),1)]),_:2},1032,["to"])])])]),_:2},1024),e(l,{span:3,class:"col-cent"},{default:t(()=>[o("div",ut,[o("div",_t,a(s.$t("￥"))+a(n.item_sale_price),1)])]),_:2},1024),e(l,{span:5,class:"col-cent"},{default:t(()=>[o("div",pt,[o("div",mt,[e(J,{min:1,max:_.maxnum,size:"small",modelValue:_.num,"onUpdate:modelValue":W=>_.num=W},null,8,["max","modelValue","onUpdate:modelValue"])])])]),_:2},1024),e(l,{span:3,class:"col-cent"},{default:t(()=>[o("div",ht,a(s.$t("￥"))+a(n.subtotal),1)]),_:2},1024)],64))),128)):A("",!0)],64))),128))]),_:2},1024))),128))]),_:1}),e(p,{class:"el-footer"},{default:t(()=>[e(w,{class:"footer-el-row"},{default:t(()=>[e(l,{span:1,class:"all-checkbox"},{default:t(()=>[e($,{size:"large",onChange:d.handleCheckAllChange},null,8,["onChange"])]),_:1}),e(l,{span:1},{default:t(()=>[o("div",ft,a(s.$t("全选")),1)]),_:1}),e(l,{span:1},{default:t(()=>[o("div",{class:"top-text-center",style:{"font-size":"18px"},onClick:h[0]||(h[0]=f=>d.removeAll(1))},a(s.$t("删除")),1)]),_:1}),e(l,{span:4}),e(l,{span:2,class:"footer-el-center",style:{"line-height":"63px"}}),e(l,{span:2,class:"footer-el-center",style:{"line-height":"63px"}},{default:t(()=>[o("span",gt,[g(a(s.$t("已优惠"))+" ",1),o("span",null,a(s.$t("￥"))+" "+a(s.goodsTotal?s.goodsTotal.toFixed(2):0),1)])]),_:1}),e(l,{style:{"line-height":"63px"},span:6,class:"footer-el-center"},{default:t(()=>[o("span",vt,[g(a(s.$t("总计："))+" ",1),o("span",yt,a(s.$t("￥"))+" "+a(s.cartInfo.order_money_amount.toFixed(2)),1),o("p",Ct,[g(" + "+a(s.$t("积分"))+" ",1),kt])])]),_:1}),e(D,{onClick:h[1]||(h[1]=f=>d.gopay()),id:"gopay",style:{width:"176px","border-radius":"5px","font-size":"21px",height:"59px"},type:"danger"},{default:t(()=>[g(a(s.$t("立即支付")),1)]),_:1})]),_:1})]),_:1})]),_:1})),[[v,s.loading]])])):(u(),V(F,{key:0,description:s.$t("马上去购物")},{default:t(()=>[e(k,{to:{path:"/product/lists"}},{default:t(()=>[e(D,{type:"primary"},{default:t(()=>[g(a(s.$t("马上去购物")),1)]),_:1})]),_:1})]),_:1},8,["description"]))],64)),e(C,{modelValue:s.centerDialogVisible,"onUpdate:modelValue":h[3]||(h[3]=f=>s.centerDialogVisible=f),width:"545px",center:""},{footer:t(()=>[o("span",Et,[e(D,{class:"form-item-btn-style form-item-canal-style",onClick:h[2]||(h[2]=f=>s.centerDialogVisible=!1),type:"primary"},{default:t(()=>[g(a(s.$t("取消")),1)]),_:1}),e(D,{class:"form-item-btn-style form-item-confrim-style",onClick:d.remove,type:"primary"},{default:t(()=>[g(a(s.$t("确认")),1)]),_:1},8,["onClick"])])]),default:t(()=>[o("span",Ft,a(s.$t(s.msg)),1)]),_:1},8,["modelValue"]),e(b,{modelValue:d.drawer,"onUpdate:modelValue":h[4]||(h[4]=f=>d.drawer=f),title:s.$t("选择商品"),direction:"rtl"},{default:t(()=>[s.selecInfo?(u(),m("div",bt,[o("ul",It,[(u(!0),m(I,null,P(s.selecInfo,(f,j)=>(u(),m("li",{key:j},[o("div",{class:"cart-item clearfix first",onClick:n=>d.addCartItem(f.item_id)},[o("div",Vt,[e(N,{src:f.product_image,fit:"cover",style:{width:"80px",height:"80px"}},null,8,["src"])]),o("div",$t,a(f.product_item_name),1)],8,Dt)]))),128))])])):A("",!0)]),_:1},8,["modelValue","title"])])),[[v,d.isPage]])])])}const oo=xe(Ae,[["render",wt],["__scopeId","data-v-ece2e64b"]]);export{oo as default};
