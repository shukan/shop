import{P as w,r as k,f as A,$ as c,w as N,T as B,a6 as D,p as s,v,x as d,A as r,y as l,z as u,G as h,D as $,F as E,I as q,E as p,L as T,K as R}from"./index-21964c78.js";import{E as G,a as J}from"./form-item-8d3c5b0e.js";/* empty css               *//* empty css              *//* empty css                    */import{E as M,a as S}from"./radio-30ecb740.js";import{b as z,c as L,d as K}from"./invoice-b9863122.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";const j=w({props:{invoiceId:{type:Number,default:0}},setup(e,n){const f={...n},C=k();let i=A({user_invoice_id:0,invoice_title:"",invoice_company_code:"",invoice_phone:"",invoice_bankname:"",invoice_bankaccount:"",invoice_contact_mobile:"",invoice_contact_email:"",invoice_address:"",invoice_type:1,invoice_content:"",invoice_is_default:0,invoice_kind:1,invoice_is_company:"0",invoice_contact_name:""});const F=A({invoice_is_company:[{required:!0,message:c("请选择抬头类型"),trigger:"blur"}],invoice_title:[{required:!0,message:c("请输入发票抬头"),trigger:"blur"}],invoice_company_code:[{required:!0,message:c("请输入纳税人识别号"),trigger:"blur"}],invoice_phone:[{required:!0,message:c("请输入注册电话"),trigger:"blur"}],invoice_bankname:[{required:!0,message:c("请输入开户银行"),trigger:"blur"}],invoice_bankaccount:[{required:!0,message:c("请输入银行账号"),trigger:"blur"}]});let t=k(!1),m=k(!1);const b=o=>{i.invoice_type=o,o==2?(i.invoice_is_company="1",m.value=!0):m.value=!1,console.log(i.invoice_type)},_=o=>{console.log(o),i.invoice_is_company=o},y=o=>{o&&o.resetFields()},g=()=>{L(i).then(o=>{o.status==200?D.alert(c("修改成功!"),c("成功"),{confirmButtonText:c("确定"),center:!0,callback:V=>{f.emit("update",{})}}):B.error(o.mag),t.value=!1})},a=()=>{K(i).then(o=>{o.status==200?D.alert(c("添加成功!"),c("成功"),{confirmButtonText:c("确定"),center:!0,callback:V=>{f.emit("update",{})}}):B.error(o.mag),t.value=!1})},U=async o=>{o&&await o.validate((V,I)=>{V?(console.log("submit!"),t.value=!0,i.user_invoice_id?g():a()):console.log("error submit!",I)})};return N(()=>{i.user_invoice_id=e.invoiceId,e.invoiceId&&z({user_invoice_id:e.invoiceId}).then(o=>{o.status==200?(i.invoice_address=o.data.invoice_address,i.invoice_bankaccount=o.data.invoice_bankaccount,i.invoice_bankname=o.data.invoice_bankname,i.invoice_type=o.data.invoice_type,i.invoice_company_code=o.data.invoice_company_code,i.invoice_contact_email=o.data.invoice_contact_email,i.invoice_contact_mobile=o.data.invoice_contact_mobile,i.invoice_content=o.data.invoice_content,i.invoice_is_default=o.data.invoice_is_default,i.invoice_kind=o.data.invoice_kind,i.invoice_phone=o.data.invoice_phone,i.invoice_title=o.data.invoice_title,i.invoice_is_company=o.data.invoice_is_company?"1":"0",i.user_invoice_id=o.data.user_invoice_id,i.invoice_contact_name=o.data.invoice_contact_name):B.error(o.msg)})}),{selectCategory:b,changeSelectType:_,resetForm:y,submitForm:U,loading:t,form:i,rules:F,ruleFormRef:C,disabled:m}}});const H={class:"mod_box",id:"profile-manage"},O={class:"mod_box_hd"},Q={class:"mod_box_edit"},W={class:"J_optionList options options-list clearfix"};function X(e,n,f,C,i,F){const t=G,m=M,b=S,_=T,y=R,g=J;return s(),v("div",H,[d("div",O,[d("h4",null,r(e.$t("编辑发票内容")),1)]),d("div",Q,[l(g,{"label-position":"left",ref:"ruleFormRef",model:e.form,rules:e.rules,"label-width":"170px"},{default:u(()=>[l(t,{label:e.$t("发票类型"),prop:"invoice_title"},{default:u(()=>[d("ul",W,[d("li",{class:h(["J_option",{selected:e.form.invoice_type==1}]),onClick:n[0]||(n[0]=a=>e.selectCategory(1))},r(e.$t("普通发票")),3),d("li",{class:h(["J_option",{selected:e.form.invoice_type==2}]),onClick:n[1]||(n[1]=a=>e.selectCategory(2))},r(e.$t("增值税专用发票")),3)])]),_:1},8,["label"]),l(t,{label:e.$t("抬头类型"),prop:"invoice_is_company"},{default:u(()=>[l(b,{modelValue:e.form.invoice_is_company,"onUpdate:modelValue":n[2]||(n[2]=a=>e.form.invoice_is_company=a),onChange:e.changeSelectType},{default:u(()=>[l(m,{label:"0",disabled:e.disabled},{default:u(()=>[$(r(e.$t("个人")),1)]),_:1},8,["disabled"]),l(m,{label:"1"},{default:u(()=>[$(r(e.$t("企业")),1)]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1},8,["label"]),l(t,{label:e.$t("发票抬头"),prop:"invoice_title"},{default:u(()=>[l(_,{modelValue:e.form.invoice_title,"onUpdate:modelValue":n[3]||(n[3]=a=>e.form.invoice_title=a)},null,8,["modelValue"])]),_:1},8,["label"]),e.form.invoice_type==1?(s(),v(E,{key:0},[e.form.invoice_is_company==1?(s(),q(t,{key:0,label:e.$t("纳税人识别号"),prop:"invoice_company_code"},{default:u(()=>[l(_,{modelValue:e.form.invoice_company_code,"onUpdate:modelValue":n[4]||(n[4]=a=>e.form.invoice_company_code=a)},null,8,["modelValue"])]),_:1},8,["label"])):p("",!0)],64)):(s(),v(E,{key:1},[e.form.invoice_is_company==1?(s(),v(E,{key:0},[l(t,{label:e.$t("纳税人识别号"),prop:"invoice_company_code"},{default:u(()=>[l(_,{modelValue:e.form.invoice_company_code,"onUpdate:modelValue":n[5]||(n[5]=a=>e.form.invoice_company_code=a)},null,8,["modelValue"])]),_:1},8,["label"]),l(t,{label:e.$t("注册电话"),prop:"invoice_phone"},{default:u(()=>[l(_,{modelValue:e.form.invoice_phone,"onUpdate:modelValue":n[6]||(n[6]=a=>e.form.invoice_phone=a)},null,8,["modelValue"])]),_:1},8,["label"]),l(t,{label:e.$t("注册地址"),prop:"invoice_address"},{default:u(()=>[l(_,{modelValue:e.form.invoice_address,"onUpdate:modelValue":n[7]||(n[7]=a=>e.form.invoice_address=a)},null,8,["modelValue"])]),_:1},8,["label"]),l(t,{label:e.$t("开户银行"),prop:"invoice_bankname"},{default:u(()=>[l(_,{modelValue:e.form.invoice_bankname,"onUpdate:modelValue":n[8]||(n[8]=a=>e.form.invoice_bankname=a)},null,8,["modelValue"])]),_:1},8,["label"]),l(t,{label:e.$t("银行账号"),prop:"invoice_bankaccount"},{default:u(()=>[l(_,{modelValue:e.form.invoice_bankaccount,"onUpdate:modelValue":n[9]||(n[9]=a=>e.form.invoice_bankaccount=a)},null,8,["modelValue"])]),_:1},8,["label"]),p("",!0),p("",!0),p("",!0)],64)):p("",!0)],64)),l(t,null,{default:u(()=>[l(y,{type:"primary",onClick:n[13]||(n[13]=a=>e.submitForm(e.ruleFormRef)),loading:e.loading},{default:u(()=>[$(r(e.$t("保存")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])}const le=P(j,[["render",X],["__scopeId","data-v-699a0313"]]);export{le as _};
