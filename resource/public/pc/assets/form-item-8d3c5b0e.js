import{az as Fe,cz as We,aC as de,ce as ir,aF as ue,aE as je,r as W,a7 as C,P as K,aK as Ue,aL as _e,aP as re,aQ as ar,bM as Ve,f as Be,t as Je,dm as Pe,p as ce,v as $e,b6 as Q,G,aR as E,aU as Ge,c3 as ze,bC as te,cd as pe,aY as sr,i as ke,bd as He,cw as or,bX as lr,y as ne,F as fr,aW as Ke,bL as dr,bG as ur,dp as cr,aO as Oe,dq as oe,z as le,I as pr,ak as mr,H as Ce,D as gr,A as Se,E as Ae,x as xe,dr as vr,a_ as hr,c1 as yr}from"./index-21964c78.js";import{c as me}from"./castArray-18b00898.js";import{b as br}from"./_baseClone-42b68cca.js";var Fr=4;function De(i){return br(i,Fr)}const _r=Fe({size:{type:String,values:We},disabled:Boolean}),Pr=Fe({..._r,model:Object,rules:{type:de(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),wr={validate:(i,e,r)=>(ir(i)||ue(i))&&je(e)&&ue(r)};function Er(){const i=W([]),e=C(()=>{if(!i.value.length)return"0";const s=Math.max(...i.value);return s?`${s}px`:""});function r(s){const a=i.value.indexOf(s);return a===-1&&e.value,a}function n(s,a){if(s&&a){const o=r(a);i.value.splice(o,1,s)}else s&&i.value.push(s)}function t(s){const a=r(s);a>-1&&i.value.splice(a,1)}return{autoLabelWidth:e,registerLabelWidth:n,deregisterLabelWidth:t}}const Y=(i,e)=>{const r=me(e);return r.length>0?i.filter(n=>n.prop&&r.includes(n.prop)):i},Ir="ElForm",Or=K({name:Ir}),Cr=K({...Or,props:Pr,emits:wr,setup(i,{expose:e,emit:r}){const n=i,t=[],s=Ue(),a=_e("form"),o=C(()=>{const{labelPosition:m,inline:l}=n;return[a.b(),a.m(s.value||"default"),{[a.m(`label-${m}`)]:m,[a.m("inline")]:l}]}),d=m=>{t.push(m)},b=m=>{m.prop&&t.splice(t.indexOf(m),1)},p=(m=[])=>{n.model&&Y(t,m).forEach(l=>l.resetField())},h=(m=[])=>{Y(t,m).forEach(l=>l.clearValidate())},F=C(()=>!!n.model),I=m=>{if(t.length===0)return[];const l=Y(t,m);return l.length?l:[]},O=async m=>y(void 0,m),u=async(m=[])=>{if(!F.value)return!1;const l=I(m);if(l.length===0)return!0;let v={};for(const P of l)try{await P.validate("")}catch(w){v={...v,...w}}return Object.keys(v).length===0?!0:Promise.reject(v)},y=async(m=[],l)=>{const v=!ze(l);try{const P=await u(m);return P===!0&&(l==null||l(P)),P}catch(P){if(P instanceof Error)throw P;const w=P;return n.scrollToError&&f(Object.keys(w)[0]),l==null||l(!1,w),v&&Promise.reject(w)}},f=m=>{var l;const v=Y(t,m)[0];v&&((l=v.$el)==null||l.scrollIntoView(n.scrollIntoViewOptions))};return re(()=>n.rules,()=>{n.validateOnRuleChange&&O().catch(m=>ar())},{deep:!0}),Ve(Pe,Be({...Je(n),emit:r,resetFields:p,clearValidate:h,validateField:y,addField:d,removeField:b,...Er()})),e({validate:O,validateField:y,resetFields:p,clearValidate:h,scrollToField:f}),(m,l)=>(ce(),$e("form",{class:G(E(o))},[Q(m.$slots,"default")],2))}});var Sr=Ge(Cr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function j(){return j=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},j.apply(this,arguments)}function Ar(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,H(i,e)}function ge(i){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ge(i)}function H(i,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},H(i,e)}function xr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ee(i,e,r){return xr()?ee=Reflect.construct.bind():ee=function(t,s,a){var o=[null];o.push.apply(o,s);var d=Function.bind.apply(t,o),b=new d;return a&&H(b,a.prototype),b},ee.apply(null,arguments)}function Dr(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function ve(i){var e=typeof Map=="function"?new Map:void 0;return ve=function(n){if(n===null||!Dr(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,t)}function t(){return ee(n,arguments,ge(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),H(t,n)},ve(i)}var Rr=/%[sdj%]/g,Mr=function(){};function he(i){if(!i||!i.length)return null;var e={};return i.forEach(function(r){var n=r.field;e[n]=e[n]||[],e[n].push(r)}),e}function R(i){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var t=0,s=r.length;if(typeof i=="function")return i.apply(null,r);if(typeof i=="string"){var a=i.replace(Rr,function(o){if(o==="%%")return"%";if(t>=s)return o;switch(o){case"%s":return String(r[t++]);case"%d":return Number(r[t++]);case"%j":try{return JSON.stringify(r[t++])}catch{return"[Circular]"}break;default:return o}});return a}return i}function qr(i){return i==="string"||i==="url"||i==="hex"||i==="email"||i==="date"||i==="pattern"}function S(i,e){return!!(i==null||e==="array"&&Array.isArray(i)&&!i.length||qr(e)&&typeof i=="string"&&!i)}function Nr(i,e,r){var n=[],t=0,s=i.length;function a(o){n.push.apply(n,o||[]),t++,t===s&&r(n)}i.forEach(function(o){e(o,a)})}function Re(i,e,r){var n=0,t=i.length;function s(a){if(a&&a.length){r(a);return}var o=n;n=n+1,o<t?e(i[o],s):r([])}s([])}function Lr(i){var e=[];return Object.keys(i).forEach(function(r){e.push.apply(e,i[r]||[])}),e}var Me=function(i){Ar(e,i);function e(r,n){var t;return t=i.call(this,"Async Validation Error")||this,t.errors=r,t.fields=n,t}return e}(ve(Error));function Tr(i,e,r,n,t){if(e.first){var s=new Promise(function(F,I){var O=function(f){return n(f),f.length?I(new Me(f,he(f))):F(t)},u=Lr(i);Re(u,r,O)});return s.catch(function(F){return F}),s}var a=e.firstFields===!0?Object.keys(i):e.firstFields||[],o=Object.keys(i),d=o.length,b=0,p=[],h=new Promise(function(F,I){var O=function(y){if(p.push.apply(p,y),b++,b===d)return n(p),p.length?I(new Me(p,he(p))):F(t)};o.length||(n(p),F(t)),o.forEach(function(u){var y=i[u];a.indexOf(u)!==-1?Re(y,r,O):Nr(y,r,O)})});return h.catch(function(F){return F}),h}function Wr(i){return!!(i&&i.message!==void 0)}function jr(i,e){for(var r=i,n=0;n<e.length;n++){if(r==null)return r;r=r[e[n]]}return r}function qe(i,e){return function(r){var n;return i.fullFields?n=jr(e,i.fullFields):n=e[r.field||i.fullField],Wr(r)?(r.field=r.field||i.fullField,r.fieldValue=n,r):{message:typeof r=="function"?r():r,fieldValue:n,field:r.field||i.fullField}}}function Ne(i,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];typeof n=="object"&&typeof i[r]=="object"?i[r]=j({},i[r],n):i[r]=n}}return i}var Xe=function(e,r,n,t,s,a){e.required&&(!n.hasOwnProperty(e.field)||S(r,a||e.type))&&t.push(R(s.messages.required,e.fullField))},Ur=function(e,r,n,t,s){(/^\s+$/.test(r)||r==="")&&t.push(R(s.messages.whitespace,e.fullField))},Z,Vr=function(){if(Z)return Z;var i="[a-fA-F\\d:]",e=function(v){return v&&v.includeBoundaries?"(?:(?<=\\s|^)(?="+i+")|(?<="+i+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",t=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+r+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+r+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+r+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+r+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+r+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+r+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+r+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+r+"$)|(?:^"+t+"$)"),a=new RegExp("^"+r+"$"),o=new RegExp("^"+t+"$"),d=function(v){return v&&v.exact?s:new RegExp("(?:"+e(v)+r+e(v)+")|(?:"+e(v)+t+e(v)+")","g")};d.v4=function(l){return l&&l.exact?a:new RegExp(""+e(l)+r+e(l),"g")},d.v6=function(l){return l&&l.exact?o:new RegExp(""+e(l)+t+e(l),"g")};var b="(?:(?:[a-z]+:)?//)",p="(?:\\S+(?::\\S*)?@)?",h=d.v4().source,F=d.v6().source,I="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",O="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",u="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",f='(?:[/?#][^\\s"]*)?',m="(?:"+b+"|www\\.)"+p+"(?:localhost|"+h+"|"+F+"|"+I+O+u+")"+y+f;return Z=new RegExp("(?:^"+m+"$)","i"),Z},Le={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},z={integer:function(e){return z.number(e)&&parseInt(e,10)===e},float:function(e){return z.number(e)&&!z.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!z.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Le.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Vr())},hex:function(e){return typeof e=="string"&&!!e.match(Le.hex)}},Br=function(e,r,n,t,s){if(e.required&&r===void 0){Xe(e,r,n,t,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;a.indexOf(o)>-1?z[o](r)||t.push(R(s.messages.types[o],e.fullField,e.type)):o&&typeof r!==e.type&&t.push(R(s.messages.types[o],e.fullField,e.type))},Jr=function(e,r,n,t,s){var a=typeof e.len=="number",o=typeof e.min=="number",d=typeof e.max=="number",b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=r,h=null,F=typeof r=="number",I=typeof r=="string",O=Array.isArray(r);if(F?h="number":I?h="string":O&&(h="array"),!h)return!1;O&&(p=r.length),I&&(p=r.replace(b,"_").length),a?p!==e.len&&t.push(R(s.messages[h].len,e.fullField,e.len)):o&&!d&&p<e.min?t.push(R(s.messages[h].min,e.fullField,e.min)):d&&!o&&p>e.max?t.push(R(s.messages[h].max,e.fullField,e.max)):o&&d&&(p<e.min||p>e.max)&&t.push(R(s.messages[h].range,e.fullField,e.min,e.max))},J="enum",$r=function(e,r,n,t,s){e[J]=Array.isArray(e[J])?e[J]:[],e[J].indexOf(r)===-1&&t.push(R(s.messages[J],e.fullField,e[J].join(", ")))},Gr=function(e,r,n,t,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||t.push(R(s.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(r)||t.push(R(s.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},g={required:Xe,whitespace:Ur,type:Br,range:Jr,enum:$r,pattern:Gr},zr=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r,"string")&&!e.required)return n();g.required(e,r,t,a,s,"string"),S(r,"string")||(g.type(e,r,t,a,s),g.range(e,r,t,a,s),g.pattern(e,r,t,a,s),e.whitespace===!0&&g.whitespace(e,r,t,a,s))}n(a)},kr=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r)&&!e.required)return n();g.required(e,r,t,a,s),r!==void 0&&g.type(e,r,t,a,s)}n(a)},Hr=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(r===""&&(r=void 0),S(r)&&!e.required)return n();g.required(e,r,t,a,s),r!==void 0&&(g.type(e,r,t,a,s),g.range(e,r,t,a,s))}n(a)},Kr=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r)&&!e.required)return n();g.required(e,r,t,a,s),r!==void 0&&g.type(e,r,t,a,s)}n(a)},Xr=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r)&&!e.required)return n();g.required(e,r,t,a,s),S(r)||g.type(e,r,t,a,s)}n(a)},Yr=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r)&&!e.required)return n();g.required(e,r,t,a,s),r!==void 0&&(g.type(e,r,t,a,s),g.range(e,r,t,a,s))}n(a)},Zr=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r)&&!e.required)return n();g.required(e,r,t,a,s),r!==void 0&&(g.type(e,r,t,a,s),g.range(e,r,t,a,s))}n(a)},Qr=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(r==null&&!e.required)return n();g.required(e,r,t,a,s,"array"),r!=null&&(g.type(e,r,t,a,s),g.range(e,r,t,a,s))}n(a)},et=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r)&&!e.required)return n();g.required(e,r,t,a,s),r!==void 0&&g.type(e,r,t,a,s)}n(a)},rt="enum",tt=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r)&&!e.required)return n();g.required(e,r,t,a,s),r!==void 0&&g[rt](e,r,t,a,s)}n(a)},nt=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r,"string")&&!e.required)return n();g.required(e,r,t,a,s),S(r,"string")||g.pattern(e,r,t,a,s)}n(a)},it=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r,"date")&&!e.required)return n();if(g.required(e,r,t,a,s),!S(r,"date")){var d;r instanceof Date?d=r:d=new Date(r),g.type(e,d,t,a,s),d&&g.range(e,d.getTime(),t,a,s)}}n(a)},at=function(e,r,n,t,s){var a=[],o=Array.isArray(r)?"array":typeof r;g.required(e,r,t,a,s,o),n(a)},fe=function(e,r,n,t,s){var a=e.type,o=[],d=e.required||!e.required&&t.hasOwnProperty(e.field);if(d){if(S(r,a)&&!e.required)return n();g.required(e,r,t,o,s,a),S(r,a)||g.type(e,r,t,o,s)}n(o)},st=function(e,r,n,t,s){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(S(r)&&!e.required)return n();g.required(e,r,t,a,s)}n(a)},k={string:zr,method:kr,number:Hr,boolean:Kr,regexp:Xr,integer:Yr,float:Zr,array:Qr,object:et,enum:tt,pattern:nt,date:it,url:fe,hex:fe,email:fe,required:at,any:st};function ye(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var be=ye(),X=function(){function i(r){this.rules=null,this._messages=be,this.define(r)}var e=i.prototype;return e.define=function(n){var t=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(s){var a=n[s];t.rules[s]=Array.isArray(a)?a:[a]})},e.messages=function(n){return n&&(this._messages=Ne(ye(),n)),this._messages},e.validate=function(n,t,s){var a=this;t===void 0&&(t={}),s===void 0&&(s=function(){});var o=n,d=t,b=s;if(typeof d=="function"&&(b=d,d={}),!this.rules||Object.keys(this.rules).length===0)return b&&b(null,o),Promise.resolve(o);function p(u){var y=[],f={};function m(v){if(Array.isArray(v)){var P;y=(P=y).concat.apply(P,v)}else y.push(v)}for(var l=0;l<u.length;l++)m(u[l]);y.length?(f=he(y),b(y,f)):b(null,o)}if(d.messages){var h=this.messages();h===be&&(h=ye()),Ne(h,d.messages),d.messages=h}else d.messages=this.messages();var F={},I=d.keys||Object.keys(this.rules);I.forEach(function(u){var y=a.rules[u],f=o[u];y.forEach(function(m){var l=m;typeof l.transform=="function"&&(o===n&&(o=j({},o)),f=o[u]=l.transform(f)),typeof l=="function"?l={validator:l}:l=j({},l),l.validator=a.getValidationMethod(l),l.validator&&(l.field=u,l.fullField=l.fullField||u,l.type=a.getType(l),F[u]=F[u]||[],F[u].push({rule:l,value:f,source:o,field:u}))})});var O={};return Tr(F,d,function(u,y){var f=u.rule,m=(f.type==="object"||f.type==="array")&&(typeof f.fields=="object"||typeof f.defaultField=="object");m=m&&(f.required||!f.required&&u.value),f.field=u.field;function l(w,q){return j({},q,{fullField:f.fullField+"."+w,fullFields:f.fullFields?[].concat(f.fullFields,[w]):[w]})}function v(w){w===void 0&&(w=[]);var q=Array.isArray(w)?w:[w];!d.suppressWarning&&q.length&&i.warning("async-validator:",q),q.length&&f.message!==void 0&&(q=[].concat(f.message));var D=q.map(qe(f,o));if(d.first&&D.length)return O[f.field]=1,y(D);if(!m)y(D);else{if(f.required&&!u.value)return f.message!==void 0?D=[].concat(f.message).map(qe(f,o)):d.error&&(D=[d.error(f,R(d.messages.required,f.field))]),y(D);var T={};f.defaultField&&Object.keys(u.value).map(function(N){T[N]=f.defaultField}),T=j({},T,u.rule.fields);var $={};Object.keys(T).forEach(function(N){var M=T[N],ie=Array.isArray(M)?M:[M];$[N]=ie.map(l.bind(null,N))});var U=new i($);U.messages(d.messages),u.rule.options&&(u.rule.options.messages=d.messages,u.rule.options.error=d.error),U.validate(u.value,u.rule.options||d,function(N){var M=[];D&&D.length&&M.push.apply(M,D),N&&N.length&&M.push.apply(M,N),y(M.length?M:null)})}}var P;if(f.asyncValidator)P=f.asyncValidator(f,u.value,v,u.source,d);else if(f.validator){try{P=f.validator(f,u.value,v,u.source,d)}catch(w){console.error==null||console.error(w),d.suppressValidatorError||setTimeout(function(){throw w},0),v(w.message)}P===!0?v():P===!1?v(typeof f.message=="function"?f.message(f.fullField||f.field):f.message||(f.fullField||f.field)+" fails"):P instanceof Array?v(P):P instanceof Error&&v(P.message)}P&&P.then&&P.then(function(){return v()},function(w){return v(w)})},function(u){p(u)},o)},e.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!k.hasOwnProperty(n.type))throw new Error(R("Unknown rule type %s",n.type));return n.type||"string"},e.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var t=Object.keys(n),s=t.indexOf("message");return s!==-1&&t.splice(s,1),t.length===1&&t[0]==="required"?k.required:k[this.getType(n)]||void 0},i}();X.register=function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");k[e]=r};X.warning=Mr;X.messages=be;X.validators=k;const ot=["","error","validating","success"],lt=Fe({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:de([String,Array])},required:{type:Boolean,default:void 0},rules:{type:de([Object,Array])},error:String,validateStatus:{type:String,values:ot},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:We}}),Te="ElLabelWrap";var ft=K({name:Te,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(i,{slots:e}){const r=te(Pe,void 0),n=te(pe);n||sr(Te,"usage: <el-form-item><label-wrap /></el-form-item>");const t=_e("form"),s=W(),a=W(0),o=()=>{var p;if((p=s.value)!=null&&p.firstElementChild){const h=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(h))}else return 0},d=(p="update")=>{Ke(()=>{e.default&&i.isAutoWidth&&(p==="update"?a.value=o():p==="remove"&&(r==null||r.deregisterLabelWidth(a.value)))})},b=()=>d("update");return ke(()=>{b()}),He(()=>{d("remove")}),or(()=>b()),re(a,(p,h)=>{i.updateAll&&(r==null||r.registerLabelWidth(p,h))}),lr(C(()=>{var p,h;return(h=(p=s.value)==null?void 0:p.firstElementChild)!=null?h:null}),b),()=>{var p,h;if(!e)return null;const{isAutoWidth:F}=i;if(F){const I=r==null?void 0:r.autoLabelWidth,O=n==null?void 0:n.hasLabel,u={};if(O&&I&&I!=="auto"){const y=Math.max(0,Number.parseInt(I,10)-a.value),f=r.labelPosition==="left"?"marginRight":"marginLeft";y&&(u[f]=`${y}px`)}return ne("div",{ref:s,class:[t.be("item","label-wrap")],style:u},[(p=e.default)==null?void 0:p.call(e)])}else return ne(fr,{ref:s},[(h=e.default)==null?void 0:h.call(e)])}}});const dt=["role","aria-labelledby"],ut=K({name:"ElFormItem"}),ct=K({...ut,props:lt,setup(i,{expose:e}){const r=i,n=dr(),t=te(Pe,void 0),s=te(pe,void 0),a=Ue(void 0,{formItem:!1}),o=_e("form-item"),d=ur().value,b=W([]),p=W(""),h=cr(p,100),F=W(""),I=W();let O,u=!1;const y=C(()=>{if((t==null?void 0:t.labelPosition)==="top")return{};const c=Oe(r.labelWidth||(t==null?void 0:t.labelWidth)||"");return c?{width:c}:{}}),f=C(()=>{if((t==null?void 0:t.labelPosition)==="top"||t!=null&&t.inline)return{};if(!r.label&&!r.labelWidth&&T)return{};const c=Oe(r.labelWidth||(t==null?void 0:t.labelWidth)||"");return!r.label&&!n.label?{marginLeft:c}:{}}),m=C(()=>[o.b(),o.m(a.value),o.is("error",p.value==="error"),o.is("validating",p.value==="validating"),o.is("success",p.value==="success"),o.is("required",ie.value||r.required),o.is("no-asterisk",t==null?void 0:t.hideRequiredAsterisk),(t==null?void 0:t.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:t==null?void 0:t.statusIcon}]),l=C(()=>je(r.inlineMessage)?r.inlineMessage:(t==null?void 0:t.inlineMessage)||!1),v=C(()=>[o.e("error"),{[o.em("error","inline")]:l.value}]),P=C(()=>r.prop?ue(r.prop)?r.prop:r.prop.join("."):""),w=C(()=>!!(r.label||n.label)),q=C(()=>r.for||(b.value.length===1?b.value[0]:void 0)),D=C(()=>!q.value&&w.value),T=!!s,$=C(()=>{const c=t==null?void 0:t.model;if(!(!c||!r.prop))return oe(c,r.prop).value}),U=C(()=>{const{required:c}=r,_=[];r.rules&&_.push(...me(r.rules));const x=t==null?void 0:t.rules;if(x&&r.prop){const A=oe(x,r.prop).value;A&&_.push(...me(A))}if(c!==void 0){const A=_.map((L,B)=>[L,B]).filter(([L])=>Object.keys(L).includes("required"));if(A.length>0)for(const[L,B]of A)L.required!==c&&(_[B]={...L,required:c});else _.push({required:c})}return _}),N=C(()=>U.value.length>0),M=c=>U.value.filter(x=>!x.trigger||!c?!0:Array.isArray(x.trigger)?x.trigger.includes(c):x.trigger===c).map(({trigger:x,...A})=>A),ie=C(()=>U.value.some(c=>c.required)),Ze=C(()=>{var c;return h.value==="error"&&r.showMessage&&((c=t==null?void 0:t.showMessage)!=null?c:!0)}),we=C(()=>`${r.label||""}${(t==null?void 0:t.labelSuffix)||""}`),V=c=>{p.value=c},Qe=c=>{var _,x;const{errors:A,fields:L}=c;(!A||!L)&&console.error(c),V("error"),F.value=A?(x=(_=A==null?void 0:A[0])==null?void 0:_.message)!=null?x:`${r.prop} is required`:"",t==null||t.emit("validate",r.prop,!1,F.value)},er=()=>{V("success"),t==null||t.emit("validate",r.prop,!0,"")},rr=async c=>{const _=P.value;return new X({[_]:c}).validate({[_]:$.value},{firstFields:!0}).then(()=>(er(),!0)).catch(A=>(Qe(A),Promise.reject(A)))},Ee=async(c,_)=>{if(u||!r.prop)return!1;const x=ze(_);if(!N.value)return _==null||_(!1),!1;const A=M(c);return A.length===0?(_==null||_(!0),!0):(V("validating"),rr(A).then(()=>(_==null||_(!0),!0)).catch(L=>{const{fields:B}=L;return _==null||_(!1,B),x?!1:Promise.reject(B)}))},ae=()=>{V(""),F.value="",u=!1},Ie=async()=>{const c=t==null?void 0:t.model;if(!c||!r.prop)return;const _=oe(c,r.prop);u=!0,_.value=De(O),await Ke(),ae(),u=!1},tr=c=>{b.value.includes(c)||b.value.push(c)},nr=c=>{b.value=b.value.filter(_=>_!==c)};re(()=>r.error,c=>{F.value=c||"",V(c?"error":"")},{immediate:!0}),re(()=>r.validateStatus,c=>V(c||""));const se=Be({...Je(r),$el:I,size:a,validateState:p,labelId:d,inputIds:b,isGroup:D,hasLabel:w,addInputId:tr,removeInputId:nr,resetField:Ie,clearValidate:ae,validate:Ee});return Ve(pe,se),ke(()=>{r.prop&&(t==null||t.addField(se),O=De($.value))}),He(()=>{t==null||t.removeField(se)}),e({size:a,validateMessage:F,validateState:p,validate:Ee,clearValidate:ae,resetField:Ie}),(c,_)=>{var x;return ce(),$e("div",{ref_key:"formItemRef",ref:I,class:G(E(m)),role:E(D)?"group":void 0,"aria-labelledby":E(D)?E(d):void 0},[ne(E(ft),{"is-auto-width":E(y).width==="auto","update-all":((x=E(t))==null?void 0:x.labelWidth)==="auto"},{default:le(()=>[E(w)?(ce(),pr(mr(E(q)?"label":"div"),{key:0,id:E(d),for:E(q),class:G(E(o).e("label")),style:Ce(E(y))},{default:le(()=>[Q(c.$slots,"label",{label:E(we)},()=>[gr(Se(E(we)),1)])]),_:3},8,["id","for","class","style"])):Ae("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),xe("div",{class:G(E(o).e("content")),style:Ce(E(f))},[Q(c.$slots,"default"),ne(vr,{name:`${E(o).namespace.value}-zoom-in-top`},{default:le(()=>[E(Ze)?Q(c.$slots,"error",{key:0,error:F.value},()=>[xe("div",{class:G(E(v))},Se(F.value),3)]):Ae("v-if",!0)]),_:3},8,["name"])],6)],10,dt)}}});var Ye=Ge(ct,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const vt=hr(Sr,{FormItem:Ye}),ht=yr(Ye);export{ht as E,vt as a};
