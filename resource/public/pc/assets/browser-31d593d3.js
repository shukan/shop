import{_ as b,dE as I,u as T,f as w,i as A,t as C,T as d,$ as v,a5 as L,a6 as M,n as f,p as u,v as _,x as i,A as l,O as N,F as k,C as J,E as D,y as c,z as B,J as O,D as F,aT as V}from"./index-21964c78.js";import{v as R}from"./loading-9a2abf10.js";/* empty css             */import{E as S}from"./image-viewer-dd6920ac.js";import{b as j,a as q,c as z}from"./favorites-30bee934.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./debounce-6ea0a711.js";const U={name:"browser",components:{Delete:b,Box:I},setup(){const s=T();let a=w({listsOrder:[],loading:!1,isdata:!0}),m=w({page:1,size:36,total:0}),r=()=>{a.loading=!0,j(m).then(e=>{if(e.status==200){let o=e.data;a.listsOrder=o,o.length>0?a.isdata=!0:a.isdata=!1}else d.error(v("获取数据失败"));a.loading=!1})};const y=e=>{L({item_id:e,cart_quantity:1,SKU_Id:e}).then(t=>{if(t.status==200){let n='<div class="row"><div class="buy-succ-box clearfix"> <div class="goods-content" id="J_goodsBox" style="margin:0;"> <div class="goods-img"> <img src="'+t.data.product_image+'" width="64" height="64"> </div> <div class="goods-info"> <h3>已成功加入购物车！</h3> <span class="name"> '+t.data.item_name+'  </span>     </div></div>                                    <div class="actions J_actBox  col-xs-12  text-center">                                        <p class="hide J_notic">有商品未成功加入购物车，可以在购物车中查看</p>                                                                                                                 </div>                                </div>                            </div>';M.confirm(n,{confirmButtonText:v("去购物车结算"),cancelButtonText:v("继续购物"),dangerouslyUseHTMLString:!0,center:!0}).then(()=>{s.push({path:"/cart/order"})})}else d.error(t.msg)})},x=e=>{q({item_id:e}).then(t=>{t.status==200?d.success(v("成功加入商品收藏")):d.error(t.msg)})},g=e=>{s.push({path:"/product/detail",query:{item_id:e}})},h=e=>{z({item_id:e}).then(t=>{t.status==200?r():d.error(t.msg),a.loading=!1})},p=(e,o)=>{m.application_id=e.paneName,r()};return A(()=>{r()}),{getLists:r,addCartItem:y,itemAdd:x,jumpProductDetail:g,removeBrowser:h,handleClick:p,Delete:b,...C(a),...C(m)}}};const H={class:"right-title-box"},K={class:"first-title"},G={key:0,class:"primary-list"},Q=["onClick"],W={class:"p-name"},X={class:"price-wrap"},Y={class:"price"},Z={class:"symbol"},ee={key:1,class:"empty-box"},te={class:"empty-text"};function se(s,a,m,r,y,x){const g=S,h=f("Delete"),p=O,e=f("Box"),o=f("router-link"),t=R;return u(),_(k,null,[i("div",H,[i("div",K,l(s.$t("浏览记录")),1)]),s.isdata?N((u(),_("div",G,[(u(!0),_(k,null,J(s.listsOrder,(n,E)=>(u(),_("div",{class:"item",key:E,onClick:$=>r.jumpProductDetail(n.item_id)},[c(g,{src:n.product_image,fit:"cover",class:"img"},null,8,["src"]),i("div",W,l(n.product_item_name),1),i("div",X,[i("text",Y,[i("span",Z,l(s.$t("￥")),1),F(l(n.item_sale_price),1)])]),i("div",null,[c(p,{class:"delete-button",onClick:V($=>r.removeBrowser(n.item_id),["stop"])},{default:B(()=>[c(h)]),_:2},1032,["onClick"])])],8,Q))),128))])),[[t,s.loading]]):D("",!0),s.isdata?D("",!0):(u(),_("div",ee,[c(p,{class:"empty-icon"},{default:B(()=>[c(e)]),_:1}),i("div",te,l(s.$t("您还没有浏览记录哦！")),1),c(o,{to:"/index",class:"empty-btn"},{default:B(()=>[F(l(s.$t("去首页逛逛")),1)]),_:1})]))],64)}const de=P(U,[["render",se],["__scopeId","data-v-d87e90a3"]]);export{de as default};
