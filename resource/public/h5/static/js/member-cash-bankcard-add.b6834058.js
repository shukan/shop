(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["member-cash-bankcard-add"],{"11ac":function(a,t,i){"use strict";i.r(t);var e=i("427e"),n=i.n(e);for(var s in e)["default"].indexOf(s)<0&&function(a){i.d(t,a,(function(){return e[a]}))}(s);t["default"]=n.a},"427e":function(a,t,i){"use strict";i("7a82");var e=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("ac1f"),i("00b4");var n=e(i("5530")),s=i("26cb"),u={data:function(){return{options:{},user_id:0,user_bank_card_name:"",user_bank_card_address:"",user_idcard:"",isName:!0,isCardNo:!0,user_bank_card_code:"",BankName:"",isbankAccount:!0,isbankName:!0,banklists:[],index:0,user_bank_card_mobile:"",isUserMobile:!0,bank_name:"",bank_id:0,id:0}},computed:(0,s.mapState)(["Config","StateCode","notice","plantformInfo","shopInfo","userInfo","hasLogin"]),components:{},onLoad:function(a){uni.setNavigationBarTitle({title:this.__("收款账号")});this.setData({options:a}),this.forceUserInfo((function(a){})),this.load(),a.ud_id&&this.setData({id:a.ud_id})},onShow:function(a){},methods:(0,n.default)((0,n.default)({},(0,s.mapMutations)(["login","logout","getPlantformInfo","forceUserInfo","getUserInfo"])),{},{load:function(){var a=this;a.$.request({url:this.Config.URL.pay.list_user_bank,data:{},success:function(t,i,e,n){a.setData({banklists:t.bank_list}),a.getUserBank()}})},getUserBank:function(){var a=this,t={user_bank_id:a.id};a.$.request({url:this.Config.URL.pay.get_user_bank,data:t,success:function(t,i,e,n){if(200==i){a.setData({bank_id:t.bank_id,bank_name:t.bank_name,user_bank_card_name:t.user_bank_card_name,user_bank_card_address:t.user_bank_card_address,user_bank_card_mobile:t.user_bank_card_mobile,user_bank_card_code:t.user_bank_card_code});for(var s=0;s<a.banklists.length;s++)if(a.banklists[s]["bank_id"]==t.bank_id){a.index=s;break}}}})},inputphone:function(a){this.setData({user_bank_card_mobile:a.detail.value}),this.$.isNull(a.detail.value)?this.setData({isUserMobile:!1}):/^1[23456789]\d{9}$/.test(a.detail.value)?this.setData({isUserMobile:!0}):this.setData({isUserMobile:!1})},inputReName:function(a){this.setData({user_bank_card_name:a.detail.value})},inputbankAccount:function(a){"微信"==this.banklists[this.index]["bank_name"]||"支付宝"==this.banklists[this.index]["bank_name"]?(this.setData({user_bank_card_code:a.detail.value}),""!=a.detail.value?this.setData({isbankAccount:!0}):this.setData({isbankAccount:!1})):(this.setData({user_bank_card_code:a.detail.value}),a.detail.value&&/^\d{5,25}$/.test(a.detail.value)?this.setData({isbankAccount:!0}):this.setData({isbankAccount:!1}))},inputbankName:function(a){this.setData({user_bank_card_address:a.detail.value})},inputICard:function(a){this.$.isNull(a.detail.value)?this.setData({isCardNo:!0,user_idcard:a.detail.value}):(this.IdentityCodeValid(a.detail.value)?this.setData({isCardNo:!0}):this.setData({isCardNo:!1}),this.setData({user_idcard:a.detail.value}))},bindPickerChange:function(a){var t=a.target.value;this.index=t,this.bank_id=this.banklists[t].bank_id,this.bank_name=this.banklists[t].bank_name},submitInfo:function(a){this.update()},update:function(){var a=this;if("微信"==this.banklists[this.index]["bank_name"]||"支付宝"==this.banklists[this.index]["bank_name"]?this.user_bank_card_code?this.setData({isbankAccount:!0}):this.setData({isbankAccount:!1}):/^\d{5,25}$/.test(this.user_bank_card_code)?this.setData({isbankAccount:!0}):this.setData({isbankAccount:!1}),this.user_bank_card_address&&a.$.isNull(this.user_bank_card_address)?this.setData({isbankName:!1}):this.setData({isbankName:!0}),a.$.isNull(this.user_bank_card_name)?this.setData({isName:!1}):this.setData({isName:!0}),this.isbankName&&this.isName&&this.isbankAccount){var t={bank_name:this.bank_name?this.bank_name:a.banklists[0]["bank_name"],bank_id:this.bank_id?this.bank_id:a.banklists[0]["bank_id"],user_bank_card_address:this.user_bank_card_address,user_bank_card_code:this.user_bank_card_code,user_bank_card_name:this.user_bank_card_name,user_bank_card_mobile:this.user_bank_card_mobile};if(a.id){var i=this.Config.URL.pay.edit_user_bank;t.user_bank_id=a.id}else i=this.Config.URL.pay.add_user_bank;a.$.request({url:i,data:t,method:"POST",success:function(t,i,e,n){200==i?a.$.showToast({title:a.__("更新成功!"),success:function(){a.$.navigateBack(1)}}):a.$.confirm(e)}})}},IdentityCodeValid:function(a){var t=!0;if(a&&/^[1-9][0-9]{5}(19[0-9]{2}|200[0-9]|2010)(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])[0-9]{3}[0-9xX]$/i.test(a))if({11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "}[a.substr(0,2)]){if(18==a.length){a=a.split("");for(var i=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],e=[1,0,"X",9,8,7,6,5,4,3,2],n=0,s=0,u=0,l=0;l<17;l++)s=a[l],u=i[l],n+=s*u;e[n%11]!=a[17].toUpperCase()&&(t=!1)}}else t=!1;else t=!1;return t}})};t.default=u},"450e":function(a,t,i){"use strict";i.r(t);var e=i("fa40"),n=i("11ac");for(var s in n)["default"].indexOf(s)<0&&function(a){i.d(t,a,(function(){return n[a]}))}(s);i("71d5");var u=i("f0c5"),l=Object(u["a"])(n["default"],e["b"],e["c"],!1,null,"32cf1147",null,!1,e["a"],void 0);t["default"]=l.exports},"71d5":function(a,t,i){"use strict";var e=i("f1a1"),n=i.n(e);n.a},f146:function(a,t,i){var e=i("24fb");t=e(!1),t.push([a.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-32cf1147]:export{theme_bg:#e93323}.m-cell-bd uni-label[data-v-32cf1147]{color:#888}.m-cell-vcode[data-v-32cf1147]{padding-top:0;padding-right:0;padding-bottom:0}.m-vcode-img[data-v-32cf1147]{width:%?216?%;height:%?88?%}.btn_box[data-v-32cf1147]{padding:%?20?%}.m-code[data-v-32cf1147]{right:%?210?%}.m-vcode-btn[data-v-32cf1147]{width:%?150?%;text-align:center}.uni-uploader__file[data-v-32cf1147]{width:%?120?%;height:%?120?%}.uni-uploader__file .uni-uploader__img[data-v-32cf1147]{width:100%;height:100%;border-radius:50%}',""]),a.exports=t},f1a1:function(a,t,i){var e=i("f146");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[a.i,e,""]]),e.locals&&(a.exports=e.locals);var n=i("4f06").default;n("e0bd4356",e,!0,{sourceMap:!1,shadowMode:!1})},fa40:function(a,t,i){"use strict";i.d(t,"b",(function(){return e})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var e=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"m-cells m-cells-form"},[i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd"},[i("v-uni-label",{staticClass:"u-label"},[a._v(a._s(a.__("收款方式")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-picker",{attrs:{value:a.index,range:a.banklists,"range-key":"bank_remark"},on:{change:function(t){arguments[0]=t=a.$handleEvent(t),a.bindPickerChange.apply(void 0,arguments)}}},[i("v-uni-view",{},[a._v(a._s(a.banklists[a.index]?a.banklists[a.index]["bank_name"]:a.__("请选择收款方式")))])],1)],1)],1),i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd"},[i("v-uni-label",{staticClass:"u-label"},[a._v(a._s(a.__("姓名")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-input",{staticClass:"u-input",attrs:{type:"text",value:a.user_bank_card_name,placeholder:a.__("输入收款人姓名"),maxlength:"20"},on:{input:function(t){arguments[0]=t=a.$handleEvent(t),a.inputReName.apply(void 0,arguments)}}})],1),a.isName?a._e():i("v-uni-view",{staticClass:"m-cell-ft"},[i("v-uni-icon",{staticClass:"m-icon-warn",attrs:{type:"warn"}})],1)],1),i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd"},[i("v-uni-label",{staticClass:"u-label"},[a._v(a._s(a.__("收款账号")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-input",{staticClass:"u-input",attrs:{type:"text",value:a.user_bank_card_code,placeholder:a.__("输入银行卡号或支付宝账号")},on:{input:function(t){arguments[0]=t=a.$handleEvent(t),a.inputbankAccount.apply(void 0,arguments)}}})],1),a.isbankAccount?a._e():i("v-uni-view",{staticClass:"m-cell-ft"},[i("v-uni-icon",{staticClass:"m-icon-warn",attrs:{type:"warn"}})],1)],1),i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd"},[i("v-uni-label",{staticClass:"u-label"},[a._v(a._s(a.__("银行名称")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-input",{staticClass:"u-input",attrs:{type:"text",value:a.user_bank_card_address,placeholder:a.__("如选择微信/支付宝该项不填")},on:{input:function(t){arguments[0]=t=a.$handleEvent(t),a.inputbankName.apply(void 0,arguments)}}})],1),a.isbankName?a._e():i("v-uni-view",{staticClass:"m-cell-ft"},[i("v-uni-icon",{staticClass:"m-icon-warn",attrs:{type:"warn"}})],1)],1),i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd"},[i("v-uni-label",{staticClass:"u-label"},[a._v(a._s(a.__("手机号码")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-input",{staticClass:"u-input",attrs:{type:"number",placeholder:a.__("请输入手机号码"),maxlength:"11",value:a.user_bank_card_mobile},on:{input:function(t){arguments[0]=t=a.$handleEvent(t),a.inputphone.apply(void 0,arguments)}}})],1),a.isUserMobile?a._e():i("v-uni-view",{staticClass:"m-cell-ft"},[i("v-uni-view",{staticClass:"m-icon-warn uni-icon uni-icon-info",attrs:{type:"warn"}})],1)],1)],1),i("v-uni-button",{staticClass:"u-btn u-btn-default",staticStyle:{"margin-top":"50rpx"},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.submitInfo.apply(void 0,arguments)}}},[a._v(a._s(a.__("保存")))])],1)},n=[]}}]);