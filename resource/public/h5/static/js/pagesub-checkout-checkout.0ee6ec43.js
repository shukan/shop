(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesub-checkout-checkout"],{"16d9":function(t,e,i){"use strict";var a=i("76f5"),s=i.n(a);s.a},"2a8f":function(t,e,i){var a=i("6cc3");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("70d1c403",a,!0,{sourceMap:!1,shadowMode:!1})},"3fbe":function(t,e,i){"use strict";var a=i("2a8f"),s=i.n(a);s.a},"44c1":function(t,e,i){"use strict";i.r(e);var a=i("f165"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"464c":function(t,e,i){"use strict";i.r(e);var a=i("aa54"),s=i("c81b");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("16d9");var r=i("f0c5"),o=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"0e39c16a",null,!1,a["a"],void 0);e["default"]=o.exports},6038:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3");var a={name:"MsActivityTag",data:function(){return{tagList:{1101:"tag-info",1102:"tag-info",1103:"tag-info",1104:"tag-info",1105:"tag-info",1106:"tag-info",1107:"tag-info",1140:"tag-info",1131:"tag-info",1132:"tag-info",1121:"tag-info",1122:"tag-info",1123:"tag-info",1124:"tag-info",1125:"tag-info",1135:"tag-info",1133:"tag-info"},tagNameMap:{}}},props:{typeId:{type:[String,Number],default:0}},mounted:function(){this.tagNameMap={1101:this.__("加价购"),1102:this.__("满赠"),1103:this.__("限时折扣"),1104:this.__("优惠套装"),1105:this.__("优惠券"),1106:this.__("砸金蛋"),1107:this.__("满减"),1140:this.__("折上折"),1131:this.__("市场活动"),1132:this.__("组合套餐"),1121:this.__("幸运大抽奖"),1122:this.__("秒杀"),1123:this.__("拼团"),1124:this.__("砍价"),1125:this.__("一元购"),1135:this.__("阶梯价"),1133:this.__("多件折")}},methods:{onSearch:function(){this.$emi__("click",{})}}};e.default=a},"6cc3":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-523e7b34]:export{theme_bg:#e93323}.page-container[data-v-523e7b34]{padding:%?20?%}.m-island-type[data-v-523e7b34]{background:#fff;padding:%?30?% %?20?%}.m-island-type .m-tit[data-v-523e7b34]{height:%?60?%;line-height:%?60?%;margin-bottom:%?20?%}.m-island-type .m-type[data-v-523e7b34]{display:flex;justify-content:space-around}.m-item .m-imgs[data-v-523e7b34]{width:%?100?%;height:%?100?%;border-radius:50%;background:#f1e6da;display:flex;justify-content:center;align-items:center}.m-item .m-imgs uni-image[data-v-523e7b34]{width:%?64?%;height:%?64?%}.m-item .m-imgs-active[data-v-523e7b34]{background:#333959}.m-item .m-name[data-v-523e7b34]{margin-top:%?15?%}.m-cells[data-v-523e7b34]{font-size:%?28?%;border-radius:%?12?%}.m-addres-info[data-v-523e7b34]{padding:%?32?% 0;background-color:#fff;overflow:hidden;position:relative;border-radius:%?12?%}.m-order-typetxt[data-v-523e7b34]{color:#e93323;font-size:16px}.m-addres-info[data-v-523e7b34]::before{content:"";position:absolute;width:100%;height:%?6?%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL0AAAAECAYAAADbEj6NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTZFNEY0MzZFNERFMTFFNUE1MEFGNzBDMjEwRENBN0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTZFNEY0MzdFNERFMTFFNUE1MEFGNzBDMjEwRENBN0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NkU0RjQzNEU0REUxMUU1QTUwQUY3MEMyMTBEQ0E3RCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5NkU0RjQzNUU0REUxMUU1QTUwQUY3MEMyMTBEQ0E3RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pn/dxJgAAAEGSURBVHjaYpToP8mABlSAuAuIAxkGH1gPxGVAfIcYxRc/lpJqvhgQtwNxAhAzDTK/nwDiXCA+Q4ziP7ccSDWfB4grgLgIiDkHmd+vAXExEO8gRrGxqTdeeRYktgAQ10ADlm2Qefo8NDIOEKuBxATPBvV3DTQcBhN4BE2MK4D4Pw0SPBM0k7cAseQg8/sbIK4H4lkgb1EjwcMSPQinAXEjEIsMMk+/AOJqIF4AxP9olOADoTWbyiDz+xcg7gDiPiD+TqwmEhO8A9R8w0Hm919APBmaET8Qq4mYBA9L9BeBWGs4eJrEBG8IjXCHQeb3f9BMDqp1npOikYQEP2yasKQmeFDBDhBgALcVQI75FJrUAAAAAElFTkSuQmCC) 50% repeat;bottom:0;border-bottom:2px dashed #f1e6da}.m-ad-name[data-v-523e7b34]{display:-webkit-box;position:relative;margin-left:%?40?%;-webkit-box-flex:1;height:20px;line-height:20px;font-weight:400;font-size:14px}.m-ad-name uni-text[data-v-523e7b34]{margin:0 %?10?% 0 %?20?%}.m-ad-name[data-v-523e7b34]::after{content:"\\e7e0";position:absolute;left:%?-48?%;width:%?30?%;height:%?30?%;margin-top:%?-20?%;font-family:iconfont!important;text-align:center;line-height:%?80?%;font-size:%?80?%}.m-ad-address[data-v-523e7b34]{width:%?650?%;margin-left:%?16?%;display:-webkit-box;-webkit-box-flex:1;line-height:%?50?%;font-weight:400;font-size:14px;position:relative;padding-left:%?40?%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;color:#888;margin-top:%?10?%}.m-addres-info .m-cell-ft[data-v-523e7b34]{position:absolute;right:%?20?%;top:50%}.m-product-all[data-v-523e7b34]{margin-top:%?20?%}.total-info[data-v-523e7b34]{margin-top:%?20?%}.m-panel-hd[data-v-523e7b34]::after{border:none}.m-total-info[data-v-523e7b34]{padding:%?10?% %?20?%;font-size:12px}.m-total-info uni-label[data-v-523e7b34]{font-size:%?32?%;color:#e93323}.m-footer-btn[data-v-523e7b34]{height:%?110?%;width:100%;position:fixed;bottom:0;left:0;background-color:#fff;border-radius:0;z-index:100;bottom:constant(safe-area-inset-bottom);bottom:env(safe-area-inset-bottom);display:flex}.m-footer-btn uni-form[data-v-523e7b34]{width:auto;margin:auto}.m-footer-btn-list[data-v-523e7b34]{width:70%;height:100%;position:relative;float:left}.m-footer-btn-item[data-v-523e7b34]{position:relative;float:left;width:100%;font-size:%?24?%;color:#888;line-height:%?40?%;padding:%?15?% 0;box-sizing:border-box;height:100%}.m-footer-btn-main[data-v-523e7b34]{height:%?80?%;float:left;background-color:#e93323;color:#fff;line-height:%?80?%;font-size:%?32?%;text-align:center;border-radius:0;border-radius:9px;line-height:%?80?%;text-align:center;margin:auto;margin-left:%?20?%;margin-right:%?20?%;width:%?230?%}.m-cart-total[data-v-523e7b34]{text-align:right;padding-right:%?20?%}.m-cart-total uni-text[data-v-523e7b34]{font-size:%?36?%;color:#e93323}.m-cart-total uni-text.mcs[data-v-523e7b34]{font-size:12px}.m-cart-total uni-label[data-v-523e7b34]{color:#e93323}.m-product-price uni-text[data-v-523e7b34]{font-size:%?24?%;margin-left:%?8?%}.pre-info-price[data-v-523e7b34]{height:%?18?%!important;font-size:12px!important;color:#b0b0b0!important;margin:0 0 0 %?10?%!important;margin-left:%?30?%!important}.pre-info-price .mcs[data-v-523e7b34]{color:#b0b0b0;font-size:10px}.u-null-ad uni-label[data-v-523e7b34]{font-size:%?40?%}.u-null-ad uni-text[data-v-523e7b34]{color:#e93323;text-decoration:underline}.u-disabled[data-v-523e7b34]{background-color:#aaa}.arrow[data-v-523e7b34]{width:%?20?%}.coupon[data-v-523e7b34]{position:relative;left:%?12?%;font-weight:700;font-size:%?26?%}.nearbylist-item[data-v-523e7b34]{padding:%?20?% %?30?%;border-bottom:1px solid #eee;background:#fff}.nearbylist-item[data-v-523e7b34]:last-child{border:none}.item-info[data-v-523e7b34]{position:relative;font-size:%?28?%}.item-name[data-v-523e7b34]{display:inline-block;font-size:%?30?%}.item-phone[data-v-523e7b34]{line-height:%?45?%}.item-distance[data-v-523e7b34]{float:right;font-size:%?26?%;color:#bbb}.item-address[data-v-523e7b34]{position:relative;font-size:%?26?%;color:#bbb;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;margin-right:%?40?%;line-height:%?40?%}.item-info[data-v-523e7b34]::after{content:" ";display:inline-block;height:%?12?%;width:%?12?%;border-width:%?4?% %?4?% 0 0;border-color:#ebebe7;border-style:solid;-webkit-transform:matrix(.71,.71,-.71,.71,0,0);transform:matrix(.71,.71,-.71,.71,0,0);top:%?-4?%;position:absolute;top:72%;right:%?4?%;padding:%?3?%}.distribution[data-v-523e7b34]{display:flex;align-items:center;background:#fff;padding:%?30?% %?30?%;margin-top:%?20?%;font-size:%?28?%}.m-product-price1 uni-text[data-v-523e7b34]{font-size:%?24?%;color:#888;margin-left:%?8?%}.m-product-price[data-v-523e7b34]{\r\n  /*display: flex;*/justify-content:space-between;padding-right:%?20?%;margin-top:%?6?%}.u-cart-num[data-v-523e7b34]{position:absolute;bottom:%?20?%;right:%?20?%}.btn[data-v-523e7b34]{font-size:%?28?%;color:#333;padding-left:%?20?%;height:%?80?%;line-height:%?80?%;background:#fff;border-bottom:1px solid #d5d5d5}\r\n/*mask*/.drawer_screen[data-v-523e7b34]{width:100%;height:100%;position:fixed;top:0;left:0;z-index:1000;background:#000;opacity:.5;overflow:hidden}\r\n/*content*/.drawer_box[data-v-523e7b34]{width:%?650?%;overflow:hidden;position:fixed;top:50%;left:0;z-index:1001;background:#fafafa;margin:-150px %?50?% 0 %?50?%;border-radius:3px}.drawer_title[data-v-523e7b34]{padding:15px;font:20px microsoft yahei;text-align:center}.drawer_content[data-v-523e7b34]{height:210px;overflow-y:scroll\r\n  /*超出父盒子高度可滚动*/}.btn_ok[data-v-523e7b34]{padding:10px;font:20px microsoft yahei;text-align:center;border-top:1px solid #e8e8ea;color:#3cc51f}.top[data-v-523e7b34]{padding-top:8px}.bottom[data-v-523e7b34]{padding-bottom:8px}.title[data-v-523e7b34]{height:30px;line-height:30px;width:%?160?%;text-align:center;display:inline-block;font:300 %?28?%/30px microsoft yahei}.hint[data-v-523e7b34]{padding:%?40?%;font-size:12px;color:#717171}.hint uni-text[data-v-523e7b34]{padding-left:%?20?%}.footer[data-v-523e7b34]{border-top:%?2?% solid #d5d5d5;position:absolute;bottom:0;width:100%;height:%?100?%;display:flex;justify-content:space-between}.footer uni-view[data-v-523e7b34]{width:50%;text-align:center;font-size:%?32?%;line-height:%?100?%}.footer-btn[data-v-523e7b34]{width:50%;background:#e93323;height:%?100?%;line-height:%?100?%;text-align:center;border-radius:%?1?%;color:#fff}.m-store-c[data-v-523e7b34]{margin:%?20?% 0}.m-store-info[data-v-523e7b34]{padding:%?20?%}.m-store-info uni-label[data-v-523e7b34]{font-size:%?20?%}.m-product-box[data-v-523e7b34]{border-radius:%?12?%;background-color:#fff}.m-product-item[data-v-523e7b34]{flex-direction:column;background-color:initial}.m-product-item[data-v-523e7b34]:after{content:" ";position:absolute;left:0;bottom:0;right:0;height:1px;border-bottom:1px solid #ebebe7;color:#ebebe7;\r\n  /*transform-origin: 0 100%;*/-webkit-transform:scaleY(.5);transform:scaleY(.5)}.m-item-c[data-v-523e7b34]{position:relative;\r\n  /* width: 850rpx; */display:flex}.m-item-act[data-v-523e7b34]{position:relative;width:%?850?%;height:%?100?%}.m-act-img[data-v-523e7b34]{width:%?212?%;height:%?212?%}.m-act-img uni-image[data-v-523e7b34]{width:%?100?%;height:%?100?%}.act-item-name[data-v-523e7b34]{width:%?570?%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.u-textarea-counter[data-v-523e7b34]{position:absolute;right:%?20?%;bottom:0}.mcs[data-v-523e7b34]{font-size:12px;color:#e93323}.m-total-price[data-v-523e7b34]{color:#e93323;font-size:17px}uni-form[data-v-523e7b34]{flex:1}',""]),t.exports=e},"76f5":function(t,e,i){var a=i("f056");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("1793f912",a,!0,{sourceMap:!1,shadowMode:!1})},aa54:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"type-name-box"},["undefined"!=t.tagNameMap[t.typeId]?i("v-uni-text",{staticClass:"tag tag-orange",attrs:{type:t.tagList[t.typeId]}},[t._v(t._s(t.tagNameMap[t.typeId]))]):t._e()],1)},s=[]},b993:function(t,e,i){"use strict";i.r(e);var a=i("d477"),s=i("44c1");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("3fbe");var r=i("f0c5"),o=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"523e7b34",null,!1,a["a"],void 0);e["default"]=o.exports},c81b:function(t,e,i){"use strict";i.r(e);var a=i("6038"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},d477:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var a={uniIcons:i("2df6").default,msActivityTag:i("464c").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page-container",staticStyle:{"overflow-x":"hidden"}},[i("v-uni-view",[t.udId>0?i("v-uni-view",{staticClass:"m-addres-info m-cell-access",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectAddress.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"m-ad-name"},[i("v-uni-text",[t._v(t._s(t.submitOrderInfo.user_delivery_address.ud_name))]),i("v-uni-text",{staticStyle:{padding:"0",margin:"0"}},[t._v(t._s(t.submitOrderInfo.user_delivery_address.ud_mobile))])],1),t.addressFlag?i("v-uni-view",{staticClass:"m-ad-address"},[i("v-uni-text",[t._v(t._s(t.submitOrderInfo.user_delivery_address.ud_province)+"/"+t._s(t.submitOrderInfo.user_delivery_address.ud_city)+"/"+t._s(t.submitOrderInfo.user_delivery_address.ud_county)+"\n            "+t._s(t.submitOrderInfo.user_delivery_address.ud_address))])],1):t._e(),i("v-uni-view",{staticClass:"m-cell-ft"})],1):i("v-uni-view",{staticClass:"m-addres-info m-cell-access",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectAddress.apply(void 0,arguments)}}},[t.isVirtual?i("v-uni-view",{staticClass:"m-ad-address u-null-ad"},[i("v-uni-label",{staticClass:"iconfont icon-shouhuodizhi"}),t._v(t._s(t.__("你还没有个人联系信息,马上"))),i("v-uni-text",[t._v(t._s(t.__("添加")))])],1):i("v-uni-view",{staticClass:"m-ad-address u-null-ad"},[i("v-uni-label",{staticClass:"iconfont icon-shouhuodizhi"}),t._v(t._s(t.__("你还没有收货地址,马上"))),i("v-uni-text",[t._v(t._s(t.__("添加")))])],1),i("v-uni-view",{staticClass:"m-cell-ft "})],1)],1),t.canSelfpick&&!t.isVirtual?[i("v-uni-view",{staticClass:"distribution"},[i("v-uni-view",{staticStyle:{width:"30%"}},[t._v(t._s(t.__("配送方式")))]),i("v-uni-view",{staticClass:"check",staticStyle:{display:"flex","align-items":"center",width:"70%","justify-content":"space-around"}},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.express.apply(void 0,arguments)}}},[t.selfpickFlag?i("v-uni-view",{staticClass:"border",staticStyle:{"border-radius":"50%",width:"26rpx",height:"26rpx",border:"1px solid #db384c"}}):t._e(),t.addressFlag?i("v-uni-image",{staticStyle:{width:"32rpx",height:"32rpx","border-radius":"50%"},attrs:{src:"/static/images/ziti.png"}}):t._e(),i("v-uni-view",{staticStyle:{"margin-left":"10rpx"}},[t._v(t._s(t.__("快递配送")))])],1),i("v-uni-view",{staticStyle:{display:"flex","align-items":"center"},attrs:{"data-store_id":t.store_id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.draw.apply(void 0,arguments)}}},[t.addressFlag?i("v-uni-view",{staticClass:"border",staticStyle:{"border-radius":"50%",width:"26rpx",height:"26rpx",border:"1px solid #db384c"}}):t._e(),t.selfpickFlag?i("v-uni-image",{staticStyle:{width:"32rpx",height:"32rpx","border-radius":"50%"},attrs:{src:"/static/images/ziti.png"}}):t._e(),i("v-uni-view",{staticStyle:{"margin-left":"10rpx"}},[t._v(t._s(t.__("门店自提")))])],1)],1)],1),t.selfpickFlag?[t.selfpickFlag?i("v-uni-view",{staticClass:"m-cells",staticStyle:{background:"#fff","font-size":"28rpx",padding:"20rpx 30rpx"}},[i("v-uni-picker",{attrs:{mode:"date",value:t.date,start:t.stdate,end:t.eddate},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDateChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker",staticStyle:{display:"flex","justify-content":"space-between"}},[i("v-uni-view",[t._v(t._s(t.__("选择自提日期:")))]),i("v-uni-view",{staticStyle:{color:"#717171","padding-right":"40rpx"}},[t._v(t._s(t.date||t.starttime))])],1)],1)],1):t._e(),t.selfpickFlag&&t.chain_id?i("v-uni-navigator",{staticClass:"m-addres-info m-cell-access",staticStyle:{"margin-top":"20rpx"},attrs:{url:"/chain/chain/list?issub=1&ud_id="+t.udId+"&store_id="+t.store_id+"&item_id="+t.item_ids+"&spid="+t.spinfo}},[i("v-uni-label",{staticStyle:{"font-size":"28rpx","margin-left":"20rpx"}},[t._v(t._s(t.__("请选择自提门店:")))]),i("v-uni-view",{staticClass:"nearbylist-item",attrs:{"data-address":t.ChainInfo.chain_address,"data-name":t.ChainInfo.chain_name,"data-lat":t.ChainInfo.chain_lat,"data-lng":t.ChainInfo.chain_lng}},[i("v-uni-view",{staticClass:"item-info"},[i("v-uni-label",{staticClass:"item-name"},[t._v(t._s(t.ChainInfo.chain_name))]),t.ChainInfo.chain_opening_hours&&t.ChainInfo.chain_close_hours?i("v-uni-label",{staticStyle:{"font-size":"24rpx",color:"#717171","margin-left":"20rpx"}},[t._v("("+t._s(t.ChainInfo.chain_opening_hours||"")+"~"+t._s(t.ChainInfo.chain_close_hours||"")+")")]):t._e(),i("v-uni-label",{staticClass:"item-distance"},[t._v(t._s(t.ChainInfo.distance))]),i("v-uni-view",{staticClass:"item-phone"},[t._v(t._s(t.__("商家电话："))+t._s(t.ChainInfo.chain_mobile))]),i("v-uni-view",{staticClass:"item-address"},[i("v-uni-label",{staticClass:"iconfont icon-shouhuodizhi ",staticStyle:{"font-size":"40rpx","margin-right":"15rpx"}}),i("v-uni-label",[t._v(t._s(t.ChainInfo.chain_address))])],1)],1)],1)],1):t._e(),(t.selfpickFlag,t._e())]:t._e()]:t._e(),t._e(),t._e(),i("v-uni-view",{staticClass:"m-product-all"},[i("v-uni-view",{staticClass:"m-product-list"},[t._l(t.submitOrderInfo.items,(function(e,a){return[i("v-uni-view",{key:a+"_0",staticClass:"m-product-box"},[t.selfpickFlag?i("v-uni-view",{staticClass:"m-store",attrs:{"data-id":e.id}},[i("v-uni-view",{staticClass:"m-store-c"},[i("v-uni-label",{staticClass:"m-store-info"},[i("v-uni-label",{staticClass:"iconfont icon-store"},[t._v(t._s(e.store_name))])],1),t.selfpickFlag?i("span",{staticStyle:{float:"right","font-size":"10px","padding-right":"10rpx",color:"#B2B2B2"}},[t._v(t._s(t.__("自提地址: "))+" "+t._s(e.store_address))]):t._e()],1)],1):t._e(),t._l(e.items,(function(e,a){return i("v-uni-view",{key:a,staticClass:"m-product-item",staticStyle:{height:"auto","flex-direction":"column"}},[i("v-uni-view",{class:"m-item-c "+(0==e.cart_id?"del":""),attrs:{"data-id":e.cart_id}},[i("v-uni-navigator",{staticClass:"m-product-img",attrs:{url:"/pagesub/product/detail?id="+e.item_id}},[i("v-uni-image",{attrs:{src:e.product_image}})],1),i("v-uni-view",{staticClass:"m-product-info",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.$.gopage("/pagesub/product/detail?id="+e.item_id)}}},[i("v-uni-view",{staticClass:"m-product-name"},[i("v-uni-label",[e.activity_info?i("ms-activity-tag",{attrs:{typeId:e.activity_info.activity_type_id}}):t._e(),t._v(t._s(e.product_name))],1),i("v-uni-label",{staticClass:"m-min-name"},[t._v(t._s(e.item_name?e.item_name:""))])],1),i("v-uni-view",{staticClass:"m-product-price"},[e.item_unit_price?[i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.item_sale_price,2)))]:t._e(),e.item_save_price?i("v-uni-label",{staticClass:"pre-info-price"},[t._v("-"),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.item_save_price,2)))],1):t._e(),e.item_unit_points?[i("v-uni-label",{staticClass:"pre-info-price",staticStyle:{margin:"0rpx 10rpx"}},[t._v("+")]),i("v-uni-label",{staticStyle:{"font-size":"32rpx"}},[t._v(t._s(e.item_unit_points))]),i("v-uni-label",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.__("积分")))])]:t._e(),e.item_unit_sp?[i("v-uni-label",{staticClass:"pre-info-price",staticStyle:{margin:"0rpx 10rpx"}},[t._v("+")]),i("v-uni-label",{staticStyle:{"font-size":"32rpx"}},[t._v(t._s(e.item_unit_sp))]),i("v-uni-label",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.__("众宝")))])]:t._e(),i("v-uni-text",{staticStyle:{float:"right","padding-right":"50rpx"}},[t._v("x"+t._s(e.cart_quantity))])],2)],1)],1),t._l(e.pulse_gift_cart,(function(a,s){return e.pulse_gift_cart.length>0?i("v-uni-view",{key:s,staticClass:"m-item-act",attrs:{"data-id":a.cart_id}},[i("v-uni-navigator",{staticClass:"m-product-img m-act-img",attrs:{url:"/pagesub/product/detail?id="+a.item_id}},[i("v-uni-image",{attrs:{src:a.product_image}})],1),i("v-uni-navigator",{staticClass:"act-item-name",staticStyle:{height:"100rpx","line-height":"100rpx","font-size":"28rpx"},attrs:{url:"/pagesub/product/detail?id="+a.item_id}},[i("v-uni-label",[t._v("【"+t._s(t.__("赠品"))+"】"+t._s(a.product_item_name))]),i("v-uni-text",[t._v("x"+t._s(a.num))])],1)],1):t._e()})),t._l(e.pulse_reduction,(function(a,s){return e.pulse_reduction.length>0?[a.reduceMoney>0?i("v-uni-view",{key:s+"_0",staticClass:"m-item-act"},[i("v-uni-view",{staticClass:"m-product-img  icon-activity icon-activity-reduction"}),i("v-uni-view",{staticClass:"act-item-name",staticStyle:{height:"160rpx","line-height":"160rpx","font-size":"28rpx"}},[i("v-uni-label",[t._v("【"+t._s(t.sprintf(t.__("满减 -￥%s"),t.number_format(a.reduceMoney,1)))+"】")]),i("v-uni-text",[t._v("x"+t._s(a.times))])],1)],1):t._e()]:t._e()})),t._l(e.pulse_bargains_cart,(function(a,s){return e.pulse_bargains_cart.length>0?i("v-uni-view",{key:s,staticClass:"m-item-act",attrs:{"data-id":a.cart_id}},[i("v-uni-navigator",{staticClass:"m-product-img m-act-img",attrs:{url:"/pagesub/product/detail?id="+a.item_id}},[i("v-uni-image",{attrs:{src:a.product_image}})],1),i("v-uni-navigator",{staticClass:"act-item-name",staticStyle:{height:"100rpx","line-height":"100rpx","font-size":"28rpx",width:"400rpx"},attrs:{url:"/pagesub/product/detail?id="+a.item_id}},[i("v-uni-label",[t._v("【"+t._s(t.__("加价购"))+"】"+t._s(a.product_item_name))]),i("v-uni-text",[t._v("x"+t._s(a.num))])],1)],1):t._e()}))],2)}))],2),t._l(e.activitys.bargains,(function(s,n){return e.activitys.bargains.length>0?i("v-uni-view",{key:n+"_"+a+"_1",staticClass:"m-product-item"},[s.length>0||s.actId?i("v-uni-view",{staticClass:"m-item-act",attrs:{"data-id":s.cart_id}},[i("v-uni-navigator",{staticClass:"m-product-img m-act-img",attrs:{url:"/pagesub/product/detail?id="+s.item_id}},[i("v-uni-image",{attrs:{src:s.product_image}})],1),i("v-uni-navigator",{staticClass:"act-item-name",staticStyle:{height:"100rpx","line-height":"100rpx","font-size":"28rpx"},attrs:{url:"/pagesub/product/detail?id="+s.item_id}},[i("v-uni-label",[t._v("【"+t._s(t.__("加价购"))+"】"+t._s(s.actName))]),i("v-uni-text",[t._v("x"+t._s(s.num))])],1)],1):t._e()],1):t._e()})),t._l(e.activitys.gift,(function(s,n){return e.activitys.gift.length>0?i("v-uni-view",{key:n+"_"+a+"_2",staticClass:"m-product-item"},[s.length>0||s.actId?i("v-uni-view",{staticClass:"m-item-act",attrs:{"data-id":s.cart_id}},[i("v-uni-navigator",{staticClass:"m-product-img m-act-img",attrs:{url:"/pagesub/product/detail?id="+s.item_id}},[i("v-uni-image",{attrs:{src:s.product_image}})],1),i("v-uni-navigator",{staticClass:"act-item-name",staticStyle:{height:"100rpx","line-height":"100rpx","font-size":"28rpx"},attrs:{url:"/pagesub/product/detail?id="+s.item_id}},[i("v-uni-label",[t._v("【"+t._s(t.__("赠品"))+"】"+t._s(s.product_item_name))]),i("v-uni-text",[t._v("x"+t._s(s.num))])],1)],1):t._e()],1):t._e()})),e.activitys.manhui&&e.activitys.manhui.length>0?[i("v-uni-view",[i("v-uni-label",[t._v("【"+t._s(t.__("满返优惠券"))+"】")])],1),t._l(e.activitys.manhui,(function(e,a){return i("v-uni-view",{key:a,staticClass:"m-product-item",staticStyle:{height:"140rpx"}},[i("v-uni-view",{staticClass:"m-item-act"},[i("v-uni-navigator",{staticClass:"m-product-img m-act-img",staticStyle:{width:"30%"},attrs:{url:"activity/coupon/list"}},[i("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:e.activity_rule.voucher_image}})],1),i("v-uni-view",{staticClass:"act-item-name",staticStyle:{height:"100rpx","line-height":"100rpx","font-size":"28rpx",width:"60%",padding:"0 30rpx"}},[i("v-uni-label",[t._v(t._s(e.activity_name))])],1)],1)],1)}))]:t._e(),t._l(e.activitys.reduction,(function(a,s){return e.activitys.reduction.length>0?[a.actId&&a.reduceMoney>0?i("v-uni-view",{key:s+"_0",staticClass:"m-product-item"},[i("v-uni-view",{staticClass:"m-item-act",staticStyle:{height:"auto"},attrs:{"data-id":a.cart_id}},[i("v-uni-view",{staticClass:"m-product-img  icon-activity icon-activity-reduction"}),i("v-uni-view",{staticClass:"act-item-name",staticStyle:{height:"160rpx","line-height":"160rpx","font-size":"28rpx"}},[i("v-uni-label",[t._v("【"+t._s(t.sprintf(t.__("满减 -￥%s"),t.mf(a.reduceMoney)))+"】")]),i("v-uni-text",[t._v("x"+t._s(a.times))])],1)],1)],1):t._e()]:t._e()})),t.isVirtual?[t.product_service_date_flag?i("v-uni-view",{staticClass:"datetime",staticStyle:{background:"#fff","border-top":"1px solid #d9d9d9","border-bottom":"1px solid #d9d9d9","margin-top":"20rpx",padding:"20rpx 20rpx",display:"flex","font-size":"30rpx"}},[i("v-uni-view",{staticClass:"section",staticStyle:{width:"60%"}},[i("v-uni-picker",{attrs:{mode:"date",value:t.date,start:t.stdate,end:t.eddate},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDateChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.__("选择日期:"))+" "+t._s(t.date))])],1)],1),i("v-uni-view",{staticClass:"section",staticStyle:{width:"40%"}},[i("v-uni-picker",{attrs:{mode:"time",value:t.time},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindTimeChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.__("选择时间:"))+" "+t._s(t.time))])],1)],1)],1):t._e(),t.chainFlag?i("v-uni-navigator",{staticClass:"m-addres-info m-cell-access",staticStyle:{"margin-top":"20rpx"},attrs:{url:"/chain/chain/list?issub=1&ud_id="+t.udId+"&item_id="+t.item_id+"&spid="+t.spinfo+"&store_id="+t.store_id}},[i("v-uni-label",{staticStyle:{"font-size":"28rpx","margin-left":"20rpx"}},[t._v(t._s(t.__("请选择门店:")))]),i("v-uni-view",{staticClass:"nearbylist-item",attrs:{"data-address":t.ChainInfo.chain_address,"data-name":t.ChainInfo.chain_name,"data-lat":t.ChainInfo.chain_lat,"data-lng":t.ChainInfo.chain_lng}},[i("v-uni-view",{staticClass:"item-info"},[i("v-uni-label",{staticClass:"item-name"},[t._v(t._s(t.ChainInfo.chain_name))]),i("v-uni-label",{staticClass:"item-distance"},[t._v(t._s(t.ChainInfo.distance))]),i("v-uni-view",{staticClass:"item-phone"},[t._v(t._s(t.__("商家电话："))+t._s(t.ChainInfo.chain_mobile))]),i("v-uni-view",{staticClass:"item-address"},[i("v-uni-label",{staticClass:"iconfont icon-shouhuodizhi ",staticStyle:{"font-size":"40rpx","margin-right":"15rpx"}}),i("v-uni-label",[t._v(t._s(t.ChainInfo.chain_address))])],1)],1)],1)],1):t._e(),i("v-uni-view",{staticClass:"m-cells m-cells-form hide",staticStyle:{"margin-top":"20rpx","z-index":"1"}},[t.product_service_contactor_flag?i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd",staticStyle:{width:"20%"}},[i("v-uni-label",{staticClass:"u-label"},[t._v(t._s(t.__("预约人")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-input",{staticClass:"u-input",attrs:{maxlength:"20",type:"text",value:t.showud_name,placeholder:"请输入预约人姓名"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputud_name.apply(void 0,arguments)}}})],1),""==t.ud_name?i("div",{staticClass:"m-cell-ft"},[i("uni-icons",{staticClass:"m-icon-warn",attrs:{type:"warn"}})],1):t._e()],1):t._e(),t.product_service_contactor_flag?i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd",staticStyle:{width:"20%"}},[i("v-uni-label",{staticClass:"u-label",attrs:{for:""}},[t._v(t._s(t.__("手机号码")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-input",{staticClass:"u-input",attrs:{type:"number",value:t.showphone,placeholder:"请输入手机号码"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputphone.apply(void 0,arguments)}}})],1),t.isre&&""!=t.phone?t._e():i("div",{staticClass:"m-cell-ft"},[i("uni-icons",{staticClass:"m-icon-warn",attrs:{type:"warn"}})],1)],1):t._e(),i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd",staticStyle:{width:"20%"}},[i("v-uni-label",{staticClass:"u-label",attrs:{for:""}},[t._v(t._s(t.__("详细地址")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-input",{staticClass:"u-input",attrs:{maxlength:"100",type:"text",value:t.showdetail,placeholder:"请输入详细地址"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputdetail.apply(void 0,arguments)}}})],1),""==t.detail?i("v-uni-view",{staticClass:"m-cell-ft"},[i("uni-icons",{staticClass:"m-icon-warn",attrs:{type:"warn"}})],1):t._e()],1)],1),i("v-uni-view",{staticClass:"m-cells-title"},[t._v(t._s(t.__("备注")))]),i("v-uni-view",{staticClass:"m-cells m-cells-form"},[i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-bd",staticStyle:{position:"relative"}},[i("v-uni-textarea",{staticClass:"u-textarea",attrs:{maxlength:"200",value:e.remark,"data-id":a,"data-store_id":e.store_id},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputRemark.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"u-textarea-counter"},[i("v-uni-label",[t._v(t._s(t.orderMessageLen[a]||0))]),t._v("/200")],1)],1)],1)],1),i("v-uni-view",{staticClass:"hint m-cell"},[i("v-uni-text",[t._v(t._s(t.__("温馨提示:请您确认预约时间与地址，仔细核对手机号并保持电话畅通。下单成功后您可在“我的预约”查看订单。距离预约服务时间超过24小时您可以取消预约订单，距离预约服务时间24小时之内可以联系商家取消预约订单。")))])],1)]:[i("v-uni-view",{staticClass:"m-cells-title"},[t._v(t._s(t.__("备注")))]),i("v-uni-view",{staticClass:"m-cells m-cells-form"},[i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-textarea",{staticClass:"u-textarea",attrs:{maxlength:"200",value:e.remark,"data-id":a,"data-store_id":e.store_id},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputRemark.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"u-textarea-counter"},[i("v-uni-label",[t._v(t._s(t.orderMessageLen[a]||0))]),t._v("/200")],1)],1)],1)],1)],i("v-uni-view",{key:a+"_6",staticClass:"m-cells total-info"},[i("v-uni-view",{staticClass:"m-cell",attrs:{"data-id":a,"data-user_invoice_id":t.user_invoice_id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.listInvoice.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("发票")))]),t.invoice_header&&t.user_invoice_id?i("v-uni-text",{staticClass:"highlight12"},[t._v("("+t._s(t.invoice_header)+")")]):(t.user_invoice_id,i("v-uni-text",{staticClass:"highlight12"},[t._v("("+t._s(t.__("不需要发票"))+")")]))],1),i("v-uni-view",{staticClass:"arrow m-cell-access"},[i("v-uni-view",{staticClass:"m-cell-ft "})],1)],1),i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("商品总额")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.product_amount,2)))],1),i("v-uni-view",{staticClass:"arrow"})],1),e.points_amount?i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("积分抵扣")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v(t._s(e.points_amount)),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("积分")))])],1),i("v-uni-view",{staticClass:"arrow"})],1):t._e(),e.sp_amount?i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("众宝抵扣")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v(t._s(e.sp_amount)+t._s(t.__("众宝")))]),i("v-uni-view",{staticClass:"arrow"})],1):t._e(),e.discount_amount>0?i("v-uni-view",{staticClass:"m-cell m-cell-parent"},[e.activity_base?i("v-uni-view",{staticClass:"m-cell-bd"},[t._v(t._s(t.__("活动 - "))),e.activity_base.activity_type_id==t.StateCode.ACTIVITY_TYPE_GIFTBAG?i("v-uni-text",[t._v(t._s(t.__("组合套餐")))]):t._e(),e.activity_base.activity_type_id==t.StateCode.ACTIVITY_TYPE_CUTPRICE?i("v-uni-text",[t._v(t._s(t.__("砍价")))]):t._e()],1):t.hasLogin&&100!=t.plantformInfo.user_level_rate_map[t.userInfo.user_level_id]?i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("活动优惠及会员折扣")))]),t.hasLogin?i("v-uni-text",{staticStyle:{"font-size":"24rpx",color:"#717171"}},[t._v(t._s(t.sprintf(t.__("(%s折)"),t.plantformInfo.user_level_rate_map[t.userInfo.user_level_id]/10)))]):t._e()],1):i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("活动优惠")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[i("v-uni-text",{staticClass:"mcs"},[t._v("-"+t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.discount_amount,2)))],1),i("v-uni-view",{staticClass:"arrow"})],1):t._e(),e.discount_items?[e.discount_items.reduction>0?i("v-uni-view",{staticClass:"m-cell m-cell-sub"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("满减")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v("-"),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.discount_items.reduction,2)))],1),i("v-uni-view",{staticClass:"arrow"})],1):t._e(),e.discount_items.giftbag>0?i("v-uni-view",{staticClass:"m-cell m-cell-sub"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("组合套餐")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v("-"),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.discount_items.giftbag,2)))],1),i("v-uni-view",{staticClass:"arrow"})],1):t._e(),e.discount_items.multple>0?i("v-uni-view",{staticClass:"m-cell m-cell-sub"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("多件折")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v("-"),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.discount_items.multple,2)))],1),i("v-uni-view",{staticClass:"arrow"})],1):t._e(),e.discount_items.reduction_again>0?i("v-uni-view",{staticClass:"m-cell m-cell-sub"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("折上折")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v("-"),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.discount_items.reduction_again,2)))],1),i("v-uni-view",{staticClass:"arrow"})],1):t._e()]:t._e(),e.redemption_items.length>0?i("v-uni-view",{staticClass:"m-cell",attrs:{"data-id":a,"data-redemption_id":e.redemption_id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.suitredemptionlist.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("提货券")))]),e.redemption_items.length>0?i("v-uni-text",{staticClass:"highlight12"},[t._v("("+t._s(e.redemption_items.length)+t._s(t.__("张提货券可用"))+")")]):i("v-uni-text",{staticClass:"highlight12"},[t._v(t._s(t.__("(无可用提货券)")))])],1),e.redemption_use_row&&e.redemption_use_row.redemption_price?i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v("-"),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(e.redemption_use_row.redemption_price))],1):t._e(),i("v-uni-view",{staticClass:"arrow m-cell-access"},[i("v-uni-view",{staticClass:"m-cell-ft "})],1)],1):t._e(),e.voucher_items.length>0?i("v-uni-view",{staticClass:"m-cell",attrs:{"data-id":a,"data-user_voucher_id":e.user_voucher_id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.suitcouponlist.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("优惠券")))]),e.voucher_items.length>0?i("v-uni-text",{staticClass:"highlight12"},[t._v("("+t._s(e.voucher_items.length)+t._s(t.__("张优惠券可用"))+")")]):i("v-uni-text",{staticClass:"highlight12"},[t._v(t._s(t.__("(无可用优惠券)")))])],1),e.voucher_amount?i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v("-"),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(e.voucher_amount))],1):t._e(),i("v-uni-view",{staticClass:"arrow m-cell-access"},[i("v-uni-view",{staticClass:"m-cell-ft "})],1)],1):t._e(),e.policy_discount_amount>0?i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("会员折扣")))]),i("v-uni-text",{staticStyle:{"font-size":"24rpx",color:"#717171"}},[t._v(t._s(t.sprintf(t.__("(%s折)"),e.policy_discountrate/10)))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v("-"),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.policy_discount_amount,2)))],1),i("v-uni-view",{staticClass:"arrow"})],1):t._e(),i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("运费")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[i("v-uni-text",{staticClass:"mcs"},[t._v("+"+t._s(t.__("￥")))]),t._v(t._s(t.number_format(e.freight_amount,2)||0))],1),i("v-uni-view",{staticClass:"arrow"})],1),e.store_rebate>0?i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-text",[t._v(t._s(t.__("获得红包")))])],1),i("v-uni-view",{staticClass:"m-cell-ft m-order-typetxt"},[t._v(t._s(t.sprintf(t.__("￥%.2f"),e.store_rebate)))]),i("v-uni-view",{staticClass:"arrow"})],1):t._e(),t._e(),t._e(),t._e(),i("v-uni-view",{staticClass:"m-cell "},[i("v-uni-view",{staticClass:"m-cell-bd"}),i("v-uni-view",{staticClass:"m-cell-ft m-total-info"},[t._v(t._s(t.__("总金额："))),i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),i("v-uni-text",{staticClass:"m-total-price"},[t._v(t._s(t.sprintf(t.__("%.2f"),e.money_amount?e.money_amount:e.money_item_amount+e.freight_amount)))])],1)],1),t.delivery_item_none_row.length>0?i("v-uni-view",[t._l(t.delivery_item_none_row,(function(e,i){return[t._v(t._s(e.product_item_name)+",")]}))],2):t._e()],2)]}))],2)],1),i("v-uni-view",{staticClass:"u-cleanbox"}),i("v-uni-view",{staticClass:"m-footer-btn"},[i("v-uni-view",{staticClass:"m-footer-btn-list"},[i("v-uni-view",{staticClass:"m-footer-btn-item m-cart-total"},[i("v-uni-view",{style:"line-height: "+(t.submitOrderInfo.order_freight_amount,"40rpx;")},[t._v(t._s(t.__("合计："))),t.order_amount?[i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),i("v-uni-text",{staticClass:"m-total-price"},[t._v(t._s(t.number_format(t.order_amount,2)))])]:t._e(),t.submitOrderInfo.order_points_amount?i("v-uni-label",{staticStyle:{padding:"0 6px"}},[t._v("+")]):t._e(),t.submitOrderInfo.order_points_amount?i("v-uni-text",{staticClass:"m-total-price"},[t._v(t._s(t.submitOrderInfo.order_points_amount))]):t._e(),t.submitOrderInfo.order_points_amount?i("v-uni-label",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.__("积分")))]):t._e(),t.submitOrderInfo.order_sp_amount?i("v-uni-label",{staticStyle:{padding:"0 6px"}},[t._v("+")]):t._e(),t.submitOrderInfo.order_sp_amount?i("v-uni-text",{staticClass:"m-total-price"},[t._v(t._s(t.submitOrderInfo.order_sp_amount))]):t._e(),t.submitOrderInfo.order_sp_amount?i("v-uni-label",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.__("众宝")))]):t._e()],2),i("v-uni-view",{staticStyle:{"line-height":"40rpx","font-size":"24rpx"}},[t.submitOrderInfo.order_discount_amount>0?[t._v(t._s(t.__("优惠"))+"("),i("v-uni-label",[i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(t.submitOrderInfo.order_discount_amount,2)))],1),t._v(")"),i("v-uni-label",{staticStyle:{"margin-right":"10rpx"}})]:t._e(),t.submitOrderInfo.order_rebate_amount>0?[t._v(t._s(t.__("获得红包"))+"("),i("v-uni-label",[i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(t.submitOrderInfo.order_rebate_amount,2)))],1),t._v(")"),i("v-uni-label",{staticStyle:{"margin-right":"10rpx"}})]:t._e(),t.submitOrderInfo.order_freight_amount>0?[t._v(t._s(t.__("运费"))+"("),i("v-uni-label",[i("v-uni-text",{staticClass:"mcs"},[t._v(t._s(t.__("￥")))]),t._v(t._s(t.number_format(t.submitOrderInfo.order_freight_amount,2)))],1),t._v(")")]:[t._v(t._s(t.__("免运费")))]],2)],1)],1),t.isSubmit?i("v-uni-view",{staticClass:"m-footer-btn-main u-disabled"},[t._v(t._s(t.__("正在提交....")))]):[!t.can_delivery&&t.delivery_item_none_row.length>0?i("v-uni-view",[i("v-uni-button",{staticClass:"m-footer-btn-main",attrs:{formType:"submit"}},[t._v(t._s(t.__("不可配送")))])],1):t.show_oos&&t.delivery_item_none_row.length>0?i("v-uni-view",[i("v-uni-button",{staticClass:"m-footer-btn-main",attrs:{formType:"submit"}},[t._v(t._s(t.__("暂时缺货")))])],1):t.orderId?i("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.submitOrder.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"m-footer-btn-main",attrs:{formType:"submit"}},[t._v(t._s(t.__("去支付")))])],1):i("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.submitOrder.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"m-footer-btn-main",attrs:{formType:"submit"}},[t._v(t._s(t.__("提交订单")))])],1)]],2),i("payment-box",{ref:"paymentBox",attrs:{paymentDataDefault:t.paymentData,order_id:t.orderId},on:{onCancel:function(e){arguments[0]=e=t.$handleEvent(e),t.onCancel.apply(void 0,arguments)},onPaid:function(e){arguments[0]=e=t.$handleEvent(e),t.onPaid.apply(void 0,arguments)},onFail:function(e){arguments[0]=e=t.$handleEvent(e),t.onFail.apply(void 0,arguments)}}})],2)},n=[]},f056:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-0e39c16a]:export{theme_bg:#e93323}.type-name-box[data-v-0e39c16a]{display:inline;line-height:1}.tag[data-v-0e39c16a]{padding:0 %?10?%}',""]),t.exports=e},f165:function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("e25e"),i("ac1f"),i("00b4"),i("14d9"),i("acd8"),i("5319"),i("4d63"),i("c607"),i("2c3e"),i("25f0"),i("e9c4");var s=a(i("5530")),n=a(i("c7eb")),r=a(i("1da1")),o=a(i("c332")),d=i("26cb"),c={data:function(){return{options:{},isVirtual:!1,udId:0,spinfo:"",remark:"",remarkLength:0,formId:"",submitOrderInfo:{items:[],userMembership:{}},userVoucherIds:[],redemptionIds:[],orderMessage:{},orderMessageLen:{},isSubmit:!1,orderId:"",paymentData:{},integral:"",discount:0,disbursements:"",IsUseCoupon:1,canSelfpick:!1,storeSelfPickFlag:!1,addressFlag:!0,selfpickFlag:!1,chainFlag:!1,date:"",starttime:"",endtime:"",pid:"",ud_name:"",phone:"",stdate:"",eddate:"",time:"",st:"",et:"",addInfo:"",addInfo1:"",shipMethod:0,physicalStoreId:"",item_ids:[],store_id:"",userId:"",chain_id:0,checked_store:0,item_id:"",activity_id:0,sponsorId:0,balance:0,realMoney:0,isBalance:!0,eCardCash:0,extraCash:0,isMembership:!0,isECashCard:!0,isCoupon:!0,isTmplMsg:!0,can_delivery:!1,ifcart:!1,cart_id:"",order_amount:0,ChainInfo:{},chain_rows:[],latitude:"",longitude:"",invoice_header:"",invoice_type_id:0,user_invoice_id:0,invoice_row:{},urlArgs:{},delivery_item_none_row:[],show_oos:!1,product_service_date_flag:!1,product_service_contactor_flag:!1,showPopupFlag:!1,popupMsg:"",isFightGroup:0,showud_name:"",showphone:"",isre:"",showdetail:"",detail:"",isdata:"",salesperson_id:""}},components:{paymentBox:o.default},computed:(0,d.mapState)(["Config","StateCode","notice","plantformInfo","shopInfo","userInfo","hasLogin"]),onLoad:function(t){var e=this;return(0,r.default)((0,n.default)().mark((function i(){var a,s,r,o,d,c,l,u,_,v,m,h,p,f;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$onLaunched;case 2:uni.setNavigationBarTitle({title:e.__("订单提交")}),a=e,e.setData({activity_id:t.activity_id||null,urlArgs:t,options:t}),t.ifcart&&e.setData({ifcart:parseInt(t.ifcart)}),t.cart_id&&e.setData({cart_id:t.cart_id}),t.checked_store&&e.setData({checked_store:t.checked_store}),t.chain_id?e.setData({chain_id:parseInt(t.chain_id),canSelfpick:!0,addressFlag:!1,selfpickFlag:!0}):(s=e.$.getStorageSync("chain_id"),s=0,s||(s=0),e.urlArgs.chain_id=s,s&&e.setData({chain_id:parseInt(s),canSelfpick:!0,addressFlag:!1,selfpickFlag:!0})),r=new Date,o=new Date((new Date).getTime()+1728e5),d=new Date,c=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),l=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),u=d.getFullYear()+1+"-"+(d.getMonth()+1)+"-"+d.getDate(),_=new Date((new Date).getTime()-864e5),v=_.getFullYear(),m=_.getMonth()+1<10?"0"+(_.getMonth()+1):_.getMonth()+1,h=_.getDate()<10?"0"+_.getDate():_.getDate(),p=v+"-"+m+"-"+h,e.setData({stdate:c,date:l,eddate:u,disableDate:p}),f=r.getHours()+":"+r.getMinutes(),e.setData({time:f,st:f,et:f}),e.notice.addNotification("RefreshOrder",a.RefreshOrder,a),e.notice.addNotification("RefreshOrderChain",a.RefreshOrderChain,a),e.notice.addNotification("RefreshCoupon",a.RefreshCoupon,a),e.notice.addNotification("RefreshRedemption",a.RefreshRedemption,a),e.notice.addNotification("GotoPayCheckout",a.gotopay,a),e.notice.addNotification("Refreshinvoice",a.Refreshinvoice,a),e.forceUserInfo((function(t){a.getPlantformInfo((function(t){a.setData({storeSelfPickFlag:t.product_ziti_flag}),a.getCartList()}))}));case 26:case"end":return i.stop()}}),i)})))()},onUnload:function(){this.notice.removeNotification("RefreshOrder",this),this.notice.removeNotification("RefreshOrderChain",this),this.notice.removeNotification("RefreshCoupon",this),this.notice.removeNotification("RefreshRedemption",this),this.notice.removeNotification("GotoPayCheckout",this),this.notice.postNotificationName("Refreshinvoice",this),this.$refs.paymentBox.showBoxView&&this.$refs.paymentBox.cancel()},onBackPress:function(){if(this.$refs.paymentBox.showBoxView)return this.$refs.paymentBox.cancel(),!0},methods:(0,s.default)((0,s.default)({},(0,d.mapMutations)(["login","logout","getPlantformInfo","forceUserInfo","getUserInfo","reloadUserResource"])),{},{refreshData:function(t){var e=this;this.forceUserInfo((function(t){e.getCartList()}))},inputud_name:function(t){this.setData({ud_name:t.detail.value})},inputphone:function(t){this.setData({phone:t.detail.value}),/^1[23456789]\d{9}$/.test(t.detail.value)?this.setData({isre:!0}):this.setData({isre:!1})},RefreshOrder:function(t){console.info(t),this.setData({udId:t.ud_id,chain_id:this.chain_id,spinfo:t.spid,addInfo1:this.addInfo}),this.editUrlArgs("ud_id",t.ud_id),this.getCartList()},RefreshOrderChain:function(t){this.setData({ChainInfo:t.ChainInfo,chain_id:t.ChainInfo.chain_id}),this.getCartList()},RefreshCoupon:function(t){for(var e=this.$.parseJSON(t.val),i=this.userVoucherIds,a=0;a<e.length;a++){e[a].store_id;e[a].user_voucher_id==t.user_voucher_id?this.$.inArray(i,t.user_voucher_id)||i.push(t.user_voucher_id):this.$.arrayRemove(i,e[a].user_voucher_id)}this.setData({userVoucherIds:i});for(var s=this.submitOrderInfo,n=s.order_money_amount,r=0;r<s.items.length;r++)for(var o=0;o<s.items[r].voucher_items.length;o++){var d=s.items[r].voucher_items[o],c=d.user_voucher_id;if(s.items[r].voucher_use_row=[],s.items[r].user_voucher_id=0,this.$.inArray(i,c)){s.items[r].voucher_use_row=d,s.items[r].user_voucher_id=c,n=parseFloat((n-d.voucher_price).toFixed(12)),n=Math.max(0,n),s.items[r].money_amount=parseFloat((s.items[r].money_item_amount+s.items[r].freight_amount-d.voucher_price).toFixed(12)),s.items[r].money_amount=Math.max(0,s.items[r].money_amount);break}}this.setData({submitOrderInfo:s,order_amount:n}),this.getCartList()},RefreshRedemption:function(t){for(var e=this.$.parseJSON(t.val),i=this.redemptionIds,a=0;a<e.length;a++){e[a].store_id;e[a].redemption_id==t.redemption_id?this.$.inArray(i,t.redemption_id)||i.push(t.redemption_id):this.$.arrayRemove(i,e[a].redemption_id)}this.setData({redemptionIds:i});var s=this.submitOrderInfo,n=s.order_money_amount;console.log(n);for(var r=0;r<s.items.length;r++)for(var o=0;o<s.items[r].redemption_items.length;o++){var d=s.items[r].redemption_items[o],c=d.redemption_id;if(console.log(c),s.items[r].redemption_use_row=[],s.items[r].redemption_id=0,this.$.inArray(i,c)){s.items[r].redemption_use_row=d,s.items[r].redemption_id=c,n=parseFloat((n-d.redemption_price).toFixed(12)),n=Math.max(0,n),s.items[r].money_amount=parseFloat((s.items[r].money_item_amount+s.items[r].freight_amount-d.redemption_price).toFixed(12)),s.items[r].money_amount=Math.max(0,s.items[r].money_amount);break}}console.log(n),this.setData({submitOrderInfo:s,order_amount:n})},Refreshinvoice:function(t){this.setData({user_invoice_id:t.user_invoice_id,invoice_type_id:t.invoice_type_id,invoice_header:t.invoice_header})},getCartList:function(){var t=this,e=this.urlArgs;t.chain_id&&(e.chain_id=t.chain_id,e.if_chain=1),t.checked_store&&(e.checked_store=t.checked_store),e.user_voucher_ids=t.userVoucherIds.join(","),e.redemption_ids=t.redemptionIds.join(","),e.ud_id=t.udId,e.delivery_type_id=t.selfpickFlag?5:10,e.is_delivery=t.selfpickFlag?0:1,t.$.request({url:this.Config.URL.cart.checkout,data:e,success:function(e,i,a,s){if(200==i){var n=new Date,r=new Date(n);r.setDate(n.getDate()+parseInt(31104e3));var o=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),d=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),c=0;if(t.$.isNull(e.user_delivery_address)||(c=e.user_delivery_address.ud_id),0==e.items.length&&t.$.confirm(t.__("无符合条件的商品"),t.$.navigateBack),e.if_virtual){var l=e.items[0].items[0];t.setData({item_ids:[l.item_id]}),t.drawSelf(l.store_id),t.setData({isVirtual:e.if_virtual,product_service_date_flag:l.product_service_date_flag,product_service_contactor_flag:l.product_service_contactor_flag,udId:c,store_id:l.store_id,chainFlag:1002!=l.product_valid_type,addressFlag:1002==l.product_valid_type,submitOrderInfo:e,eddate:d,stdate:o,chain_id:t.chain_id})}else{l=e.items[0].items[0];t.chain_id&&t.drawSelf(l.store_id),t.setData({store_id:l.store_id,isVirtual:e.if_virtual,product_service_date_flag:1,product_service_contactor_flag:1,udId:c,submitOrderInfo:e,eddate:d,stdate:o,chain_id:t.chain_id})}t.setData({order_amount:e.order_money_amount}),t.user_voucher_id>0&&t.useVoucher(t.user_voucher_id);for(var u=0;u<e.items.length;u++)1==e.items[u]["store_o2o_flag"]&&t.storeSelfPickFlag&&t.setData({canSelfpick:!0})}else t.$.confirm(a,t.$.navigateBack)},fail:function(e,i){t.$.confirm(e)}})},hidePopup:function(t){this.setData({showPopupFlag:!1})},checkDelivery:function(t){var e=this,i=e.urlArgs;i.ud_id=t,e.spid&&(i.cart_id=e.spid),e.$.request({url:this.Config.URL.cart.checkDelivery,data:i,success:function(i,a,s,n){200==a&&(1==i.need_edit?e.$.alert("该收货地址不完整，请重新选择！"):(e.setData({submitOrderInfo:i}),e.setData({can_delivery:i.can_delivery,show_oos:i.show_oos,delivery_item_none_row:i.items.delivery_item_none_row}),e.editUrlArgs("ud_id",t)))}})},useVoucher:function(t){var e=this,i={user_voucher_id:t,store_id:e.store_id,voucher_type:"voucher"};e.spid&&(i.cart_id=e.spid),e.$.request({url:this.Config.URL.user.voucher_used,data:i,success:function(t,i,a,s){if(200==i){var n=e.submitOrderInfo;n.total_voucher_price=t.items[0].voucher_price,n.user_voucher_id=t.items[0].user_voucher_id;var r=n.total_voucher_price?n.total_voucher_price:0,o=n.money_item_amount?n.money_item_amount:0,d=n.order_freight_amount?n.order_freight_amount:0,c=n.discount_amount?n.discount_amount:0;n.order_money_amount=parseFloat((o+d-r-c).toFixed(12)),n.order_money_amount=Math.max(0,n.order_money_amount),e.setData({submitOrderInfo:n}),e.editUrlArgs("user_voucher_id",t.items[0].user_voucher_id)}}})},count:function(t){this.setData({integral:t.detail.value}),0==t.detail.value&&this.setData({integral:""}),parseInt(t.detail.value)>parseInt(this.submitOrderInfo.userMembership.UsablePoint)?(this.setData({integral:"",discount:0,disbursements:this.submitOrderInfo.ShoppingCartHeaderInfo.ActualPayPrice}),this.$.showModal({title:"提示",content:"请输入正确积分额度"})):this.setData({discount:(this.integral/this.submitOrderInfo.userMembership.PointAsCashRate).toFixed(2),disbursements:(this.submitOrderInfo.ShoppingCartHeaderInfo.ActualPayPrice-this.integral/this.submitOrderInfo.userMembership.PointAsCashRate).toFixed(2)}),this.disbursements<0&&this.setData({disbursements:0}),(this.integral/this.submitOrderInfo.userMembership.PointAsCashRate).toFixed(2)>this.submitOrderInfo.ShoppingCartHeaderInfo.ActualPayPrice&&this.setData({discount:this.submitOrderInfo.ShoppingCartHeaderInfo.ActualPayPrice}),this.submitOrderInfo.ShoppingCartHeaderInfo.MaxUsableCash>=this.disbursements?this.setData({balance:this.disbursements,realMoney:0}):this.setData({balance:this.submitOrderInfo.ShoppingCartHeaderInfo.MaxUsableCash,realMoney:(this.disbursements-this.submitOrderInfo.ShoppingCartHeaderInfo.MaxUsableCash).toFixed(2)})},getLocalTime:function(t){t=t.replace("/Date(","").replace(")/","");var e=new Date(parseInt(t));return e},getUrlParam:function(t,e){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[,""])[1].replace(/\+/g,"%20"))||null},submitOrder:function(){var t=(0,r.default)((0,n.default)().mark((function t(e){var i,a,s,o,d,c,l,u,_,v;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this,!i.$.isNull(i.orderId)){t.next=44;break}if(a=i.urlArgs,0!=this.udId){t.next=8;break}return s=i.__("请选择你的收货地址！"),i.isVirtual&&(s=i.__("请选择你的个人联系信息！")),i.$.showModal({title:i.__("提示"),showCancel:!1,content:s}),t.abrupt("return");case 8:if(!this.isVirtual){t.next=20;break}if(o=this.date+" "+this.time,d=o.replace(/-/g,"/"),c=new Date,l=new Date(d),u=c.getTime(),_=l.getTime(),!(_-u<0)){t.next=16;break}return i.$.showModal({title:"提示",showCancel:!1,content:"您选择的预约时间已不在服务预约时间范围内!"}),t.abrupt("return");case 16:if(!this.product_service_date_flag){t.next=20;break}if(!i.$.isNull(this.date)&&!i.$.isNull(this.time)){t.next=20;break}return i.$.showModal({title:"提示",showCancel:!1,content:"请选择预约服务日期与时间!"}),t.abrupt("return");case 20:a.user_voucher_ids=i.userVoucherIds.join(","),a.redemption_ids=i.redemptionIds.join(","),a.ud_id=a.ud_id||i.udId,a.ifcart=i.ifcart,a.cart_id=i.cart_id,a.payment_type_id=i.StateCode.PAYMENT_TYPE_ONLINE,a.delivery_type_id=i.selfpickFlag?5:10,a.delivery_time_id=1,a.invoice_type_id=1,a.order_invoice_title="",a.order_message=JSON.stringify(i.orderMessage),a.virtual_service_date=i.date,a.virtual_service_time=i.date+" "+i.time,a.chain_id=i.chain_id,a.checked_store=i.checked_store,a.distributor_id=uni.getStorageSync("store_id"),a.salesperson_id=i.salesperson_id,a.user_invoice_id=i.user_invoice_id,v=uni.getStorageSync("source_item_id"),a.source_item_id=v,a.is_delivery=i.selfpickFlag?0:1,i.$.request({method:"POST",url:i.Config.URL.user.order_add,data:a,success:function(){var t=(0,r.default)((0,n.default)().mark((function t(e,a,s,r){var o,d,c,l,u,_;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(200!=a){t.next=10;break}if(v){for(o=JSON.parse(v),d=0;d<e.items.length;d++)for(c=0;c<e.items[d].items.length;c++)if(l=e.items[d].items[c].item_id,v)for(u in o)o[u].u?u==l?delete o[u]:(_=parseInt(Date.parse(new Date)/100),_-o[u].t>2592e3&&delete o[u]):delete o[u];uni.setStorageSync("source_item_id",JSON.stringify(o))}return i.setData({orderId:e.order_ids.join(",")}),e.gb_id&&(i.isFightGroup=e.gb_id),t.next=6,i.$store.dispatch("getUserInfo",(function(t){}));case 6:i.setData({paymentData:{order_id:i.orderId,order_money_amount:e.order_money_amount.toFixed(2),user_money:i.userInfo.user_money,user_points:i.userInfo.user_points,user_recharge_card:i.userInfo.user_recharge_card,user_sp:i.userInfo.user_sp}}),i.notice.postNotificationName("GotoPayCheckout"),t.next=11;break;case 10:250==a&&e&&e.hasOwnProperty("mobile_is_bind")?i.$.confirm(s,(function(t){t.confirm&&i.$.gopage("/member/member/bindphone")}),!0):i.$.confirm(s);case 11:case"end":return t.stop()}}),t)})));return function(e,i,a,s){return t.apply(this,arguments)}}(),fail:function(t,e,a,s){i.$.showToast({title:a})}}),t.next=45;break;case 44:i.notice.postNotificationName("GotoPayCheckout");case 45:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),gotopay:function(t){var e=this;return setTimeout((function(){e.$refs.paymentBox.show()}),400),!0},inputRemark:function(t){var e=this.submitOrderInfo;e.items[t.currentTarget.dataset.id].remark=t.detail.value,e.items[t.currentTarget.dataset.id].remarkLength=t.detail.value.length;var i=this.orderMessageLen,a=this.orderMessage;this.$set(this.orderMessageLen,t.currentTarget.dataset.id,t.detail.value.length),this.$set(this.orderMessage,t.currentTarget.dataset.store_id,t.detail.value),this.setData({orderMessage:a,orderMessageLen:i}),this.setData({submitOrderInfo:e})},sendMessage:function(t,e){var i={api:this.Config.URL.wx.get_tpl_msg_config,pages:"/member/order/detail?on="+t,formId:this.formId,WeiXinOpenId:this.userInfo.openId,value:{order_id:t,msg_type:1==e?"OrderSubmitMessage":"OrderPaySuccessWXMessage"}};this.$.sendTpl(i)},suitcouponlist:function(t){var e=this.urlArgs;e.user_voucher_id=parseInt(t.currentTarget.dataset.user_voucher_id),e.val=encodeURIComponent(JSON.stringify(this.submitOrderInfo.items[t.currentTarget.dataset.id].voucher_items));var i=this.$.createUrl("/activity/coupon/member",e);this.$.navigateTo({url:i})},suitredemptionlist:function(t){var e=this.urlArgs;e.redemption_id=parseInt(t.currentTarget.dataset.redemption_id),e.val=encodeURIComponent(JSON.stringify(this.submitOrderInfo.items[t.currentTarget.dataset.id].redemption_items));var i=this.$.createUrl("/activity/redemption/member",e);this.$.navigateTo({url:i})},listInvoice:function(t){var e=this.urlArgs;e.user_invoice_id=parseInt(t.currentTarget.dataset.user_invoice_id),e.issub=1;var i=this.$.createUrl("/member/invoice/list",e);this.$.navigateTo({url:i})},onCancel:function(t){},onPaid:function(t){this.returnUrl(this.orderId)},onFail:function(t){this.$.gotopage("/member/order/detail?on="+this.orderId)},returnUrl:function(t){this.isFightGroup?this.$.gotopage("/activity/fightgroup/detail?gb_id="+this.isFightGroup+"&on="+t):this.$.gotopage("/member/order/detail?on="+t)},selectAddress:function(){var t=this.urlArgs,e="";this.udId>0?(e="/member/address/list",t.issub="true",t.ud_id=this.udId):(e="/member/address/manage",t.ud_id=-1,t.issub="true"),this.$.navigateTo({url:this.$.createUrl(e,t)})},getNearbylist:function(t){var e=this,i={store_id:t,item_id:this.item_ids,lat:this.latitude,lng:this.longitude,page:1,rows:10};e.chain_id&&(i["chain_id"]=e.chain_id,i["is_chain"]=1),e.chain_rows.length<=0&&e.$.request({url:this.Config.URL.store.getNearChain,data:i,loading:!1,dataType:"json",success:function(t,a,s,n){if(!e.$.isNull(t.items)&&t.items.length>0){e.setData({chain_rows:t.items});for(var r=0;r<t.items.length;r++)t.items[r]["distance"]=e.$.distanceFormat(t.items[r]["distance"]),e.chain_id==t.items[r].chain_id&&e.setData({chainFlag:!0,ChainInfo:t.items[0],chain_id:t.items[0].chain_id,item_id:i.item_id,physicalStoreId:t.items[0].Id});e.chain_id||e.setData({chainFlag:!0,ChainInfo:t.items[0],chain_id:t.items[0].chain_id,item_id:i.item_id,physicalStoreId:t.items[0].Id})}else e.setData({chainFlag:!1})}})},express:function(){this.setData({addressFlag:!0,selfpickFlag:!1,ud_name:"",phone:""}),this.addressFlag?this.setData({shipMethod:0}):this.setData({shipMethod:1}),this.getCartList()},draw:function(t){var e=t.currentTarget.dataset.store_id;this.setData({selfpickFlag:!0,addressFlag:!1}),this.drawSelf(e),this.getCartList()},drawSelf:function(t){var e=this;e.$.getLocation({type:"wgs84",success:function(i){e.setData({latitude:i.latitude,longitude:i.longitude}),e.getNearbylist(t)},fail:function(){e.setData({isdata:!0}),e.$.alert("授权失败"),e.getNearbylist(t)}}),this.selfpickFlag?this.setData({shipMethod:1}):this.setData({shipMethod:0})},bindTimeChange:function(t){this.setData({time:t.detail.value})},bindDateChange:function(t){this.setData({date:t.detail.value})},switchChange:function(t){t.detail.value?this.setData({realMoney:this.realMoney,isBalance:!0}):this.setData({disbursements:this.disbursements,isBalance:!1})},editUrlArgs:function(t,e){var i=this.urlArgs;i[t]=e,this.setData({urlArgs:i})}})};e.default=c}}]);